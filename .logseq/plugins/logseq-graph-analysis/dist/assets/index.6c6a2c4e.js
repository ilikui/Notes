var Hu=Object.defineProperty,qu=Object.defineProperties;var Vu=Object.getOwnPropertyDescriptors;var Li=Object.getOwnPropertySymbols;var ua=Object.prototype.hasOwnProperty,la=Object.prototype.propertyIsEnumerable;var co=(n,t,e)=>t in n?Hu(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,ur=(n,t)=>{for(var e in t||(t={}))ua.call(t,e)&&co(n,e,t[e]);if(Li)for(var e of Li(t))la.call(t,e)&&co(n,e,t[e]);return n},$n=(n,t)=>qu(n,Vu(t));var ca=(n,t)=>{var e={};for(var r in n)ua.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&Li)for(var r of Li(n))t.indexOf(r)<0&&la.call(n,r)&&(e[r]=n[r]);return e};var ce=(n,t,e)=>(co(n,typeof t!="symbol"?t+"":t,e),e);const Hi={},Yu=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function e(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=e(i);fetch(i.href,o)}};Yu();var W=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},ha={exports:{}};/*! For license information please see lsplugin.user.js.LICENSE.txt */(function(n,t){(function(e,r){n.exports=r()})(self,function(){return(()=>{var e={227:(a,s,l)=>{var u=l(155);s.formatArgs=function(d){if(d[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+d[0]+(this.useColors?"%c ":" ")+"+"+a.exports.humanize(this.diff),!this.useColors)return;const c="color: "+this.color;d.splice(1,0,c,"color: inherit");let f=0,p=0;d[0].replace(/%[a-zA-Z%]/g,w=>{w!=="%%"&&(f++,w==="%c"&&(p=f))}),d.splice(p,0,c)},s.save=function(d){try{d?s.storage.setItem("debug",d):s.storage.removeItem("debug")}catch{}},s.load=function(){let d;try{d=s.storage.getItem("debug")}catch{}return!d&&u!==void 0&&"env"in u&&(d=u.env.DEBUG),d},s.useColors=function(){return!(typeof window=="undefined"||!window.process||window.process.type!=="renderer"&&!window.process.__nwjs)||(typeof navigator=="undefined"||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},s.storage=function(){try{return localStorage}catch{}}(),s.destroy=(()=>{let d=!1;return()=>{d||(d=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),s.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],s.log=console.debug||console.log||(()=>{}),a.exports=l(447)(s);const{formatters:h}=a.exports;h.j=function(d){try{return JSON.stringify(d)}catch(c){return"[UnexpectedJSONParseError]: "+c.message}}},447:(a,s,l)=>{a.exports=function(u){function h(f){let p,w=null;function S(...A){if(!S.enabled)return;const T=S,L=Number(new Date),C=L-(p||L);T.diff=C,T.prev=p,T.curr=L,p=L,A[0]=h.coerce(A[0]),typeof A[0]!="string"&&A.unshift("%O");let E=0;A[0]=A[0].replace(/%([a-zA-Z%])/g,(F,y)=>{if(F==="%%")return"%";E++;const _=h.formatters[y];if(typeof _=="function"){const b=A[E];F=_.call(T,b),A.splice(E,1),E--}return F}),h.formatArgs.call(T,A),(T.log||h.log).apply(T,A)}return S.namespace=f,S.useColors=h.useColors(),S.color=h.selectColor(f),S.extend=d,S.destroy=h.destroy,Object.defineProperty(S,"enabled",{enumerable:!0,configurable:!1,get:()=>w===null?h.enabled(f):w,set:A=>{w=A}}),typeof h.init=="function"&&h.init(S),S}function d(f,p){const w=h(this.namespace+(p===void 0?":":p)+f);return w.log=this.log,w}function c(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}return h.debug=h,h.default=h,h.coerce=function(f){return f instanceof Error?f.stack||f.message:f},h.disable=function(){const f=[...h.names.map(c),...h.skips.map(c).map(p=>"-"+p)].join(",");return h.enable(""),f},h.enable=function(f){let p;h.save(f),h.names=[],h.skips=[];const w=(typeof f=="string"?f:"").split(/[\s,]+/),S=w.length;for(p=0;p<S;p++)w[p]&&((f=w[p].replace(/\*/g,".*?"))[0]==="-"?h.skips.push(new RegExp("^"+f.substr(1)+"$")):h.names.push(new RegExp("^"+f+"$")))},h.enabled=function(f){if(f[f.length-1]==="*")return!0;let p,w;for(p=0,w=h.skips.length;p<w;p++)if(h.skips[p].test(f))return!1;for(p=0,w=h.names.length;p<w;p++)if(h.names[p].test(f))return!0;return!1},h.humanize=l(824),h.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(u).forEach(f=>{h[f]=u[f]}),h.names=[],h.skips=[],h.formatters={},h.selectColor=function(f){let p=0;for(let w=0;w<f.length;w++)p=(p<<5)-p+f.charCodeAt(w),p|=0;return h.colors[Math.abs(p)%h.colors.length]},h.enable(h.load()),h}},856:function(a){a.exports=function(){var s=Object.hasOwnProperty,l=Object.setPrototypeOf,u=Object.isFrozen,h=Object.getPrototypeOf,d=Object.getOwnPropertyDescriptor,c=Object.freeze,f=Object.seal,p=Object.create,w=typeof Reflect!="undefined"&&Reflect,S=w.apply,A=w.construct;S||(S=function($,U,O){return $.apply(U,O)}),c||(c=function($){return $}),f||(f=function($){return $}),A||(A=function($,U){return new(Function.prototype.bind.apply($,[null].concat(function(O){if(Array.isArray(O)){for(var Ee=0,Te=Array(O.length);Ee<O.length;Ee++)Te[Ee]=O[Ee];return Te}return Array.from(O)}(U))))});var T,L=ne(Array.prototype.forEach),C=ne(Array.prototype.pop),E=ne(Array.prototype.push),F=ne(String.prototype.toLowerCase),y=ne(String.prototype.match),_=ne(String.prototype.replace),b=ne(String.prototype.indexOf),G=ne(String.prototype.trim),q=ne(RegExp.prototype.test),Q=(T=TypeError,function(){for(var $=arguments.length,U=Array($),O=0;O<$;O++)U[O]=arguments[O];return A(T,U)});function ne($){return function(U){for(var O=arguments.length,Ee=Array(O>1?O-1:0),Te=1;Te<O;Te++)Ee[Te-1]=arguments[Te];return S($,U,Ee)}}function N($,U){l&&l($,null);for(var O=U.length;O--;){var Ee=U[O];if(typeof Ee=="string"){var Te=F(Ee);Te!==Ee&&(u(U)||(U[O]=Te),Ee=Te)}$[Ee]=!0}return $}function pe($){var U=p(null),O=void 0;for(O in $)S(s,$,[O])&&(U[O]=$[O]);return U}function Ce($,U){for(;$!==null;){var O=d($,U);if(O){if(O.get)return ne(O.get);if(typeof O.value=="function")return ne(O.value)}$=h($)}return function(Ee){return console.warn("fallback value for",Ee),null}}var ie=c(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),P=c(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),j=c(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),B=c(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),R=c(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),k=c(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),oe=c(["#text"]),de=c(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),ye=c(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Le=c(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ve=c(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),V=f(/\{\{[\s\S]*|[\s\S]*\}\}/gm),gt=f(/<%[\s\S]*|[\s\S]*%>/gm),$e=f(/^data-[\-\w.\u00B7-\uFFFF]/),ze=f(/^aria-[\-\w]+$/),we=f(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Ae=f(/^(?:\w+script|data):/i),xe=f(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),me=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $};function re($){if(Array.isArray($)){for(var U=0,O=Array($.length);U<$.length;U++)O[U]=$[U];return O}return Array.from($)}var se=function(){return typeof window=="undefined"?null:window},Oe=function($,U){if(($===void 0?"undefined":me($))!=="object"||typeof $.createPolicy!="function")return null;var O=null,Ee="data-tt-policy-suffix";U.currentScript&&U.currentScript.hasAttribute(Ee)&&(O=U.currentScript.getAttribute(Ee));var Te="dompurify"+(O?"#"+O:"");try{return $.createPolicy(Te,{createHTML:function(ht){return ht}})}catch{return console.warn("TrustedTypes policy "+Te+" could not be created."),null}};return function $(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:se(),O=function(D){return $(D)};if(O.version="2.3.1",O.removed=[],!U||!U.document||U.document.nodeType!==9)return O.isSupported=!1,O;var Ee=U.document,Te=U.document,ht=U.DocumentFragment,$t=U.HTMLTemplateElement,tt=U.Node,jt=U.Element,Yt=U.NodeFilter,Ot=U.NamedNodeMap,rr=Ot===void 0?U.NamedNodeMap||U.MozNamedAttrMap:Ot,nr=U.Text,ir=U.Comment,vr=U.DOMParser,Dt=U.trustedTypes,Pt=jt.prototype,or=Ce(Pt,"cloneNode"),xn=Ce(Pt,"nextSibling"),ai=Ce(Pt,"childNodes"),Vr=Ce(Pt,"parentNode");if(typeof $t=="function"){var Yr=Te.createElement("template");Yr.content&&Yr.content.ownerDocument&&(Te=Yr.content.ownerDocument)}var Ut=Oe(Dt,Ee),si=Ut&&Er?Ut.createHTML(""):"",Kr=Te,Zr=Kr.implementation,io=Kr.createNodeIterator,oo=Kr.createDocumentFragment,Ue=Kr.getElementsByTagName,ui=Ee.importNode,br={};try{br=pe(Te).documentMode?Te.documentMode:{}}catch{}var At={};O.isSupported=typeof Vr=="function"&&Zr&&Zr.createHTMLDocument!==void 0&&br!==9;var Xr=V,Jr=gt,li=$e,On=ze,ao=Ae,ci=xe,Dn=we,it=null,hi=N({},[].concat(re(ie),re(P),re(j),re(R),re(oe))),st=null,di=N({},[].concat(re(de),re(ye),re(Le),re(ve))),Pn=null,Qr=null,fi=!0,kn=!0,pi=!1,ar=!1,_r=!1,en=!1,Fn=!1,wr=!1,tn=!1,gi=!0,Er=!1,rn=!0,Rn=!0,Fr=!1,Ar={},sr=null,Gn=N({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Rr=null,yi=N({},["audio","video","img","source","image","track"]),Gr=null,mi=N({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),nn="http://www.w3.org/1998/Math/MathML",zt="http://www.w3.org/2000/svg",Kt="http://www.w3.org/1999/xhtml",on=Kt,an=!1,Sr=null,so=Te.createElement("form"),Ir=function(D){Sr&&Sr===D||(D&&(D===void 0?"undefined":me(D))==="object"||(D={}),D=pe(D),it="ALLOWED_TAGS"in D?N({},D.ALLOWED_TAGS):hi,st="ALLOWED_ATTR"in D?N({},D.ALLOWED_ATTR):di,Gr="ADD_URI_SAFE_ATTR"in D?N(pe(mi),D.ADD_URI_SAFE_ATTR):mi,Rr="ADD_DATA_URI_TAGS"in D?N(pe(yi),D.ADD_DATA_URI_TAGS):yi,sr="FORBID_CONTENTS"in D?N({},D.FORBID_CONTENTS):Gn,Pn="FORBID_TAGS"in D?N({},D.FORBID_TAGS):{},Qr="FORBID_ATTR"in D?N({},D.FORBID_ATTR):{},Ar="USE_PROFILES"in D&&D.USE_PROFILES,fi=D.ALLOW_ARIA_ATTR!==!1,kn=D.ALLOW_DATA_ATTR!==!1,pi=D.ALLOW_UNKNOWN_PROTOCOLS||!1,ar=D.SAFE_FOR_TEMPLATES||!1,_r=D.WHOLE_DOCUMENT||!1,wr=D.RETURN_DOM||!1,tn=D.RETURN_DOM_FRAGMENT||!1,gi=D.RETURN_DOM_IMPORT!==!1,Er=D.RETURN_TRUSTED_TYPE||!1,Fn=D.FORCE_BODY||!1,rn=D.SANITIZE_DOM!==!1,Rn=D.KEEP_CONTENT!==!1,Fr=D.IN_PLACE||!1,Dn=D.ALLOWED_URI_REGEXP||Dn,on=D.NAMESPACE||Kt,ar&&(kn=!1),tn&&(wr=!0),Ar&&(it=N({},[].concat(re(oe))),st=[],Ar.html===!0&&(N(it,ie),N(st,de)),Ar.svg===!0&&(N(it,P),N(st,ye),N(st,ve)),Ar.svgFilters===!0&&(N(it,j),N(st,ye),N(st,ve)),Ar.mathMl===!0&&(N(it,R),N(st,Le),N(st,ve))),D.ADD_TAGS&&(it===hi&&(it=pe(it)),N(it,D.ADD_TAGS)),D.ADD_ATTR&&(st===di&&(st=pe(st)),N(st,D.ADD_ATTR)),D.ADD_URI_SAFE_ATTR&&N(Gr,D.ADD_URI_SAFE_ATTR),D.FORBID_CONTENTS&&(sr===Gn&&(sr=pe(sr)),N(sr,D.FORBID_CONTENTS)),Rn&&(it["#text"]=!0),_r&&N(it,["html","head","body"]),it.table&&(N(it,["tbody"]),delete Pn.tbody),c&&c(D),Sr=D)},vi=N({},["mi","mo","mn","ms","mtext"]),bi=N({},["foreignobject","desc","title","annotation-xml"]),Cr=N({},P);N(Cr,j),N(Cr,B);var In=N({},R);N(In,k);var uo=function(D){var ee=Vr(D);ee&&ee.tagName||(ee={namespaceURI:Kt,tagName:"template"});var Z=F(D.tagName),Fe=F(ee.tagName);if(D.namespaceURI===zt)return ee.namespaceURI===Kt?Z==="svg":ee.namespaceURI===nn?Z==="svg"&&(Fe==="annotation-xml"||vi[Fe]):Boolean(Cr[Z]);if(D.namespaceURI===nn)return ee.namespaceURI===Kt?Z==="math":ee.namespaceURI===zt?Z==="math"&&bi[Fe]:Boolean(In[Z]);if(D.namespaceURI===Kt){if(ee.namespaceURI===zt&&!bi[Fe]||ee.namespaceURI===nn&&!vi[Fe])return!1;var We=N({},["title","style","font","a","script"]);return!In[Z]&&(We[Z]||!Cr[Z])}return!1},Mt=function(D){E(O.removed,{element:D});try{D.parentNode.removeChild(D)}catch{try{D.outerHTML=si}catch{D.remove()}}},_i=function(D,ee){try{E(O.removed,{attribute:ee.getAttributeNode(D),from:ee})}catch{E(O.removed,{attribute:null,from:ee})}if(ee.removeAttribute(D),D==="is"&&!st[D])if(wr||tn)try{Mt(ee)}catch{}else try{ee.setAttribute(D,"")}catch{}},Nt=function(D){var ee=void 0,Z=void 0;if(Fn)D="<remove></remove>"+D;else{var Fe=y(D,/^[\r\n\t ]+/);Z=Fe&&Fe[0]}var We=Ut?Ut.createHTML(D):D;if(on===Kt)try{ee=new vr().parseFromString(We,"text/html")}catch{}if(!ee||!ee.documentElement){ee=Zr.createDocument(on,"template",null);try{ee.documentElement.innerHTML=an?"":We}catch{}}var lt=ee.body||ee.documentElement;return D&&Z&&lt.insertBefore(Te.createTextNode(Z),lt.childNodes[0]||null),on===Kt?Ue.call(ee,_r?"html":"body")[0]:_r?ee.documentElement:lt},$r=function(D){return io.call(D.ownerDocument||D,D,Yt.SHOW_ELEMENT|Yt.SHOW_COMMENT|Yt.SHOW_TEXT,null,!1)},wi=function(D){return!(D instanceof nr||D instanceof ir||typeof D.nodeName=="string"&&typeof D.textContent=="string"&&typeof D.removeChild=="function"&&D.attributes instanceof rr&&typeof D.removeAttribute=="function"&&typeof D.setAttribute=="function"&&typeof D.namespaceURI=="string"&&typeof D.insertBefore=="function")},Zt=function(D){return(tt===void 0?"undefined":me(tt))==="object"?D instanceof tt:D&&(D===void 0?"undefined":me(D))==="object"&&typeof D.nodeType=="number"&&typeof D.nodeName=="string"},Bt=function(D,ee,Z){At[D]&&L(At[D],function(Fe){Fe.call(O,ee,Z,Sr)})},Ei=function(D){var ee=void 0;if(Bt("beforeSanitizeElements",D,null),wi(D)||y(D.nodeName,/[\u0080-\uFFFF]/))return Mt(D),!0;var Z=F(D.nodeName);if(Bt("uponSanitizeElement",D,{tagName:Z,allowedTags:it}),!Zt(D.firstElementChild)&&(!Zt(D.content)||!Zt(D.content.firstElementChild))&&q(/<[/\w]/g,D.innerHTML)&&q(/<[/\w]/g,D.textContent)||Z==="select"&&q(/<template/i,D.innerHTML))return Mt(D),!0;if(!it[Z]||Pn[Z]){if(Rn&&!sr[Z]){var Fe=Vr(D)||D.parentNode,We=ai(D)||D.childNodes;if(We&&Fe)for(var lt=We.length-1;lt>=0;--lt)Fe.insertBefore(or(We[lt],!0),xn(D))}return Mt(D),!0}return D instanceof jt&&!uo(D)?(Mt(D),!0):Z!=="noscript"&&Z!=="noembed"||!q(/<\/no(script|embed)/i,D.innerHTML)?(ar&&D.nodeType===3&&(ee=D.textContent,ee=_(ee,Xr," "),ee=_(ee,Jr," "),D.textContent!==ee&&(E(O.removed,{element:D.cloneNode()}),D.textContent=ee)),Bt("afterSanitizeElements",D,null),!1):(Mt(D),!0)},Ai=function(D,ee,Z){if(rn&&(ee==="id"||ee==="name")&&(Z in Te||Z in so))return!1;if(!(kn&&!Qr[ee]&&q(li,ee))){if(!(fi&&q(On,ee))){if(!st[ee]||Qr[ee])return!1;if(!Gr[ee]){if(!q(Dn,_(Z,ci,""))){if((ee!=="src"&&ee!=="xlink:href"&&ee!=="href"||D==="script"||b(Z,"data:")!==0||!Rr[D])&&!(pi&&!q(ao,_(Z,ci,"")))){if(Z)return!1}}}}}return!0},Si=function(D){var ee=void 0,Z=void 0,Fe=void 0,We=void 0;Bt("beforeSanitizeAttributes",D,null);var lt=D.attributes;if(lt){var ot={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:st};for(We=lt.length;We--;){var sn=ee=lt[We],St=sn.name,un=sn.namespaceURI;if(Z=G(ee.value),Fe=F(St),ot.attrName=Fe,ot.attrValue=Z,ot.keepAttr=!0,ot.forceKeepAttr=void 0,Bt("uponSanitizeAttribute",D,ot),Z=ot.attrValue,!ot.forceKeepAttr&&(_i(St,D),ot.keepAttr))if(q(/\/>/i,Z))_i(St,D);else{ar&&(Z=_(Z,Xr," "),Z=_(Z,Jr," "));var Ci=D.nodeName.toLowerCase();if(Ai(Ci,Fe,Z))try{un?D.setAttributeNS(un,St,Z):D.setAttribute(St,Z),C(O.removed)}catch{}}}Bt("afterSanitizeAttributes",D,null)}},lo=function D(ee){var Z=void 0,Fe=$r(ee);for(Bt("beforeSanitizeShadowDOM",ee,null);Z=Fe.nextNode();)Bt("uponSanitizeShadowNode",Z,null),Ei(Z)||(Z.content instanceof ht&&D(Z.content),Si(Z));Bt("afterSanitizeShadowDOM",ee,null)};return O.sanitize=function(D,ee){var Z=void 0,Fe=void 0,We=void 0,lt=void 0,ot=void 0;if((an=!D)&&(D="<!-->"),typeof D!="string"&&!Zt(D)){if(typeof D.toString!="function")throw Q("toString is not a function");if(typeof(D=D.toString())!="string")throw Q("dirty is not a string, aborting")}if(!O.isSupported){if(me(U.toStaticHTML)==="object"||typeof U.toStaticHTML=="function"){if(typeof D=="string")return U.toStaticHTML(D);if(Zt(D))return U.toStaticHTML(D.outerHTML)}return D}if(en||Ir(ee),O.removed=[],typeof D=="string"&&(Fr=!1),!Fr)if(D instanceof tt)(Fe=(Z=Nt("<!---->")).ownerDocument.importNode(D,!0)).nodeType===1&&Fe.nodeName==="BODY"||Fe.nodeName==="HTML"?Z=Fe:Z.appendChild(Fe);else{if(!wr&&!ar&&!_r&&D.indexOf("<")===-1)return Ut&&Er?Ut.createHTML(D):D;if(!(Z=Nt(D)))return wr?null:si}Z&&Fn&&Mt(Z.firstChild);for(var sn=$r(Fr?D:Z);We=sn.nextNode();)We.nodeType===3&&We===lt||Ei(We)||(We.content instanceof ht&&lo(We.content),Si(We),lt=We);if(lt=null,Fr)return D;if(wr){if(tn)for(ot=oo.call(Z.ownerDocument);Z.firstChild;)ot.appendChild(Z.firstChild);else ot=Z;return gi&&(ot=ui.call(Ee,ot,!0)),ot}var St=_r?Z.outerHTML:Z.innerHTML;return ar&&(St=_(St,Xr," "),St=_(St,Jr," ")),Ut&&Er?Ut.createHTML(St):St},O.setConfig=function(D){Ir(D),en=!0},O.clearConfig=function(){Sr=null,en=!1},O.isValidAttribute=function(D,ee,Z){Sr||Ir({});var Fe=F(D),We=F(ee);return Ai(Fe,We,Z)},O.addHook=function(D,ee){typeof ee=="function"&&(At[D]=At[D]||[],E(At[D],ee))},O.removeHook=function(D){At[D]&&C(At[D])},O.removeHooks=function(D){At[D]&&(At[D]=[])},O.removeAllHooks=function(){At={}},O}()}()},729:a=>{var s=Object.prototype.hasOwnProperty,l="~";function u(){}function h(p,w,S){this.fn=p,this.context=w,this.once=S||!1}function d(p,w,S,A,T){if(typeof S!="function")throw new TypeError("The listener must be a function");var L=new h(S,A||p,T),C=l?l+w:w;return p._events[C]?p._events[C].fn?p._events[C]=[p._events[C],L]:p._events[C].push(L):(p._events[C]=L,p._eventsCount++),p}function c(p,w){--p._eventsCount==0?p._events=new u:delete p._events[w]}function f(){this._events=new u,this._eventsCount=0}Object.create&&(u.prototype=Object.create(null),new u().__proto__||(l=!1)),f.prototype.eventNames=function(){var p,w,S=[];if(this._eventsCount===0)return S;for(w in p=this._events)s.call(p,w)&&S.push(l?w.slice(1):w);return Object.getOwnPropertySymbols?S.concat(Object.getOwnPropertySymbols(p)):S},f.prototype.listeners=function(p){var w=l?l+p:p,S=this._events[w];if(!S)return[];if(S.fn)return[S.fn];for(var A=0,T=S.length,L=new Array(T);A<T;A++)L[A]=S[A].fn;return L},f.prototype.listenerCount=function(p){var w=l?l+p:p,S=this._events[w];return S?S.fn?1:S.length:0},f.prototype.emit=function(p,w,S,A,T,L){var C=l?l+p:p;if(!this._events[C])return!1;var E,F,y=this._events[C],_=arguments.length;if(y.fn){switch(y.once&&this.removeListener(p,y.fn,void 0,!0),_){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,w),!0;case 3:return y.fn.call(y.context,w,S),!0;case 4:return y.fn.call(y.context,w,S,A),!0;case 5:return y.fn.call(y.context,w,S,A,T),!0;case 6:return y.fn.call(y.context,w,S,A,T,L),!0}for(F=1,E=new Array(_-1);F<_;F++)E[F-1]=arguments[F];y.fn.apply(y.context,E)}else{var b,G=y.length;for(F=0;F<G;F++)switch(y[F].once&&this.removeListener(p,y[F].fn,void 0,!0),_){case 1:y[F].fn.call(y[F].context);break;case 2:y[F].fn.call(y[F].context,w);break;case 3:y[F].fn.call(y[F].context,w,S);break;case 4:y[F].fn.call(y[F].context,w,S,A);break;default:if(!E)for(b=1,E=new Array(_-1);b<_;b++)E[b-1]=arguments[b];y[F].fn.apply(y[F].context,E)}}return!0},f.prototype.on=function(p,w,S){return d(this,p,w,S,!1)},f.prototype.once=function(p,w,S){return d(this,p,w,S,!0)},f.prototype.removeListener=function(p,w,S,A){var T=l?l+p:p;if(!this._events[T])return this;if(!w)return c(this,T),this;var L=this._events[T];if(L.fn)L.fn!==w||A&&!L.once||S&&L.context!==S||c(this,T);else{for(var C=0,E=[],F=L.length;C<F;C++)(L[C].fn!==w||A&&!L[C].once||S&&L[C].context!==S)&&E.push(L[C]);E.length?this._events[T]=E.length===1?E[0]:E:c(this,T)}return this},f.prototype.removeAllListeners=function(p){var w;return p?(w=l?l+p:p,this._events[w]&&c(this,w)):(this._events=new u,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=l,f.EventEmitter=f,a.exports=f},717:a=>{typeof Object.create=="function"?a.exports=function(s,l){s.super_=l,s.prototype=Object.create(l.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}})}:a.exports=function(s,l){s.super_=l;var u=function(){};u.prototype=l.prototype,s.prototype=new u,s.prototype.constructor=s}},824:a=>{var s=1e3,l=60*s,u=60*l,h=24*u;function d(c,f,p,w){var S=f>=1.5*p;return Math.round(c/p)+" "+w+(S?"s":"")}a.exports=function(c,f){f=f||{};var p,w,S=typeof c;if(S==="string"&&c.length>0)return function(A){if(!((A=String(A)).length>100)){var T=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(A);if(T){var L=parseFloat(T[1]);switch((T[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*L;case"weeks":case"week":case"w":return 6048e5*L;case"days":case"day":case"d":return L*h;case"hours":case"hour":case"hrs":case"hr":case"h":return L*u;case"minutes":case"minute":case"mins":case"min":case"m":return L*l;case"seconds":case"second":case"secs":case"sec":case"s":return L*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return L;default:return}}}}(c);if(S==="number"&&isFinite(c))return f.long?(p=c,(w=Math.abs(p))>=h?d(p,w,h,"day"):w>=u?d(p,w,u,"hour"):w>=l?d(p,w,l,"minute"):w>=s?d(p,w,s,"second"):p+" ms"):function(A){var T=Math.abs(A);return T>=h?Math.round(A/h)+"d":T>=u?Math.round(A/u)+"h":T>=l?Math.round(A/l)+"m":T>=s?Math.round(A/s)+"s":A+"ms"}(c);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(c))}},520:(a,s,l)=>{var u=l(155),h=u.platform==="win32",d=l(539);function c(y,_){for(var b=[],G=0;G<y.length;G++){var q=y[G];q&&q!=="."&&(q===".."?b.length&&b[b.length-1]!==".."?b.pop():_&&b.push(".."):b.push(q))}return b}function f(y){for(var _=y.length-1,b=0;b<=_&&!y[b];b++);for(var G=_;G>=0&&!y[G];G--);return b===0&&G===_?y:b>G?[]:y.slice(b,G+1)}var p=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,w=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,S={};function A(y){var _=p.exec(y),b=(_[1]||"")+(_[2]||""),G=_[3]||"",q=w.exec(G);return[b,q[1],q[2],q[3]]}function T(y){var _=p.exec(y),b=_[1]||"",G=!!b&&b[1]!==":";return{device:b,isUnc:G,isAbsolute:G||!!_[2],tail:_[3]}}function L(y){return"\\\\"+y.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}S.resolve=function(){for(var y="",_="",b=!1,G=arguments.length-1;G>=-1;G--){var q;if(G>=0?q=arguments[G]:y?(q=u.env["="+y])&&q.substr(0,3).toLowerCase()===y.toLowerCase()+"\\"||(q=y+"\\"):q=u.cwd(),!d.isString(q))throw new TypeError("Arguments to path.resolve must be strings");if(q){var Q=T(q),ne=Q.device,N=Q.isUnc,pe=Q.isAbsolute,Ce=Q.tail;if((!ne||!y||ne.toLowerCase()===y.toLowerCase())&&(y||(y=ne),b||(_=Ce+"\\"+_,b=pe),y&&b))break}}return N&&(y=L(y)),y+(b?"\\":"")+(_=c(_.split(/[\\\/]+/),!b).join("\\"))||"."},S.normalize=function(y){var _=T(y),b=_.device,G=_.isUnc,q=_.isAbsolute,Q=_.tail,ne=/[\\\/]$/.test(Q);return(Q=c(Q.split(/[\\\/]+/),!q).join("\\"))||q||(Q="."),Q&&ne&&(Q+="\\"),G&&(b=L(b)),b+(q?"\\":"")+Q},S.isAbsolute=function(y){return T(y).isAbsolute},S.join=function(){for(var y=[],_=0;_<arguments.length;_++){var b=arguments[_];if(!d.isString(b))throw new TypeError("Arguments to path.join must be strings");b&&y.push(b)}var G=y.join("\\");return/^[\\\/]{2}[^\\\/]/.test(y[0])||(G=G.replace(/^[\\\/]{2,}/,"\\")),S.normalize(G)},S.relative=function(y,_){y=S.resolve(y),_=S.resolve(_);for(var b=y.toLowerCase(),G=_.toLowerCase(),q=f(_.split("\\")),Q=f(b.split("\\")),ne=f(G.split("\\")),N=Math.min(Q.length,ne.length),pe=N,Ce=0;Ce<N;Ce++)if(Q[Ce]!==ne[Ce]){pe=Ce;break}if(pe==0)return _;var ie=[];for(Ce=pe;Ce<Q.length;Ce++)ie.push("..");return(ie=ie.concat(q.slice(pe))).join("\\")},S._makeLong=function(y){if(!d.isString(y))return y;if(!y)return"";var _=S.resolve(y);return/^[a-zA-Z]\:\\/.test(_)?"\\\\?\\"+_:/^\\\\[^?.]/.test(_)?"\\\\?\\UNC\\"+_.substring(2):y},S.dirname=function(y){var _=A(y),b=_[0],G=_[1];return b||G?(G&&(G=G.substr(0,G.length-1)),b+G):"."},S.basename=function(y,_){var b=A(y)[2];return _&&b.substr(-1*_.length)===_&&(b=b.substr(0,b.length-_.length)),b},S.extname=function(y){return A(y)[3]},S.format=function(y){if(!d.isObject(y))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof y);var _=y.root||"";if(!d.isString(_))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof y.root);var b=y.dir,G=y.base||"";return b?b[b.length-1]===S.sep?b+G:b+S.sep+G:G},S.parse=function(y){if(!d.isString(y))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof y);var _=A(y);if(!_||_.length!==4)throw new TypeError("Invalid path '"+y+"'");return{root:_[0],dir:_[0]+_[1].slice(0,-1),base:_[2],ext:_[3],name:_[2].slice(0,_[2].length-_[3].length)}},S.sep="\\",S.delimiter=";";var C=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,E={};function F(y){return C.exec(y).slice(1)}E.resolve=function(){for(var y="",_=!1,b=arguments.length-1;b>=-1&&!_;b--){var G=b>=0?arguments[b]:u.cwd();if(!d.isString(G))throw new TypeError("Arguments to path.resolve must be strings");G&&(y=G+"/"+y,_=G[0]==="/")}return(_?"/":"")+(y=c(y.split("/"),!_).join("/"))||"."},E.normalize=function(y){var _=E.isAbsolute(y),b=y&&y[y.length-1]==="/";return(y=c(y.split("/"),!_).join("/"))||_||(y="."),y&&b&&(y+="/"),(_?"/":"")+y},E.isAbsolute=function(y){return y.charAt(0)==="/"},E.join=function(){for(var y="",_=0;_<arguments.length;_++){var b=arguments[_];if(!d.isString(b))throw new TypeError("Arguments to path.join must be strings");b&&(y+=y?"/"+b:b)}return E.normalize(y)},E.relative=function(y,_){y=E.resolve(y).substr(1),_=E.resolve(_).substr(1);for(var b=f(y.split("/")),G=f(_.split("/")),q=Math.min(b.length,G.length),Q=q,ne=0;ne<q;ne++)if(b[ne]!==G[ne]){Q=ne;break}var N=[];for(ne=Q;ne<b.length;ne++)N.push("..");return(N=N.concat(G.slice(Q))).join("/")},E._makeLong=function(y){return y},E.dirname=function(y){var _=F(y),b=_[0],G=_[1];return b||G?(G&&(G=G.substr(0,G.length-1)),b+G):"."},E.basename=function(y,_){var b=F(y)[2];return _&&b.substr(-1*_.length)===_&&(b=b.substr(0,b.length-_.length)),b},E.extname=function(y){return F(y)[3]},E.format=function(y){if(!d.isObject(y))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof y);var _=y.root||"";if(!d.isString(_))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof y.root);return(y.dir?y.dir+E.sep:"")+(y.base||"")},E.parse=function(y){if(!d.isString(y))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof y);var _=F(y);if(!_||_.length!==4)throw new TypeError("Invalid path '"+y+"'");return _[1]=_[1]||"",_[2]=_[2]||"",_[3]=_[3]||"",{root:_[0],dir:_[0]+_[1].slice(0,-1),base:_[2],ext:_[3],name:_[2].slice(0,_[2].length-_[3].length)}},E.sep="/",E.delimiter=":",a.exports=h?S:E,a.exports.posix=E,a.exports.win32=S},155:a=>{var s,l,u=a.exports={};function h(){throw new Error("setTimeout has not been defined")}function d(){throw new Error("clearTimeout has not been defined")}function c(E){if(s===setTimeout)return setTimeout(E,0);if((s===h||!s)&&setTimeout)return s=setTimeout,setTimeout(E,0);try{return s(E,0)}catch{try{return s.call(null,E,0)}catch{return s.call(this,E,0)}}}(function(){try{s=typeof setTimeout=="function"?setTimeout:h}catch{s=h}try{l=typeof clearTimeout=="function"?clearTimeout:d}catch{l=d}})();var f,p=[],w=!1,S=-1;function A(){w&&f&&(w=!1,f.length?p=f.concat(p):S=-1,p.length&&T())}function T(){if(!w){var E=c(A);w=!0;for(var F=p.length;F;){for(f=p,p=[];++S<F;)f&&f[S].run();S=-1,F=p.length}f=null,w=!1,function(y){if(l===clearTimeout)return clearTimeout(y);if((l===d||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(y);try{l(y)}catch{try{return l.call(null,y)}catch{return l.call(this,y)}}}(E)}}function L(E,F){this.fun=E,this.array=F}function C(){}u.nextTick=function(E){var F=new Array(arguments.length-1);if(arguments.length>1)for(var y=1;y<arguments.length;y++)F[y-1]=arguments[y];p.push(new L(E,F)),p.length!==1||w||c(T)},L.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=C,u.addListener=C,u.once=C,u.off=C,u.removeListener=C,u.removeAllListeners=C,u.emit=C,u.prependListener=C,u.prependOnceListener=C,u.listeners=function(E){return[]},u.binding=function(E){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(E){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},384:a=>{a.exports=function(s){return s&&typeof s=="object"&&typeof s.copy=="function"&&typeof s.fill=="function"&&typeof s.readUInt8=="function"}},539:(a,s,l)=>{var u=l(155),h=/%[sdj%]/g;s.format=function(j){if(!y(j)){for(var B=[],R=0;R<arguments.length;R++)B.push(f(arguments[R]));return B.join(" ")}R=1;for(var k=arguments,oe=k.length,de=String(j).replace(h,function(Le){if(Le==="%%")return"%";if(R>=oe)return Le;switch(Le){case"%s":return String(k[R++]);case"%d":return Number(k[R++]);case"%j":try{return JSON.stringify(k[R++])}catch{return"[Circular]"}default:return Le}}),ye=k[R];R<oe;ye=k[++R])E(ye)||!G(ye)?de+=" "+ye:de+=" "+f(ye);return de},s.deprecate=function(j,B){if(_(l.g.process))return function(){return s.deprecate(j,B).apply(this,arguments)};if(u.noDeprecation===!0)return j;var R=!1;return function(){if(!R){if(u.throwDeprecation)throw new Error(B);u.traceDeprecation?console.trace(B):console.error(B),R=!0}return j.apply(this,arguments)}};var d,c={};function f(j,B){var R={seen:[],stylize:w};return arguments.length>=3&&(R.depth=arguments[2]),arguments.length>=4&&(R.colors=arguments[3]),C(B)?R.showHidden=B:B&&s._extend(R,B),_(R.showHidden)&&(R.showHidden=!1),_(R.depth)&&(R.depth=2),_(R.colors)&&(R.colors=!1),_(R.customInspect)&&(R.customInspect=!0),R.colors&&(R.stylize=p),S(R,j,R.depth)}function p(j,B){var R=f.styles[B];return R?"\x1B["+f.colors[R][0]+"m"+j+"\x1B["+f.colors[R][1]+"m":j}function w(j,B){return j}function S(j,B,R){if(j.customInspect&&B&&ne(B.inspect)&&B.inspect!==s.inspect&&(!B.constructor||B.constructor.prototype!==B)){var k=B.inspect(R,j);return y(k)||(k=S(j,k,R)),k}var oe=function(ze,we){if(_(we))return ze.stylize("undefined","undefined");if(y(we)){var Ae="'"+JSON.stringify(we).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ze.stylize(Ae,"string")}return F(we)?ze.stylize(""+we,"number"):C(we)?ze.stylize(""+we,"boolean"):E(we)?ze.stylize("null","null"):void 0}(j,B);if(oe)return oe;var de=Object.keys(B),ye=function(ze){var we={};return ze.forEach(function(Ae,xe){we[Ae]=!0}),we}(de);if(j.showHidden&&(de=Object.getOwnPropertyNames(B)),Q(B)&&(de.indexOf("message")>=0||de.indexOf("description")>=0))return A(B);if(de.length===0){if(ne(B)){var Le=B.name?": "+B.name:"";return j.stylize("[Function"+Le+"]","special")}if(b(B))return j.stylize(RegExp.prototype.toString.call(B),"regexp");if(q(B))return j.stylize(Date.prototype.toString.call(B),"date");if(Q(B))return A(B)}var ve,V="",gt=!1,$e=["{","}"];return L(B)&&(gt=!0,$e=["[","]"]),ne(B)&&(V=" [Function"+(B.name?": "+B.name:"")+"]"),b(B)&&(V=" "+RegExp.prototype.toString.call(B)),q(B)&&(V=" "+Date.prototype.toUTCString.call(B)),Q(B)&&(V=" "+A(B)),de.length!==0||gt&&B.length!=0?R<0?b(B)?j.stylize(RegExp.prototype.toString.call(B),"regexp"):j.stylize("[Object]","special"):(j.seen.push(B),ve=gt?function(ze,we,Ae,xe,me){for(var re=[],se=0,Oe=we.length;se<Oe;++se)P(we,String(se))?re.push(T(ze,we,Ae,xe,String(se),!0)):re.push("");return me.forEach(function($){$.match(/^\d+$/)||re.push(T(ze,we,Ae,xe,$,!0))}),re}(j,B,R,ye,de):de.map(function(ze){return T(j,B,R,ye,ze,gt)}),j.seen.pop(),function(ze,we,Ae){return ze.reduce(function(xe,me){return me.indexOf(`
`),xe+me.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?Ae[0]+(we===""?"":we+`
 `)+" "+ze.join(`,
  `)+" "+Ae[1]:Ae[0]+we+" "+ze.join(", ")+" "+Ae[1]}(ve,V,$e)):$e[0]+V+$e[1]}function A(j){return"["+Error.prototype.toString.call(j)+"]"}function T(j,B,R,k,oe,de){var ye,Le,ve;if((ve=Object.getOwnPropertyDescriptor(B,oe)||{value:B[oe]}).get?Le=ve.set?j.stylize("[Getter/Setter]","special"):j.stylize("[Getter]","special"):ve.set&&(Le=j.stylize("[Setter]","special")),P(k,oe)||(ye="["+oe+"]"),Le||(j.seen.indexOf(ve.value)<0?(Le=E(R)?S(j,ve.value,null):S(j,ve.value,R-1)).indexOf(`
`)>-1&&(Le=de?Le.split(`
`).map(function(V){return"  "+V}).join(`
`).substr(2):`
`+Le.split(`
`).map(function(V){return"   "+V}).join(`
`)):Le=j.stylize("[Circular]","special")),_(ye)){if(de&&oe.match(/^\d+$/))return Le;(ye=JSON.stringify(""+oe)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(ye=ye.substr(1,ye.length-2),ye=j.stylize(ye,"name")):(ye=ye.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),ye=j.stylize(ye,"string"))}return ye+": "+Le}function L(j){return Array.isArray(j)}function C(j){return typeof j=="boolean"}function E(j){return j===null}function F(j){return typeof j=="number"}function y(j){return typeof j=="string"}function _(j){return j===void 0}function b(j){return G(j)&&N(j)==="[object RegExp]"}function G(j){return typeof j=="object"&&j!==null}function q(j){return G(j)&&N(j)==="[object Date]"}function Q(j){return G(j)&&(N(j)==="[object Error]"||j instanceof Error)}function ne(j){return typeof j=="function"}function N(j){return Object.prototype.toString.call(j)}function pe(j){return j<10?"0"+j.toString(10):j.toString(10)}s.debuglog=function(j){if(_(d)&&(d=u.env.NODE_DEBUG||""),j=j.toUpperCase(),!c[j])if(new RegExp("\\b"+j+"\\b","i").test(d)){var B=u.pid;c[j]=function(){var R=s.format.apply(s,arguments);console.error("%s %d: %s",j,B,R)}}else c[j]=function(){};return c[j]},s.inspect=f,f.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},f.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},s.isArray=L,s.isBoolean=C,s.isNull=E,s.isNullOrUndefined=function(j){return j==null},s.isNumber=F,s.isString=y,s.isSymbol=function(j){return typeof j=="symbol"},s.isUndefined=_,s.isRegExp=b,s.isObject=G,s.isDate=q,s.isError=Q,s.isFunction=ne,s.isPrimitive=function(j){return j===null||typeof j=="boolean"||typeof j=="number"||typeof j=="string"||typeof j=="symbol"||j===void 0},s.isBuffer=l(384);var Ce=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function ie(){var j=new Date,B=[pe(j.getHours()),pe(j.getMinutes()),pe(j.getSeconds())].join(":");return[j.getDate(),Ce[j.getMonth()],B].join(" ")}function P(j,B){return Object.prototype.hasOwnProperty.call(j,B)}s.log=function(){console.log("%s - %s",ie(),s.format.apply(s,arguments))},s.inherits=l(717),s._extend=function(j,B){if(!B||!G(B))return j;for(var R=Object.keys(B),k=R.length;k--;)j[R[k]]=B[R[k]];return j}}},r={};function i(a){var s=r[a];if(s!==void 0)return s.exports;var l=r[a]={exports:{}};return e[a].call(l.exports,l,l.exports,i),l.exports}i.n=a=>{var s=a&&a.__esModule?()=>a.default:()=>a;return i.d(s,{a:s}),s},i.d=(a,s)=>{for(var l in s)i.o(s,l)&&!i.o(a,l)&&Object.defineProperty(a,l,{enumerable:!0,get:s[l]})},i.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),i.o=(a,s)=>Object.prototype.hasOwnProperty.call(a,s),i.r=a=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var o={};return(()=>{i.r(o),i.d(o,{LSPluginUser:()=>un,setupPluginUserInstance:()=>Ci});var a=i(520);i(856);const s=function(m,v){return m===v||m!=m&&v!=v},l=function(m,v){for(var g=m.length;g--;)if(s(m[g][0],v))return g;return-1};var u=Array.prototype.splice;function h(m){var v=-1,g=m==null?0:m.length;for(this.clear();++v<g;){var x=m[v];this.set(x[0],x[1])}}h.prototype.clear=function(){this.__data__=[],this.size=0},h.prototype.delete=function(m){var v=this.__data__,g=l(v,m);return!(g<0||(g==v.length-1?v.pop():u.call(v,g,1),--this.size,0))},h.prototype.get=function(m){var v=this.__data__,g=l(v,m);return g<0?void 0:v[g][1]},h.prototype.has=function(m){return l(this.__data__,m)>-1},h.prototype.set=function(m,v){var g=this.__data__,x=l(g,m);return x<0?(++this.size,g.push([m,v])):g[x][1]=v,this};const d=h,c=typeof W=="object"&&W&&W.Object===Object&&W;var f=typeof self=="object"&&self&&self.Object===Object&&self;const p=c||f||Function("return this")(),w=p.Symbol;var S=Object.prototype,A=S.hasOwnProperty,T=S.toString,L=w?w.toStringTag:void 0,C=Object.prototype.toString,E=w?w.toStringTag:void 0;const F=function(m){return m==null?m===void 0?"[object Undefined]":"[object Null]":E&&E in Object(m)?function(v){var g=A.call(v,L),x=v[L];try{v[L]=void 0;var I=!0}catch{}var z=T.call(v);return I&&(g?v[L]=x:delete v[L]),z}(m):function(v){return C.call(v)}(m)},y=function(m){var v=typeof m;return m!=null&&(v=="object"||v=="function")},_=function(m){if(!y(m))return!1;var v=F(m);return v=="[object Function]"||v=="[object GeneratorFunction]"||v=="[object AsyncFunction]"||v=="[object Proxy]"},b=p["__core-js_shared__"];var G,q=(G=/[^.]+$/.exec(b&&b.keys&&b.keys.IE_PROTO||""))?"Symbol(src)_1."+G:"",Q=Function.prototype.toString,ne=/^\[object .+?Constructor\]$/,N=Function.prototype,pe=Object.prototype,Ce=N.toString,ie=pe.hasOwnProperty,P=RegExp("^"+Ce.call(ie).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const j=function(m){return!(!y(m)||(v=m,q&&q in v))&&(_(m)?P:ne).test(function(g){if(g!=null){try{return Q.call(g)}catch{}try{return g+""}catch{}}return""}(m));var v},B=function(m,v){var g=function(x,I){return x==null?void 0:x[I]}(m,v);return j(g)?g:void 0},R=B(p,"Map"),k=B(Object,"create");var oe=Object.prototype.hasOwnProperty,de=Object.prototype.hasOwnProperty;function ye(m){var v=-1,g=m==null?0:m.length;for(this.clear();++v<g;){var x=m[v];this.set(x[0],x[1])}}ye.prototype.clear=function(){this.__data__=k?k(null):{},this.size=0},ye.prototype.delete=function(m){var v=this.has(m)&&delete this.__data__[m];return this.size-=v?1:0,v},ye.prototype.get=function(m){var v=this.__data__;if(k){var g=v[m];return g==="__lodash_hash_undefined__"?void 0:g}return oe.call(v,m)?v[m]:void 0},ye.prototype.has=function(m){var v=this.__data__;return k?v[m]!==void 0:de.call(v,m)},ye.prototype.set=function(m,v){var g=this.__data__;return this.size+=this.has(m)?0:1,g[m]=k&&v===void 0?"__lodash_hash_undefined__":v,this};const Le=ye,ve=function(m,v){var g,x,I=m.__data__;return((x=typeof(g=v))=="string"||x=="number"||x=="symbol"||x=="boolean"?g!=="__proto__":g===null)?I[typeof v=="string"?"string":"hash"]:I.map};function V(m){var v=-1,g=m==null?0:m.length;for(this.clear();++v<g;){var x=m[v];this.set(x[0],x[1])}}V.prototype.clear=function(){this.size=0,this.__data__={hash:new Le,map:new(R||d),string:new Le}},V.prototype.delete=function(m){var v=ve(this,m).delete(m);return this.size-=v?1:0,v},V.prototype.get=function(m){return ve(this,m).get(m)},V.prototype.has=function(m){return ve(this,m).has(m)},V.prototype.set=function(m,v){var g=ve(this,m),x=g.size;return g.set(m,v),this.size+=g.size==x?0:1,this};const gt=V;function $e(m){var v=this.__data__=new d(m);this.size=v.size}$e.prototype.clear=function(){this.__data__=new d,this.size=0},$e.prototype.delete=function(m){var v=this.__data__,g=v.delete(m);return this.size=v.size,g},$e.prototype.get=function(m){return this.__data__.get(m)},$e.prototype.has=function(m){return this.__data__.has(m)},$e.prototype.set=function(m,v){var g=this.__data__;if(g instanceof d){var x=g.__data__;if(!R||x.length<199)return x.push([m,v]),this.size=++g.size,this;g=this.__data__=new gt(x)}return g.set(m,v),this.size=g.size,this};const ze=$e,we=function(){try{var m=B(Object,"defineProperty");return m({},"",{}),m}catch{}}(),Ae=function(m,v,g){v=="__proto__"&&we?we(m,v,{configurable:!0,enumerable:!0,value:g,writable:!0}):m[v]=g},xe=function(m,v,g){(g!==void 0&&!s(m[v],g)||g===void 0&&!(v in m))&&Ae(m,v,g)},me=function(m,v,g){for(var x=-1,I=Object(m),z=g(m),M=z.length;M--;){var Y=z[++x];if(v(I[Y],Y,I)===!1)break}return m};var re=t&&!t.nodeType&&t,se=re&&!0&&n&&!n.nodeType&&n,Oe=se&&se.exports===re?p.Buffer:void 0,$=Oe?Oe.allocUnsafe:void 0;const U=p.Uint8Array,O=function(m,v){var g,x,I=v?(g=m.buffer,x=new g.constructor(g.byteLength),new U(x).set(new U(g)),x):m.buffer;return new m.constructor(I,m.byteOffset,m.length)};var Ee=Object.create;const Te=function(){function m(){}return function(v){if(!y(v))return{};if(Ee)return Ee(v);m.prototype=v;var g=new m;return m.prototype=void 0,g}}(),ht=($t=Object.getPrototypeOf,tt=Object,function(m){return $t(tt(m))});var $t,tt,jt=Object.prototype;const Yt=function(m){var v=m&&m.constructor;return m===(typeof v=="function"&&v.prototype||jt)},Ot=function(m){return m!=null&&typeof m=="object"},rr=function(m){return Ot(m)&&F(m)=="[object Arguments]"};var nr=Object.prototype,ir=nr.hasOwnProperty,vr=nr.propertyIsEnumerable;const Dt=rr(function(){return arguments}())?rr:function(m){return Ot(m)&&ir.call(m,"callee")&&!vr.call(m,"callee")},Pt=Array.isArray,or=function(m){return typeof m=="number"&&m>-1&&m%1==0&&m<=9007199254740991},xn=function(m){return m!=null&&or(m.length)&&!_(m)};var ai=t&&!t.nodeType&&t,Vr=ai&&!0&&n&&!n.nodeType&&n,Yr=Vr&&Vr.exports===ai?p.Buffer:void 0;const Ut=(Yr?Yr.isBuffer:void 0)||function(){return!1};var si=Function.prototype,Kr=Object.prototype,Zr=si.toString,io=Kr.hasOwnProperty,oo=Zr.call(Object),Ue={};Ue["[object Float32Array]"]=Ue["[object Float64Array]"]=Ue["[object Int8Array]"]=Ue["[object Int16Array]"]=Ue["[object Int32Array]"]=Ue["[object Uint8Array]"]=Ue["[object Uint8ClampedArray]"]=Ue["[object Uint16Array]"]=Ue["[object Uint32Array]"]=!0,Ue["[object Arguments]"]=Ue["[object Array]"]=Ue["[object ArrayBuffer]"]=Ue["[object Boolean]"]=Ue["[object DataView]"]=Ue["[object Date]"]=Ue["[object Error]"]=Ue["[object Function]"]=Ue["[object Map]"]=Ue["[object Number]"]=Ue["[object Object]"]=Ue["[object RegExp]"]=Ue["[object Set]"]=Ue["[object String]"]=Ue["[object WeakMap]"]=!1;var ui=t&&!t.nodeType&&t,br=ui&&!0&&n&&!n.nodeType&&n,At=br&&br.exports===ui&&c.process,Xr=function(){try{return br&&br.require&&br.require("util").types||At&&At.binding&&At.binding("util")}catch{}}(),Jr=Xr&&Xr.isTypedArray;const li=Jr?function(m){return function(v){return m(v)}}(Jr):function(m){return Ot(m)&&or(m.length)&&!!Ue[F(m)]},On=function(m,v){if((v!=="constructor"||typeof m[v]!="function")&&v!="__proto__")return m[v]};var ao=Object.prototype.hasOwnProperty;const ci=function(m,v,g){var x=m[v];ao.call(m,v)&&s(x,g)&&(g!==void 0||v in m)||Ae(m,v,g)};var Dn=/^(?:0|[1-9]\d*)$/;const it=function(m,v){var g=typeof m;return!!(v=v==null?9007199254740991:v)&&(g=="number"||g!="symbol"&&Dn.test(m))&&m>-1&&m%1==0&&m<v};var hi=Object.prototype.hasOwnProperty;const st=function(m,v){var g=Pt(m),x=!g&&Dt(m),I=!g&&!x&&Ut(m),z=!g&&!x&&!I&&li(m),M=g||x||I||z,Y=M?function(Xe,le){for(var fe=-1,be=Array(Xe);++fe<Xe;)be[fe]=le(fe);return be}(m.length,String):[],J=Y.length;for(var te in m)!v&&!hi.call(m,te)||M&&(te=="length"||I&&(te=="offset"||te=="parent")||z&&(te=="buffer"||te=="byteLength"||te=="byteOffset")||it(te,J))||Y.push(te);return Y};var di=Object.prototype.hasOwnProperty;const Pn=function(m){if(!y(m))return function(I){var z=[];if(I!=null)for(var M in Object(I))z.push(M);return z}(m);var v=Yt(m),g=[];for(var x in m)(x!="constructor"||!v&&di.call(m,x))&&g.push(x);return g},Qr=function(m){return xn(m)?st(m,!0):Pn(m)},fi=function(m){return function(v,g,x,I){var z=!x;x||(x={});for(var M=-1,Y=g.length;++M<Y;){var J=g[M],te=I?I(x[J],v[J],J,x,v):void 0;te===void 0&&(te=v[J]),z?Ae(x,J,te):ci(x,J,te)}return x}(m,Qr(m))},kn=function(m,v,g,x,I,z,M){var Y,J=On(m,g),te=On(v,g),Xe=M.get(te);if(Xe)xe(m,g,Xe);else{var le=z?z(J,te,g+"",m,v,M):void 0,fe=le===void 0;if(fe){var be=Pt(te),Re=!be&&Ut(te),rt=!be&&!Re&&li(te);le=te,be||Re||rt?Pt(J)?le=J:Ot(Y=J)&&xn(Y)?le=function(He,dt){var Ct=-1,Lr=He.length;for(dt||(dt=Array(Lr));++Ct<Lr;)dt[Ct]=He[Ct];return dt}(J):Re?(fe=!1,le=function(He,dt){if(dt)return He.slice();var Ct=He.length,Lr=$?$(Ct):new He.constructor(Ct);return He.copy(Lr),Lr}(te,!0)):rt?(fe=!1,le=O(te,!0)):le=[]:function(He){if(!Ot(He)||F(He)!="[object Object]")return!1;var dt=ht(He);if(dt===null)return!0;var Ct=io.call(dt,"constructor")&&dt.constructor;return typeof Ct=="function"&&Ct instanceof Ct&&Zr.call(Ct)==oo}(te)||Dt(te)?(le=J,Dt(J)?le=fi(J):y(J)&&!_(J)||(le=function(He){return typeof He.constructor!="function"||Yt(He)?{}:Te(ht(He))}(te))):fe=!1}fe&&(M.set(te,le),I(le,te,x,z,M),M.delete(te)),xe(m,g,le)}},pi=function m(v,g,x,I,z){v!==g&&me(g,function(M,Y){if(z||(z=new ze),y(M))kn(v,g,Y,x,m,I,z);else{var J=I?I(On(v,Y),M,Y+"",v,g,z):void 0;J===void 0&&(J=M),xe(v,Y,J)}},Qr)},ar=function(m){return m},_r=function(m,v,g){switch(g.length){case 0:return m.call(v);case 1:return m.call(v,g[0]);case 2:return m.call(v,g[0],g[1]);case 3:return m.call(v,g[0],g[1],g[2])}return m.apply(v,g)};var en=Math.max;const Fn=we?function(m,v){return we(m,"toString",{configurable:!0,enumerable:!1,value:(g=v,function(){return g}),writable:!0});var g}:ar;var wr=Date.now;const tn=function(m){var v=0,g=0;return function(){var x=wr(),I=16-(x-g);if(g=x,I>0){if(++v>=800)return arguments[0]}else v=0;return m.apply(void 0,arguments)}}(Fn),gi=(Er=function(m,v,g){pi(m,v,g)},function(m,v){return tn(function(g,x,I){return x=en(x===void 0?g.length-1:x,0),function(){for(var z=arguments,M=-1,Y=en(z.length-x,0),J=Array(Y);++M<Y;)J[M]=z[x+M];M=-1;for(var te=Array(x+1);++M<x;)te[M]=z[M];return te[x]=I(J),_r(g,this,te)}}(m,v,ar),m+"")}(function(m,v){var g=-1,x=v.length,I=x>1?v[x-1]:void 0,z=x>2?v[2]:void 0;for(I=Er.length>3&&typeof I=="function"?(x--,I):void 0,z&&function(Y,J,te){if(!y(te))return!1;var Xe=typeof J;return!!(Xe=="number"?xn(te)&&it(J,te.length):Xe=="string"&&J in te)&&s(te[J],Y)}(v[0],v[1],z)&&(I=x<3?void 0:I,x=1),m=Object(m);++g<x;){var M=v[g];M&&Er(m,M,g)}return m}));var Er,rn=function(){return(rn=Object.assign||function(m){for(var v,g=1,x=arguments.length;g<x;g++)for(var I in v=arguments[g])Object.prototype.hasOwnProperty.call(v,I)&&(m[I]=v[I]);return m}).apply(this,arguments)};function Rn(m){return m.toLowerCase()}var Fr=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],Ar=/[^A-Z0-9]+/gi;function sr(m,v,g){return v instanceof RegExp?m.replace(v,g):v.reduce(function(x,I){return x.replace(I,g)},m)}const Gn=navigator.platform.toLowerCase()==="win32"?a.win32:a.posix,Rr=function(m,v){return v===void 0&&(v={}),function(g,x){return x===void 0&&(x={}),function(I,z){z===void 0&&(z={});for(var M=z.splitRegexp,Y=M===void 0?Fr:M,J=z.stripRegexp,te=J===void 0?Ar:J,Xe=z.transform,le=Xe===void 0?Rn:Xe,fe=z.delimiter,be=fe===void 0?" ":fe,Re=sr(sr(I,Y,"$1\0$2"),te,"\0"),rt=0,He=Re.length;Re.charAt(rt)==="\0";)rt++;for(;Re.charAt(He-1)==="\0";)He--;return Re.slice(rt,He).split("\0").map(le).join(be)}(g,rn({delimiter:"."},x))}(m,rn({delimiter:"_"},v))},yi=gi;function Gr(m,v){let g,x,I=!1;const z=Y=>J=>{m&&clearTimeout(m),Y(J),I=!0},M=new Promise((Y,J)=>{g=z(Y),x=z(J),m&&(m=setTimeout(()=>x(new Error(`[deferred timeout] ${v}`)),m))});return{created:Date.now(),setTag:Y=>v=Y,resolve:g,reject:x,promise:M,get settled(){return I}}}var mi=i(227),nn=i.n(mi);const zt="application/x-postmate-v1+json";let Kt=0;const on={handshake:1,"handshake-reply":1,call:1,emit:1,reply:1,request:1},an=(m,v)=>!(typeof v=="string"&&m.origin!==v||!m.data||typeof m.data=="object"&&!("postmate"in m.data)||m.data.type!==zt||!on[m.data.postmate]);class Sr{constructor(v){ce(this,"parent");ce(this,"frame");ce(this,"child");ce(this,"events",{});ce(this,"childOrigin");ce(this,"listener");this.parent=v.parent,this.frame=v.frame,this.child=v.child,this.childOrigin=v.childOrigin,this.listener=g=>{if(!an(g,this.childOrigin))return!1;const{data:x,name:I}=((g||{}).data||{}).value||{};g.data.postmate==="emit"&&I in this.events&&this.events[I].forEach(z=>{z.call(this,x)})},this.parent.addEventListener("message",this.listener,!1)}get(v){return new Promise(g=>{const x=++Kt,I=z=>{z.data.uid===x&&z.data.postmate==="reply"&&(this.parent.removeEventListener("message",I,!1),g(z.data.value))};this.parent.addEventListener("message",I,!1),this.child.postMessage({postmate:"request",type:zt,property:v,uid:x},this.childOrigin)})}call(v,g){this.child.postMessage({postmate:"call",type:zt,property:v,data:g},this.childOrigin)}on(v,g){this.events[v]||(this.events[v]=[]),this.events[v].push(g)}destroy(){window.removeEventListener("message",this.listener,!1),this.frame.parentNode.removeChild(this.frame)}}class so{constructor(v){ce(this,"model");ce(this,"parent");ce(this,"parentOrigin");ce(this,"child");this.model=v.model,this.parent=v.parent,this.parentOrigin=v.parentOrigin,this.child=v.child,this.child.addEventListener("message",g=>{if(!an(g,this.parentOrigin))return;const{property:x,uid:I,data:z}=g.data;g.data.postmate!=="call"?((M,Y)=>{const J=typeof M[Y]=="function"?M[Y]():M[Y];return Promise.resolve(J)})(this.model,x).then(M=>{g.source.postMessage({property:x,postmate:"reply",type:zt,uid:I,value:M},g.origin)}):x in this.model&&typeof this.model[x]=="function"&&this.model[x](z)})}emit(v,g){this.parent.postMessage({postmate:"emit",type:zt,value:{name:v,data:g}},this.parentOrigin)}}class Ir{constructor(v){ce(this,"container");ce(this,"parent");ce(this,"frame");ce(this,"child");ce(this,"childOrigin");ce(this,"url");ce(this,"model");this.container=v.container,this.url=v.url,this.parent=window,this.frame=document.createElement("iframe"),v.id&&(this.frame.id=v.id),v.name&&(this.frame.name=v.name),this.frame.classList.add.apply(this.frame.classList,v.classListArray||[]),this.container.appendChild(this.frame),this.child=this.frame.contentWindow,this.model=v.model||{}}sendHandshake(v){const g=(z=>{const M=document.createElement("a");M.href=z;const Y=M.protocol.length>4?M.protocol:window.location.protocol,J=M.host.length?M.port==="80"||M.port==="443"?M.hostname:M.host:window.location.host;return M.origin||`${Y}//${J}`})(v=v||this.url);let x,I=0;return new Promise((z,M)=>{const Y=te=>!!an(te,g)&&(te.data.postmate==="handshake-reply"?(clearInterval(x),this.parent.removeEventListener("message",Y,!1),this.childOrigin=te.origin,z(new Sr(this))):M("Failed handshake"));this.parent.addEventListener("message",Y,!1);const J=()=>{I++,this.child.postMessage({postmate:"handshake",type:zt,model:this.model},g),I===5&&clearInterval(x)};this.frame.addEventListener("load",()=>{J(),x=setInterval(J,500)}),this.frame.src=v})}}ce(Ir,"debug",!1),ce(Ir,"Model");class vi{constructor(v){ce(this,"child");ce(this,"model");ce(this,"parent");ce(this,"parentOrigin");this.child=window,this.model=v,this.parent=this.child.parent}sendHandshakeReply(){return new Promise((v,g)=>{const x=I=>{if(I.data.postmate){if(I.data.postmate==="handshake"){this.child.removeEventListener("message",x,!1),I.source.postMessage({postmate:"handshake-reply",type:zt},I.origin),this.parentOrigin=I.origin;const z=I.data.model;return z&&Object.keys(z).forEach(M=>{this.model[M]=z[M]}),v(new so(this))}return g("Handshake Reply Failed")}};this.child.addEventListener("message",x,!1)})}}var bi=i(729),Cr=i.n(bi);const{importHTML:In,createSandboxContainer:uo}=window.QSandbox||{};function Mt(m,v){return m.startsWith("http")?fetch(m,v):(m=m.replace("file://",""),new Promise(async(g,x)=>{try{const I=await window.apis.doAction(["readFile",m]);g({text:()=>I})}catch(I){console.error(I),x(I)}}))}class _i extends Cr(){constructor(g){super();ce(this,"_pluginLocal");ce(this,"_frame");ce(this,"_root");ce(this,"_loaded",!1);ce(this,"_unmountFns",[]);this._pluginLocal=g,g._dispose(()=>{this._unmount()})}async load(){const{name:g,entry:x}=this._pluginLocal.options;if(this.loaded||!x)return;const{template:I,execScripts:z}=await In(x,{fetch:Mt});this._mount(I,document.body);const M=uo(g,{elementGetter:()=>{var J;return(J=this._root)==null?void 0:J.firstChild}}).instance.proxy;M.__shadow_mode__=!0,M.LSPluginLocal=this._pluginLocal,M.LSPluginShadow=this,M.LSPluginUser=M.logseq=new un(this._pluginLocal.toJSON(),this._pluginLocal.caller);const Y=await z(M,!0);this._unmountFns.push(Y.unmount),this._loaded=!0}_mount(g,x){const I=this._frame=document.createElement("div");I.classList.add("lsp-shadow-sandbox"),I.id=this._pluginLocal.id,this._root=I.attachShadow({mode:"open"}),this._root.innerHTML=`<div>${g}</div>`,x.appendChild(I),this.emit("mounted")}_unmount(){for(const g of this._unmountFns)g&&g.call(null)}destroy(){var g,x;(x=(g=this.frame)==null?void 0:g.parentNode)==null||x.removeChild(this.frame)}get loaded(){return this._loaded}get document(){var g;return(g=this._root)==null?void 0:g.firstChild}get frame(){return this._frame}}const Nt=nn()("LSPlugin:caller"),$r="#await#response#",wi="#lspmsg#error#",Zt=m=>`#lspmsg#${m}`;class Bt extends Cr(){constructor(g){super();ce(this,"_pluginLocal");ce(this,"_connected",!1);ce(this,"_parent");ce(this,"_child");ce(this,"_shadow");ce(this,"_status");ce(this,"_userModel",{});ce(this,"_call");ce(this,"_callUserModel");ce(this,"_debugTag","");this._pluginLocal=g,g&&(this._debugTag=g.debugTag)}async connectToChild(){if(this._connected)return;const{shadow:g}=this._pluginLocal;g?await this._setupShadowSandbox():await this._setupIframeSandbox()}async connectToParent(g={}){var Xe;if(this._connected)return;const x=this,I=this._pluginLocal!=null;let z=0;const M=new Map,Y=Gr(5e3),J=this._extendUserModel(ur({"#lspmsg#ready#":async le=>{J[Zt(le==null?void 0:le.pid)]=({type:fe,payload:be})=>{Nt(`[host (_call) -> *user] ${this._debugTag}`,fe,be),x.emit(fe,be)},await Y.resolve()},"#lspmsg#beforeunload#":async le=>{const fe=Gr(1e4);x.emit("beforeunload",Object.assign({actor:fe},le)),await fe.promise},"#lspmsg#settings#":async({type:le,payload:fe})=>{x.emit("settings:changed",fe)},"#lspmsg#":async({ns:le,type:fe,payload:be})=>{Nt(`[host (async) -> *user] ${this._debugTag} ns=${le} type=${fe}`,be),le&&le.startsWith("hook")?x.emit(`${le}:${fe}`,be):x.emit(fe,be)},"#lspmsg#reply#":({_sync:le,result:fe})=>{if(Nt(`[sync host -> *user] #${le}`,fe),M.has(le)){const be=M.get(le);be&&(fe!=null&&fe.hasOwnProperty(wi)?be.reject(fe[wi]):be.resolve(fe),M.delete(le))}}},g));if(I)return await Y.promise,JSON.parse(JSON.stringify((Xe=this._pluginLocal)==null?void 0:Xe.toJSON()));const te=new vi(J).sendHandshakeReply();return this._status="pending",await te.then(le=>{this._child=le,this._connected=!0,this._call=async(fe,be={},Re)=>{if(Re){const rt=++z;M.set(rt,Re),be._sync=rt,Re.setTag(`async call #${rt}`),Nt(`async call #${rt}`)}return le.emit(Zt(J.baseInfo.id),{type:fe,payload:be}),Re==null?void 0:Re.promise},this._callUserModel=async(fe,be)=>{try{J[fe](be)}catch{Nt(`[model method] #${fe} not existed`)}},setInterval(()=>{if(M.size>100)for(const[fe,be]of M)be.settled&&M.delete(fe)},18e5)}).finally(()=>{this._status=void 0}),await Y.promise,J.baseInfo}async call(g,x={}){var I;return(I=this._call)==null?void 0:I.call(this,g,x)}async callAsync(g,x={}){var z;const I=Gr(1e4);return(z=this._call)==null?void 0:z.call(this,g,x,I)}async callUserModel(g,x={}){var I;return(I=this._callUserModel)==null?void 0:I.call(this,g,x)}async _setupIframeSandbox(){var Xe;const g=this._pluginLocal,x=g.id,I=`${x}_lsp_main`,z=new URL(g.options.entry);z.searchParams.set("__v__",g.options.version);const M=document.querySelector(`#${I}`);M&&M.parentElement.removeChild(M);const Y=document.createElement("div");Y.classList.add("lsp-iframe-sandbox-container"),Y.id=I,Y.dataset.pid=x;try{const le=(Xe=await this._pluginLocal._loadLayoutsData())==null?void 0:Xe.$$0;if(le){Y.dataset.inited_layout="true";const{width:fe,height:be,left:Re,top:rt}=le;Object.assign(Y.style,{width:fe+"px",height:be+"px",left:Re+"px",top:rt+"px"})}}catch(le){console.error("[Restore Layout Error]",le)}document.body.appendChild(Y);let J,te=new Ir({id:x+"_iframe",container:Y,url:z.href,classListArray:["lsp-iframe-sandbox"],model:{baseInfo:JSON.parse(JSON.stringify(g.toJSON()))}}).sendHandshake();return this._status="pending",new Promise((le,fe)=>{J=setTimeout(()=>{fe(new Error("handshake Timeout"))},3e3),te.then(be=>{this._parent=be,this._connected=!0,this.emit("connected"),be.on(Zt(g.id),({type:Re,payload:rt})=>{var He;Nt("[user -> *host] ",Re,rt),(He=this._pluginLocal)==null||He.emit(Re,rt||{})}),this._call=async(...Re)=>{await be.call(Zt(g.id),{type:Re[0],payload:Object.assign(Re[1]||{},{$$pid:g.id})})},this._callUserModel=async(Re,rt)=>{if(Re.startsWith($r))return await be.get(Re.replace($r,""));be.call(Re,rt)},le(null)}).catch(be=>{fe(be)}).finally(()=>{clearTimeout(J)})}).catch(le=>{throw Nt("[iframe sandbox] error",le),le}).finally(()=>{this._status=void 0})}async _setupShadowSandbox(){const g=this._pluginLocal,x=this._shadow=new _i(g);try{this._status="pending",await x.load(),this._connected=!0,this.emit("connected"),this._call=async(I,z={},M)=>{var Y;return M&&(z.actor=M),(Y=this._pluginLocal)==null||Y.emit(I,Object.assign(z,{$$pid:g.id})),M==null?void 0:M.promise},this._callUserModel=async(...I)=>{let z=I[0];z!=null&&z.startsWith($r)&&(z=z.replace($r,""));const M=I[1]||{},Y=this._userModel[z];typeof Y=="function"&&await Y.call(null,M)}}catch(I){throw Nt("[shadow sandbox] error",I),I}finally{this._status=void 0}}_extendUserModel(g){return Object.assign(this._userModel,g)}_getSandboxIframeContainer(){var g;return(g=this._parent)==null?void 0:g.frame.parentNode}_getSandboxShadowContainer(){var g;return(g=this._shadow)==null?void 0:g.frame.parentNode}_getSandboxIframeRoot(){var g;return(g=this._parent)==null?void 0:g.frame}_getSandboxShadowRoot(){var g;return(g=this._shadow)==null?void 0:g.frame}set debugTag(g){this._debugTag=g}async destroy(){let g=null;this._parent&&(g=this._getSandboxIframeContainer(),await this._parent.destroy()),this._shadow&&(g=this._getSandboxShadowContainer(),this._shadow.destroy()),g==null||g.parentNode.removeChild(g)}}class Ei{constructor(v){ce(this,"ctx");this.ctx=v}get ctxId(){return this.ctx.baseInfo.id}setItem(v,g){return this.ctx.caller.callAsync("api:call",{method:"write-plugin-storage-file",args:[this.ctxId,v,g]})}getItem(v){return this.ctx.caller.callAsync("api:call",{method:"read-plugin-storage-file",args:[this.ctxId,v]})}removeItem(v){return this.ctx.caller.call("api:call",{method:"unlink-plugin-storage-file",args:[this.ctxId,v]})}clear(){return this.ctx.caller.call("api:call",{method:"clear-plugin-storage-files",args:[this.ctxId]})}hasItem(v){return this.ctx.caller.callAsync("api:call",{method:"exist-plugin-storage-file",args:[this.ctxId,v]})}}class Ai{constructor(v){ce(this,"ctx");this.ctx=v}get React(){return this.ensureHostScope().React}get ReactDOM(){return this.ensureHostScope().ReactDOM}get pluginLocal(){return this.ensureHostScope().LSPluginCore.ensurePlugin(this.ctx.baseInfo.id)}invokeExperMethod(v,...g){var I,z;const x=this.ensureHostScope();return v=(I=Rr(v))==null?void 0:I.toLowerCase(),(z=x.logseq.api["exper_"+v])==null?void 0:z.apply(x,g)}async loadScripts(...v){(v=v.map(g=>g!=null&&g.startsWith("http")?g:this.ctx.resolveResourceFullUrl(g))).unshift(this.ctx.baseInfo.id),await this.invokeExperMethod("loadScripts",...v)}registerFencedCodeRenderer(v,g){return this.ensureHostScope().logseq.api.exper_register_fenced_code_renderer(this.ctx.baseInfo.id,v,g)}registerExtensionsEnhancer(v,g){const x=this.ensureHostScope();switch(v){case"katex":x.katex&&g(x.katex).catch(console.error)}return x.logseq.api.exper_register_extensions_enhancer(this.ctx.baseInfo.id,v,g)}ensureHostScope(){if(window===top)throw new Error("Can not access host scope!");return top}}const Si=Symbol.for("proxy-continue"),lo=nn()("LSPlugin:user");function D(m,v,g){var te;if(typeof g!="function")return!1;const{key:x,label:I,desc:z,palette:M,keybinding:Y}=v,J=`SimpleCommandHook${x}${++Fe}`;this.Editor["on"+J](g),(te=this.caller)==null||te.call("api:call",{method:"register-plugin-simple-command",args:[this.baseInfo.id,[{key:x,label:I,type:m,desc:z,keybinding:Y},["editor/hook",J]],M]})}let ee=null;const Z={async getInfo(m){return ee||(ee=await this._execCallableAPIAsync("get-app-info")),typeof m=="string"?ee[m]:ee},registerCommand:D,registerCommandPalette(m,v){const{key:g,label:x,keybinding:I}=m;return D.call(this,"$palette$",{key:g,label:x,palette:!0,keybinding:I},v)},registerCommandShortcut(m,v){const{binding:g}=m,x="$shortcut$",I=x+Rr(g);return D.call(this,x,{key:I,palette:!1,keybinding:m},v)},registerUIItem(m,v){var x;const g=this.baseInfo.id;(x=this.caller)==null||x.call("api:call",{method:"register-plugin-ui-item",args:[g,m,v]})},registerPageMenuItem(m,v){if(typeof v!="function")return!1;const g=m+"_"+this.baseInfo.id,x=m;D.call(this,"page-menu-item",{key:g,label:x},v)},setFullScreen(m){const v=(...g)=>this._callWin("setFullScreen",...g);m==="toggle"?this._callWin("isFullScreen").then(g=>{g?v():v(!0)}):m?v(!0):v()}};let Fe=0;const We={registerSlashCommand(m,v){var g;lo("Register slash command #",this.baseInfo.id,m,v),typeof v=="function"&&(v=[["editor/clear-current-slash",!1],["editor/restore-saved-cursor"],["editor/hook",v]]),v=v.map(x=>{const[I,...z]=x;switch(I){case"editor/hook":let M=z[0],Y=()=>{var te;(te=this.caller)==null||te.callUserModel(M)};typeof M=="function"&&(Y=M);const J=`SlashCommandHook${I}${++Fe}`;x[1]=J,this.Editor["on"+J](Y)}return x}),(g=this.caller)==null||g.call("api:call",{method:"register-plugin-slash-command",args:[this.baseInfo.id,[m,v]]})},registerBlockContextMenuItem(m,v){if(typeof v!="function")return!1;const g=m+"_"+this.baseInfo.id,x=m;D.call(this,"block-context-menu-item",{key:g,label:x},v)},scrollToBlockInPage(m,v,g){const x="block-content-"+v;g!=null&&g.replaceState?this.App.replaceState("page",{name:m},{anchor:x}):this.App.pushState("page",{name:m},{anchor:x})}},lt={onBlockChanged(m,v){const g=this.baseInfo.id,x=`hook:db:${Rr(`block:${m}`)}`,I=({block:z,txData:M,txMeta:Y})=>{z.uuid===m&&v(z,M,Y)};return this.caller.on(x,I),this.App._installPluginHook(g,x),()=>{this.caller.off(x,I),this.App._uninstallPluginHook(g,x)}}},ot={},sn={},St={};class un extends Cr(){constructor(g,x){super();ce(this,"_baseInfo");ce(this,"_caller");ce(this,"_version","0.0.6");ce(this,"_debugTag","");ce(this,"_settingsSchema");ce(this,"_connected",!1);ce(this,"_ui",new Map);ce(this,"_mFileStorage");ce(this,"_mExperiments");ce(this,"_beforeunloadCallback");this._baseInfo=g,this._caller=x,x.on("sys:ui:visible",I=>{I!=null&&I.toggle&&this.toggleMainUI()}),x.on("settings:changed",I=>{const z=Object.assign({},this.settings),M=Object.assign(this._baseInfo.settings,I);this.emit("settings:changed",ur({},M),z)}),x.on("beforeunload",async I=>{const J=I,{actor:z}=J,M=ca(J,["actor"]),Y=this._beforeunloadCallback;try{Y&&await Y(M),z==null||z.resolve(null)}catch(te){console.debug(`${x.debugTag} [beforeunload] `,te),z==null||z.reject(te)}})}async ready(g,x){if(!this._connected)try{typeof g=="function"&&(x=g,g={});let I=await this._caller.connectToParent(g);this._connected=!0,I=yi(this._baseInfo,I),this._settingsSchema&&(I.settings=function(z,M){const Y=(M||[]).reduce((J,te)=>("default"in te&&(J[te.key]=te.default),J),{});return Object.assign(Y,z)}(I.settings,this._settingsSchema),await this.useSettingsSchema(this._settingsSchema)),I!=null&&I.id&&(this._debugTag=this._caller.debugTag=`#${I.id} [${I.name}]`);try{await this._execCallableAPIAsync("setSDKMetadata",{version:this._version})}catch(z){console.warn(z)}x&&x.call(this,I)}catch(I){console.error(`${this._debugTag} [Ready Error]`,I)}}ensureConnected(){if(!this._connected)throw new Error("not connected")}beforeunload(g){typeof g=="function"&&(this._beforeunloadCallback=g)}provideModel(g){return this.caller._extendUserModel(g),this}provideTheme(g){return this.caller.call("provider:theme",g),this}provideStyle(g){return this.caller.call("provider:style",g),this}provideUI(g){return this.caller.call("provider:ui",g),this}useSettingsSchema(g){return this.connected&&this.caller.call("settings:schema",{schema:g,isSync:!0}),this._settingsSchema=g,this}updateSettings(g){this.caller.call("settings:update",g)}onSettingsChanged(g){const x="settings:changed";return this.on(x,g),()=>this.off(x,g)}showSettingsUI(){this.caller.call("settings:visible:changed",{visible:!0})}hideSettingsUI(){this.caller.call("settings:visible:changed",{visible:!1})}setMainUIAttrs(g){this.caller.call("main-ui:attrs",g)}setMainUIInlineStyle(g){this.caller.call("main-ui:style",g)}hideMainUI(g){const x={key:0,visible:!1,cursor:g==null?void 0:g.restoreEditingCursor};this.caller.call("main-ui:visible",x),this.emit("ui:visible:changed",x),this._ui.set(x.key,x)}showMainUI(g){const x={key:0,visible:!0,autoFocus:g==null?void 0:g.autoFocus};this.caller.call("main-ui:visible",x),this.emit("ui:visible:changed",x),this._ui.set(x.key,x)}toggleMainUI(){const g=this._ui.get(0);g&&g.visible?this.hideMainUI():this.showMainUI()}get version(){return this._version}get isMainUIVisible(){const g=this._ui.get(0);return Boolean(g&&g.visible)}get connected(){return this._connected}get baseInfo(){return this._baseInfo}get settings(){var g;return(g=this.baseInfo)==null?void 0:g.settings}get caller(){return this._caller}resolveResourceFullUrl(g){if(this.ensureConnected(),g)return g=g.replace(/^[.\\/]+/,""),function(x,...I){try{const z=new URL(x);if(!z.origin)throw new Error(null);const M=Gn.join(x.substr(z.origin.length),...I);return z.origin+M}catch{return Gn.join(x,...I)}}(this._baseInfo.lsr,g)}_makeUserProxy(g,x){const I=this,z=this.caller;return new Proxy(g,{get(M,Y,J){const te=M[Y];return function(...Xe){if(te){const fe=te.apply(I,Xe.concat(x));if(fe!==Si)return fe}if(x){const fe=Y.toString().match(/^(once|off|on)/i);if(fe!=null){const be=fe[0].toLowerCase(),Re=fe.input.slice(be.length),rt=be==="off",He=I.baseInfo.id,dt=`hook:${x}:${Rr(Re)}`,Ct=Xe[0];z[be](dt,Ct);const Lr=()=>{z.off(dt,Ct),z.listenerCount(dt)||I.App._uninstallPluginHook(He,dt)};return rt?void Lr():(I.App._installPluginHook(He,dt),Lr)}}let le=Y;return["git","ui","assets"].includes(x)&&(le=x+"_"+le),z.callAsync("api:call",{tag:x,method:le,args:Xe})}}})}_execCallableAPIAsync(g,...x){return this._caller.callAsync("api:call",{method:g,args:x})}_execCallableAPI(g,...x){this._caller.call("api:call",{method:g,args:x})}_callWin(...g){return this._execCallableAPIAsync("_callMainWin",...g)}get App(){return this._makeUserProxy(Z,"app")}get Editor(){return this._makeUserProxy(We,"editor")}get DB(){return this._makeUserProxy(lt,"db")}get Git(){return this._makeUserProxy(ot,"git")}get UI(){return this._makeUserProxy(sn,"ui")}get Assets(){return this._makeUserProxy(St,"assets")}get FileStorage(){let g=this._mFileStorage;return g||(g=this._mFileStorage=new Ei(this)),g}get Experiments(){let g=this._mExperiments;return g||(g=this._mExperiments=new Ai(this)),g}}function Ci(m,v){return new un(m,v)}if(window.__LSP__HOST__==null){const m=new Bt(null);window.logseq=Ci({},m)}})(),o})()})})(ha,ha.exports);function Vt(){}function Ku(n,t){for(const e in t)n[e]=t[e];return n}function cs(n){return n()}function da(){return Object.create(null)}function It(n){n.forEach(cs)}function hs(n){return typeof n=="function"}function wn(n,t){return n!=n?t==t:n!==t||n&&typeof n=="object"||typeof n=="function"}function Zu(n){return Object.keys(n).length===0}function ds(n,...t){if(n==null)return Vt;const e=n.subscribe(...t);return e.unsubscribe?()=>e.unsubscribe():e}function Br(n,t,e){n.$$.on_destroy.push(ds(t,e))}function Xu(n,t,e,r){if(n){const i=fs(n,t,e,r);return n[0](i)}}function fs(n,t,e,r){return n[1]&&r?Ku(e.ctx.slice(),n[1](r(t))):e.ctx}function Ju(n,t,e,r){if(n[2]&&r){const i=n[2](r(e));if(t.dirty===void 0)return i;if(typeof i=="object"){const o=[],a=Math.max(t.dirty.length,i.length);for(let s=0;s<a;s+=1)o[s]=t.dirty[s]|i[s];return o}return t.dirty|i}return t.dirty}function Qu(n,t,e,r,i,o){if(i){const a=fs(t,e,r,o);n.p(a,i)}}function el(n){if(n.ctx.length>32){const t=[],e=n.ctx.length/32;for(let r=0;r<e;r++)t[r]=-1;return t}return-1}function Mr(n,t,e){return n.set(e),t}function K(n,t){n.appendChild(t)}function Qe(n,t,e){n.insertBefore(t,e||null)}function Ze(n){n.parentNode.removeChild(n)}function tl(n,t){for(let e=0;e<n.length;e+=1)n[e]&&n[e].d(t)}function ue(n){return document.createElement(n)}function Oo(n){return document.createTextNode(n)}function Se(){return Oo(" ")}function Do(){return Oo("")}function Be(n,t,e,r){return n.addEventListener(t,e,r),()=>n.removeEventListener(t,e,r)}function ae(n,t,e){e==null?n.removeAttribute(t):n.getAttribute(t)!==e&&n.setAttribute(t,e)}function jr(n){return n===""?null:+n}function rl(n){return Array.from(n.childNodes)}function Ke(n,t){n.value=t==null?"":t}function Ti(n,t){for(let e=0;e<n.options.length;e+=1){const r=n.options[e];if(r.__value===t){r.selected=!0;return}}n.selectedIndex=-1}function fa(n){const t=n.querySelector(":checked")||n.options[0];return t&&t.__value}function nl(n,t,{bubbles:e=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(n,e,r,t),i}let Vn;function Hn(n){Vn=n}function En(){if(!Vn)throw new Error("Function called outside component initialization");return Vn}function Po(n){En().$$.on_mount.push(n)}function ps(n){En().$$.after_update.push(n)}function ko(n){En().$$.on_destroy.push(n)}function il(){const n=En();return(t,e,{cancelable:r=!1}={})=>{const i=n.$$.callbacks[t];if(i){const o=nl(t,e,{cancelable:r});return i.slice().forEach(a=>{a.call(n,o)}),!o.defaultPrevented}return!0}}function ol(n,t){return En().$$.context.set(n,t),t}function gs(n){return En().$$.context.get(n)}const Nn=[],_o=[],Ii=[],pa=[],al=Promise.resolve();let wo=!1;function sl(){wo||(wo=!0,al.then(ys))}function Yn(n){Ii.push(n)}const ho=new Set;let xi=0;function ys(){const n=Vn;do{for(;xi<Nn.length;){const t=Nn[xi];xi++,Hn(t),ul(t.$$)}for(Hn(null),Nn.length=0,xi=0;_o.length;)_o.pop()();for(let t=0;t<Ii.length;t+=1){const e=Ii[t];ho.has(e)||(ho.add(e),e())}Ii.length=0}while(Nn.length);for(;pa.length;)pa.pop()();wo=!1,ho.clear(),Hn(n)}function ul(n){if(n.fragment!==null){n.update(),It(n.before_update);const t=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,t),n.after_update.forEach(Yn)}}const $i=new Set;let Nr;function ga(){Nr={r:0,c:[],p:Nr}}function ya(){Nr.r||It(Nr.c),Nr=Nr.p}function pr(n,t){n&&n.i&&($i.delete(n),n.i(t))}function Dr(n,t,e,r){if(n&&n.o){if($i.has(n))return;$i.add(n),Nr.c.push(()=>{$i.delete(n),r&&(e&&n.d(1),r())}),n.o(t)}}function ma(n,t){Dr(n,1,1,()=>{t.delete(n.key)})}function va(n,t,e,r,i,o,a,s,l,u,h,d){let c=n.length,f=o.length,p=c;const w={};for(;p--;)w[n[p].key]=p;const S=[],A=new Map,T=new Map;for(p=f;p--;){const F=d(i,o,p),y=e(F);let _=a.get(y);_?r&&_.p(F,t):(_=u(y,F),_.c()),A.set(y,S[p]=_),y in w&&T.set(y,Math.abs(p-w[y]))}const L=new Set,C=new Set;function E(F){pr(F,1),F.m(s,h),a.set(F.key,F),h=F.first,f--}for(;c&&f;){const F=S[f-1],y=n[c-1],_=F.key,b=y.key;F===y?(h=F.first,c--,f--):A.has(b)?!a.has(_)||L.has(_)?E(F):C.has(b)?c--:T.get(_)>T.get(b)?(C.add(_),E(F)):(L.add(b),c--):(l(y,a),c--)}for(;c--;){const F=n[c];A.has(F.key)||l(F,a)}for(;f;)E(S[f-1]);return S}function Mi(n){n&&n.c()}function Kn(n,t,e,r){const{fragment:i,on_mount:o,on_destroy:a,after_update:s}=n.$$;i&&i.m(t,e),r||Yn(()=>{const l=o.map(cs).filter(hs);a?a.push(...l):It(l),n.$$.on_mount=[]}),s.forEach(Yn)}function Zn(n,t){const e=n.$$;e.fragment!==null&&(It(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}function ll(n,t){n.$$.dirty[0]===-1&&(Nn.push(n),sl(),n.$$.dirty.fill(0)),n.$$.dirty[t/31|0]|=1<<t%31}function Qn(n,t,e,r,i,o,a,s=[-1]){const l=Vn;Hn(n);const u=n.$$={fragment:null,ctx:null,props:o,update:Vt,not_equal:i,bound:da(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:da(),dirty:s,skip_bound:!1,root:t.target||l.$$.root};a&&a(u.root);let h=!1;if(u.ctx=e?e(n,t.props||{},(d,c,...f)=>{const p=f.length?f[0]:c;return u.ctx&&i(u.ctx[d],u.ctx[d]=p)&&(!u.skip_bound&&u.bound[d]&&u.bound[d](p),h&&ll(n,d)),c}):[],u.update(),h=!0,It(u.before_update),u.fragment=r?r(u.ctx):!1,t.target){if(t.hydrate){const d=rl(t.target);u.fragment&&u.fragment.l(d),d.forEach(Ze)}else u.fragment&&u.fragment.c();t.intro&&pr(n.$$.fragment),Kn(n,t.target,t.anchor,t.customElement),ys()}Hn(l)}class ei{$destroy(){Zn(this,1),this.$destroy=Vt}$on(t,e){const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(e),()=>{const i=r.indexOf(e);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!Zu(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}var qi={exports:{}},fn=typeof Reflect=="object"?Reflect:null,ba=fn&&typeof fn.apply=="function"?fn.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)},ji;fn&&typeof fn.ownKeys=="function"?ji=fn.ownKeys:Object.getOwnPropertySymbols?ji=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:ji=function(t){return Object.getOwnPropertyNames(t)};function cl(n){console&&console.warn&&console.warn(n)}var ms=Number.isNaN||function(t){return t!==t};function je(){je.init.call(this)}qi.exports=je;qi.exports.once=pl;je.EventEmitter=je;je.prototype._events=void 0;je.prototype._eventsCount=0;je.prototype._maxListeners=void 0;var _a=10;function Vi(n){if(typeof n!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n)}Object.defineProperty(je,"defaultMaxListeners",{enumerable:!0,get:function(){return _a},set:function(n){if(typeof n!="number"||n<0||ms(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");_a=n}});je.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};je.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||ms(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function vs(n){return n._maxListeners===void 0?je.defaultMaxListeners:n._maxListeners}je.prototype.getMaxListeners=function(){return vs(this)};je.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var i=t==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var l=o[t];if(l===void 0)return!1;if(typeof l=="function")ba(l,this,e);else for(var u=l.length,h=As(l,u),r=0;r<u;++r)ba(h[r],this,e);return!0};function bs(n,t,e,r){var i,o,a;if(Vi(e),o=n._events,o===void 0?(o=n._events=Object.create(null),n._eventsCount=0):(o.newListener!==void 0&&(n.emit("newListener",t,e.listener?e.listener:e),o=n._events),a=o[t]),a===void 0)a=o[t]=e,++n._eventsCount;else if(typeof a=="function"?a=o[t]=r?[e,a]:[a,e]:r?a.unshift(e):a.push(e),i=vs(n),i>0&&a.length>i&&!a.warned){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=n,s.type=t,s.count=a.length,cl(s)}return n}je.prototype.addListener=function(t,e){return bs(this,t,e,!1)};je.prototype.on=je.prototype.addListener;je.prototype.prependListener=function(t,e){return bs(this,t,e,!0)};function hl(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _s(n,t,e){var r={fired:!1,wrapFn:void 0,target:n,type:t,listener:e},i=hl.bind(r);return i.listener=e,r.wrapFn=i,i}je.prototype.once=function(t,e){return Vi(e),this.on(t,_s(this,t,e)),this};je.prototype.prependOnceListener=function(t,e){return Vi(e),this.prependListener(t,_s(this,t,e)),this};je.prototype.removeListener=function(t,e){var r,i,o,a,s;if(Vi(e),i=this._events,i===void 0)return this;if(r=i[t],r===void 0)return this;if(r===e||r.listener===e)--this._eventsCount===0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,r.listener||e));else if(typeof r!="function"){for(o=-1,a=r.length-1;a>=0;a--)if(r[a]===e||r[a].listener===e){s=r[a].listener,o=a;break}if(o<0)return this;o===0?r.shift():dl(r,o),r.length===1&&(i[t]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",t,s||e)}return this};je.prototype.off=je.prototype.removeListener;je.prototype.removeAllListeners=function(t){var e,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[t]),this;if(arguments.length===0){var o=Object.keys(r),a;for(i=0;i<o.length;++i)a=o[i],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=r[t],typeof e=="function")this.removeListener(t,e);else if(e!==void 0)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this};function ws(n,t,e){var r=n._events;if(r===void 0)return[];var i=r[t];return i===void 0?[]:typeof i=="function"?e?[i.listener||i]:[i]:e?fl(i):As(i,i.length)}je.prototype.listeners=function(t){return ws(this,t,!0)};je.prototype.rawListeners=function(t){return ws(this,t,!1)};je.listenerCount=function(n,t){return typeof n.listenerCount=="function"?n.listenerCount(t):Es.call(n,t)};je.prototype.listenerCount=Es;function Es(n){var t=this._events;if(t!==void 0){var e=t[n];if(typeof e=="function")return 1;if(e!==void 0)return e.length}return 0}je.prototype.eventNames=function(){return this._eventsCount>0?ji(this._events):[]};function As(n,t){for(var e=new Array(t),r=0;r<t;++r)e[r]=n[r];return e}function dl(n,t){for(;t+1<n.length;t++)n[t]=n[t+1];n.pop()}function fl(n){for(var t=new Array(n.length),e=0;e<t.length;++e)t[e]=n[e].listener||n[e];return t}function pl(n,t){return new Promise(function(e,r){function i(a){n.removeListener(t,o),r(a)}function o(){typeof n.removeListener=="function"&&n.removeListener("error",i),e([].slice.call(arguments))}Ss(n,t,o,{once:!0}),t!=="error"&&gl(n,i,{once:!0})})}function gl(n,t,e){typeof n.on=="function"&&Ss(n,"error",t,e)}function Ss(n,t,e,r){if(typeof n.on=="function")r.once?n.once(t,e):n.on(t,e);else if(typeof n.addEventListener=="function")n.addEventListener(t,function i(o){r.once&&n.removeEventListener(t,i),e(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n)}function tr(n){if(typeof n!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=n}typeof Symbol!="undefined"&&(tr.prototype[Symbol.iterator]=function(){return this});tr.of=function(){var n=arguments,t=n.length,e=0;return new tr(function(){return e>=t?{done:!0}:{done:!1,value:n[e++]}})};tr.empty=function(){var n=new tr(function(){return{done:!0}});return n};tr.fromSequence=function(n){var t=0,e=n.length;return new tr(function(){return t>=e?{done:!0}:{done:!1,value:n[t++]}})};tr.is=function(n){return n instanceof tr?!0:typeof n=="object"&&n!==null&&typeof n.next=="function"};var Et=tr,Yi={};Yi.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer!="undefined";Yi.SYMBOL_SUPPORT=typeof Symbol!="undefined";var yl=Et,Cs=Yi,ml=Cs.ARRAY_BUFFER_SUPPORT,vl=Cs.SYMBOL_SUPPORT;function bl(n){return typeof n=="string"||Array.isArray(n)||ml&&ArrayBuffer.isView(n)?yl.fromSequence(n):typeof n!="object"||n===null?null:vl&&typeof n[Symbol.iterator]=="function"?n[Symbol.iterator]():typeof n.next=="function"?n:null}var Ls=function(t){var e=bl(t);if(!e)throw new Error("obliterator: target is not iterable nor a valid iterator.");return e},_l=Ls,Ts=function(t,e){for(var r=arguments.length>1?e:1/0,i=r!==1/0?new Array(r):[],o,a=0,s=_l(t);;){if(a===r)return i;if(o=s.next(),o.done)return a!==e&&(i.length=a),i;i[a++]=o.value}},wl=Et,El=Ls,fr=function(){var t=arguments,e=null,r=-1;return new wl(function(){var o=null;do{if(e===null){if(r++,r>=t.length)return{done:!0};e=El(t[r])}if(o=e.next(),o.done===!0){e=null;continue}break}while(!0);return o})};function Al(){const n=arguments[0];for(let t=1,e=arguments.length;t<e;t++)if(!!arguments[t])for(const r in arguments[t])n[r]=arguments[t][r];return n}let at=Al;typeof Object.assign=="function"&&(at=Object.assign);function Gt(n,t,e,r){const i=n._nodes.get(t);let o=null;return i&&(r==="mixed"?o=i.out&&i.out[e]||i.undirected&&i.undirected[e]:r==="directed"?o=i.out&&i.out[e]:o=i.undirected&&i.undirected[e]),o}function ct(n){return typeof n=="object"&&n!==null&&n.constructor===Object}function xs(n){let t;for(t in n)return!1;return!0}function kt(n,t,e){Object.defineProperty(n,t,{enumerable:!1,configurable:!1,writable:!0,value:e})}function Wt(n,t,e){const r={enumerable:!0,configurable:!0};typeof e=="function"?r.get=e:(r.value=e,r.writable=!1),Object.defineProperty(n,t,r)}function wa(n){return!(!ct(n)||n.attributes&&!Array.isArray(n.attributes))}function Sl(){let n=Math.floor(Math.random()*256)&255;return()=>n++}class Fo extends Error{constructor(t){super(),this.name="GraphError",this.message=t}}class X extends Fo{constructor(t){super(t),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,X.prototype.constructor)}}class H extends Fo{constructor(t){super(t),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,H.prototype.constructor)}}class he extends Fo{constructor(t){super(t),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,he.prototype.constructor)}}function Os(n,t){this.key=n,this.attributes=t,this.clear()}Os.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function Ds(n,t){this.key=n,this.attributes=t,this.clear()}Ds.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function Ps(n,t){this.key=n,this.attributes=t,this.clear()}Ps.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function An(n,t,e,r,i){this.key=t,this.attributes=i,this.undirected=n,this.source=e,this.target=r}An.prototype.attach=function(){let n="out",t="in";this.undirected&&(n=t="undirected");const e=this.source.key,r=this.target.key;this.source[n][r]=this,!(this.undirected&&e===r)&&(this.target[t][e]=this)};An.prototype.attachMulti=function(){let n="out",t="in";const e=this.source.key,r=this.target.key;this.undirected&&(n=t="undirected");const i=this.source[n],o=i[r];if(typeof o=="undefined"){i[r]=this,this.undirected&&e===r||(this.target[t][e]=this);return}o.previous=this,this.next=o,i[r]=this,this.target[t][e]=this};An.prototype.detach=function(){const n=this.source.key,t=this.target.key;let e="out",r="in";this.undirected&&(e=r="undirected"),delete this.source[e][t],delete this.target[r][n]};An.prototype.detachMulti=function(){const n=this.source.key,t=this.target.key;let e="out",r="in";this.undirected&&(e=r="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[e][t],delete this.target[r][n]):(this.next.previous=void 0,this.source[e][t]=this.next,this.target[r][n]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const ks=0,Fs=1,Cl=2,Rs=3;function yr(n,t,e,r,i,o,a){let s,l,u,h;if(r=""+r,e===ks){if(s=n._nodes.get(r),!s)throw new H(`Graph.${t}: could not find the "${r}" node in the graph.`);u=i,h=o}else if(e===Rs){if(i=""+i,l=n._edges.get(i),!l)throw new H(`Graph.${t}: could not find the "${i}" edge in the graph.`);const d=l.source.key,c=l.target.key;if(r===d)s=l.target;else if(r===c)s=l.source;else throw new H(`Graph.${t}: the "${r}" node is not attached to the "${i}" edge (${d}, ${c}).`);u=o,h=a}else{if(l=n._edges.get(r),!l)throw new H(`Graph.${t}: could not find the "${r}" edge in the graph.`);e===Fs?s=l.source:s=l.target,u=i,h=o}return[s,u,h]}function Ll(n,t,e){n.prototype[t]=function(r,i,o){const[a,s]=yr(this,t,e,r,i,o);return a.attributes[s]}}function Tl(n,t,e){n.prototype[t]=function(r,i){const[o]=yr(this,t,e,r,i);return o.attributes}}function xl(n,t,e){n.prototype[t]=function(r,i,o){const[a,s]=yr(this,t,e,r,i,o);return a.attributes.hasOwnProperty(s)}}function Ol(n,t,e){n.prototype[t]=function(r,i,o,a){const[s,l,u]=yr(this,t,e,r,i,o,a);return s.attributes[l]=u,this.emit("nodeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:l}),this}}function Dl(n,t,e){n.prototype[t]=function(r,i,o,a){const[s,l,u]=yr(this,t,e,r,i,o,a);if(typeof u!="function")throw new X(`Graph.${t}: updater should be a function.`);const h=s.attributes,d=u(h[l]);return h[l]=d,this.emit("nodeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:l}),this}}function Pl(n,t,e){n.prototype[t]=function(r,i,o){const[a,s]=yr(this,t,e,r,i,o);return delete a.attributes[s],this.emit("nodeAttributesUpdated",{key:a.key,type:"remove",attributes:a.attributes,name:s}),this}}function kl(n,t,e){n.prototype[t]=function(r,i,o){const[a,s]=yr(this,t,e,r,i,o);if(!ct(s))throw new X(`Graph.${t}: provided attributes are not a plain object.`);return a.attributes=s,this.emit("nodeAttributesUpdated",{key:a.key,type:"replace",attributes:a.attributes}),this}}function Fl(n,t,e){n.prototype[t]=function(r,i,o){const[a,s]=yr(this,t,e,r,i,o);if(!ct(s))throw new X(`Graph.${t}: provided attributes are not a plain object.`);return at(a.attributes,s),this.emit("nodeAttributesUpdated",{key:a.key,type:"merge",attributes:a.attributes,data:s}),this}}function Rl(n,t,e){n.prototype[t]=function(r,i,o){const[a,s]=yr(this,t,e,r,i,o);if(typeof s!="function")throw new X(`Graph.${t}: provided updater is not a function.`);return a.attributes=s(a.attributes),this.emit("nodeAttributesUpdated",{key:a.key,type:"update",attributes:a.attributes}),this}}const Gl=[{name:n=>`get${n}Attribute`,attacher:Ll},{name:n=>`get${n}Attributes`,attacher:Tl},{name:n=>`has${n}Attribute`,attacher:xl},{name:n=>`set${n}Attribute`,attacher:Ol},{name:n=>`update${n}Attribute`,attacher:Dl},{name:n=>`remove${n}Attribute`,attacher:Pl},{name:n=>`replace${n}Attributes`,attacher:kl},{name:n=>`merge${n}Attributes`,attacher:Fl},{name:n=>`update${n}Attributes`,attacher:Rl}];function Il(n){Gl.forEach(function({name:t,attacher:e}){e(n,t("Node"),ks),e(n,t("Source"),Fs),e(n,t("Target"),Cl),e(n,t("Opposite"),Rs)})}function $l(n,t,e){n.prototype[t]=function(r,i){let o;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new he(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new he(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,s=""+i;if(i=arguments[2],o=Gt(this,a,s,e),!o)throw new H(`Graph.${t}: could not find an edge for the given path ("${a}" - "${s}").`)}else{if(e!=="mixed")throw new he(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new H(`Graph.${t}: could not find the "${r}" edge in the graph.`)}return o.attributes[i]}}function jl(n,t,e){n.prototype[t]=function(r){let i;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new he(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new he(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+arguments[1];if(i=Gt(this,o,a,e),!i)throw new H(`Graph.${t}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(e!=="mixed")throw new he(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,i=this._edges.get(r),!i)throw new H(`Graph.${t}: could not find the "${r}" edge in the graph.`)}return i.attributes}}function Ul(n,t,e){n.prototype[t]=function(r,i){let o;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new he(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new he(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,s=""+i;if(i=arguments[2],o=Gt(this,a,s,e),!o)throw new H(`Graph.${t}: could not find an edge for the given path ("${a}" - "${s}").`)}else{if(e!=="mixed")throw new he(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new H(`Graph.${t}: could not find the "${r}" edge in the graph.`)}return o.attributes.hasOwnProperty(i)}}function zl(n,t,e){n.prototype[t]=function(r,i,o){let a;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new he(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new he(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,l=""+i;if(i=arguments[2],o=arguments[3],a=Gt(this,s,l,e),!a)throw new H(`Graph.${t}: could not find an edge for the given path ("${s}" - "${l}").`)}else{if(e!=="mixed")throw new he(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,a=this._edges.get(r),!a)throw new H(`Graph.${t}: could not find the "${r}" edge in the graph.`)}return a.attributes[i]=o,this.emit("edgeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:i}),this}}function Ml(n,t,e){n.prototype[t]=function(r,i,o){let a;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new he(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new he(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,l=""+i;if(i=arguments[2],o=arguments[3],a=Gt(this,s,l,e),!a)throw new H(`Graph.${t}: could not find an edge for the given path ("${s}" - "${l}").`)}else{if(e!=="mixed")throw new he(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,a=this._edges.get(r),!a)throw new H(`Graph.${t}: could not find the "${r}" edge in the graph.`)}if(typeof o!="function")throw new X(`Graph.${t}: updater should be a function.`);return a.attributes[i]=o(a.attributes[i]),this.emit("edgeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:i}),this}}function Nl(n,t,e){n.prototype[t]=function(r,i){let o;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new he(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new he(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,s=""+i;if(i=arguments[2],o=Gt(this,a,s,e),!o)throw new H(`Graph.${t}: could not find an edge for the given path ("${a}" - "${s}").`)}else{if(e!=="mixed")throw new he(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new H(`Graph.${t}: could not find the "${r}" edge in the graph.`)}return delete o.attributes[i],this.emit("edgeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:i}),this}}function Bl(n,t,e){n.prototype[t]=function(r,i){let o;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new he(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new he(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,s=""+i;if(i=arguments[2],o=Gt(this,a,s,e),!o)throw new H(`Graph.${t}: could not find an edge for the given path ("${a}" - "${s}").`)}else{if(e!=="mixed")throw new he(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new H(`Graph.${t}: could not find the "${r}" edge in the graph.`)}if(!ct(i))throw new X(`Graph.${t}: provided attributes are not a plain object.`);return o.attributes=i,this.emit("edgeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function Wl(n,t,e){n.prototype[t]=function(r,i){let o;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new he(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new he(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,s=""+i;if(i=arguments[2],o=Gt(this,a,s,e),!o)throw new H(`Graph.${t}: could not find an edge for the given path ("${a}" - "${s}").`)}else{if(e!=="mixed")throw new he(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new H(`Graph.${t}: could not find the "${r}" edge in the graph.`)}if(!ct(i))throw new X(`Graph.${t}: provided attributes are not a plain object.`);return at(o.attributes,i),this.emit("edgeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:i}),this}}function Hl(n,t,e){n.prototype[t]=function(r,i){let o;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new he(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new he(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,s=""+i;if(i=arguments[2],o=Gt(this,a,s,e),!o)throw new H(`Graph.${t}: could not find an edge for the given path ("${a}" - "${s}").`)}else{if(e!=="mixed")throw new he(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new H(`Graph.${t}: could not find the "${r}" edge in the graph.`)}if(typeof i!="function")throw new X(`Graph.${t}: provided updater is not a function.`);return o.attributes=i(o.attributes),this.emit("edgeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const ql=[{name:n=>`get${n}Attribute`,attacher:$l},{name:n=>`get${n}Attributes`,attacher:jl},{name:n=>`has${n}Attribute`,attacher:Ul},{name:n=>`set${n}Attribute`,attacher:zl},{name:n=>`update${n}Attribute`,attacher:Ml},{name:n=>`remove${n}Attribute`,attacher:Nl},{name:n=>`replace${n}Attributes`,attacher:Bl},{name:n=>`merge${n}Attributes`,attacher:Wl},{name:n=>`update${n}Attributes`,attacher:Hl}];function Vl(n){ql.forEach(function({name:t,attacher:e}){e(n,t("Edge"),"mixed"),e(n,t("DirectedEdge"),"directed"),e(n,t("UndirectedEdge"),"undirected")})}const Yl=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function Kl(n,t,e,r){let i=!1;for(const o in t){if(o===r)continue;const a=t[o];if(i=e(a.key,a.attributes,a.source.key,a.target.key,a.source.attributes,a.target.attributes,a.undirected),n&&i)return a.key}}function Zl(n,t,e,r){let i,o,a,s=!1;for(const l in t)if(l!==r){i=t[l];do{if(o=i.source,a=i.target,s=e(i.key,i.attributes,o.key,a.key,o.attributes,a.attributes,i.undirected),n&&s)return i.key;i=i.next}while(i!==void 0)}}function fo(n,t){const e=Object.keys(n),r=e.length;let i,o=0;return new Et(function(){do if(i)i=i.next;else{if(o>=r)return{done:!0};const s=e[o++];if(s===t){i=void 0;continue}i=n[s]}while(!i);return{done:!1,value:{edge:i.key,attributes:i.attributes,source:i.source.key,target:i.target.key,sourceAttributes:i.source.attributes,targetAttributes:i.target.attributes,undirected:i.undirected}}})}function Xl(n,t,e,r){const i=t[e];if(!i)return;const o=i.source,a=i.target;if(r(i.key,i.attributes,o.key,a.key,o.attributes,a.attributes,i.undirected)&&n)return i.key}function Jl(n,t,e,r){let i=t[e];if(!i)return;let o=!1;do{if(o=r(i.key,i.attributes,i.source.key,i.target.key,i.source.attributes,i.target.attributes,i.undirected),n&&o)return i.key;i=i.next}while(i!==void 0)}function po(n,t){let e=n[t];return e.next!==void 0?new Et(function(){if(!e)return{done:!0};const r={edge:e.key,attributes:e.attributes,source:e.source.key,target:e.target.key,sourceAttributes:e.source.attributes,targetAttributes:e.target.attributes,undirected:e.undirected};return e=e.next,{done:!1,value:r}}):Et.of({edge:e.key,attributes:e.attributes,source:e.source.key,target:e.target.key,sourceAttributes:e.source.attributes,targetAttributes:e.target.attributes,undirected:e.undirected})}function Ql(n,t){if(n.size===0)return[];if(t==="mixed"||t===n.type)return typeof Array.from=="function"?Array.from(n._edges.keys()):Ts(n._edges.keys(),n._edges.size);const e=t==="undirected"?n.undirectedSize:n.directedSize,r=new Array(e),i=t==="undirected",o=n._edges.values();let a=0,s,l;for(;s=o.next(),s.done!==!0;)l=s.value,l.undirected===i&&(r[a++]=l.key);return r}function Gs(n,t,e,r){if(t.size===0)return;const i=e!=="mixed"&&e!==t.type,o=e==="undirected";let a,s,l=!1;const u=t._edges.values();for(;a=u.next(),a.done!==!0;){if(s=a.value,i&&s.undirected!==o)continue;const{key:h,attributes:d,source:c,target:f}=s;if(l=r(h,d,c.key,f.key,c.attributes,f.attributes,s.undirected),n&&l)return h}}function ec(n,t){if(n.size===0)return Et.empty();const e=t!=="mixed"&&t!==n.type,r=t==="undirected",i=n._edges.values();return new Et(function(){let a,s;for(;;){if(a=i.next(),a.done)return a;if(s=a.value,!(e&&s.undirected!==r))break}return{value:{edge:s.key,attributes:s.attributes,source:s.source.key,target:s.target.key,sourceAttributes:s.source.attributes,targetAttributes:s.target.attributes,undirected:s.undirected},done:!1}})}function Ro(n,t,e,r,i,o){const a=t?Zl:Kl;let s;if(e!=="undirected"&&(r!=="out"&&(s=a(n,i.in,o),n&&s)||r!=="in"&&(s=a(n,i.out,o,r?void 0:i.key),n&&s))||e!=="directed"&&(s=a(n,i.undirected,o),n&&s))return s}function tc(n,t,e,r){const i=[];return Ro(!1,n,t,e,r,function(o){i.push(o)}),i}function rc(n,t,e){let r=Et.empty();return n!=="undirected"&&(t!=="out"&&typeof e.in!="undefined"&&(r=fr(r,fo(e.in))),t!=="in"&&typeof e.out!="undefined"&&(r=fr(r,fo(e.out,t?void 0:e.key)))),n!=="directed"&&typeof e.undirected!="undefined"&&(r=fr(r,fo(e.undirected))),r}function Go(n,t,e,r,i,o,a){const s=e?Jl:Xl;let l;if(t!=="undirected"&&(typeof i.in!="undefined"&&r!=="out"&&(l=s(n,i.in,o,a),n&&l)||typeof i.out!="undefined"&&r!=="in"&&(r||i.key!==o)&&(l=s(n,i.out,o,a),n&&l))||t!=="directed"&&typeof i.undirected!="undefined"&&(l=s(n,i.undirected,o,a),n&&l))return l}function nc(n,t,e,r,i){const o=[];return Go(!1,n,t,e,r,i,function(a){o.push(a)}),o}function ic(n,t,e,r){let i=Et.empty();return n!=="undirected"&&(typeof e.in!="undefined"&&t!=="out"&&r in e.in&&(i=fr(i,po(e.in,r))),typeof e.out!="undefined"&&t!=="in"&&r in e.out&&(t||e.key!==r)&&(i=fr(i,po(e.out,r)))),n!=="directed"&&typeof e.undirected!="undefined"&&r in e.undirected&&(i=fr(i,po(e.undirected,r))),i}function oc(n,t){const{name:e,type:r,direction:i}=t;n.prototype[e]=function(o,a){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];if(!arguments.length)return Ql(this,r);if(arguments.length===1){o=""+o;const s=this._nodes.get(o);if(typeof s=="undefined")throw new H(`Graph.${e}: could not find the "${o}" node in the graph.`);return tc(this.multi,r==="mixed"?this.type:r,i,s)}if(arguments.length===2){o=""+o,a=""+a;const s=this._nodes.get(o);if(!s)throw new H(`Graph.${e}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(a))throw new H(`Graph.${e}:  could not find the "${a}" target node in the graph.`);return nc(r,this.multi,i,s,a)}throw new X(`Graph.${e}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function ac(n,t){const{name:e,type:r,direction:i}=t,o="forEach"+e[0].toUpperCase()+e.slice(1,-1);n.prototype[o]=function(u,h,d){if(!(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)){if(arguments.length===1)return d=u,Gs(!1,this,r,d);if(arguments.length===2){u=""+u,d=h;const c=this._nodes.get(u);if(typeof c=="undefined")throw new H(`Graph.${o}: could not find the "${u}" node in the graph.`);return Ro(!1,this.multi,r==="mixed"?this.type:r,i,c,d)}if(arguments.length===3){u=""+u,h=""+h;const c=this._nodes.get(u);if(!c)throw new H(`Graph.${o}:  could not find the "${u}" source node in the graph.`);if(!this._nodes.has(h))throw new H(`Graph.${o}:  could not find the "${h}" target node in the graph.`);return Go(!1,r,this.multi,i,c,h,d)}throw new X(`Graph.${o}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const a="map"+e[0].toUpperCase()+e.slice(1);n.prototype[a]=function(){const u=Array.prototype.slice.call(arguments),h=u.pop();let d;if(u.length===0){let c=0;r!=="directed"&&(c+=this.undirectedSize),r!=="undirected"&&(c+=this.directedSize),d=new Array(c);let f=0;u.push((p,w,S,A,T,L,C)=>{d[f++]=h(p,w,S,A,T,L,C)})}else d=[],u.push((c,f,p,w,S,A,T)=>{d.push(h(c,f,p,w,S,A,T))});return this[o].apply(this,u),d};const s="filter"+e[0].toUpperCase()+e.slice(1);n.prototype[s]=function(){const u=Array.prototype.slice.call(arguments),h=u.pop(),d=[];return u.push((c,f,p,w,S,A,T)=>{h(c,f,p,w,S,A,T)&&d.push(c)}),this[o].apply(this,u),d};const l="reduce"+e[0].toUpperCase()+e.slice(1);n.prototype[l]=function(){let u=Array.prototype.slice.call(arguments);if(u.length<2||u.length>4)throw new X(`Graph.${l}: invalid number of arguments (expecting 2, 3 or 4 and got ${u.length}).`);if(typeof u[u.length-1]=="function"&&typeof u[u.length-2]!="function")throw new X(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let h,d;u.length===2?(h=u[0],d=u[1],u=[]):u.length===3?(h=u[1],d=u[2],u=[u[0]]):u.length===4&&(h=u[2],d=u[3],u=[u[0],u[1]]);let c=d;return u.push((f,p,w,S,A,T,L)=>{c=h(c,f,p,w,S,A,T,L)}),this[o].apply(this,u),c}}function sc(n,t){const{name:e,type:r,direction:i}=t,o="find"+e[0].toUpperCase()+e.slice(1,-1);n.prototype[o]=function(l,u,h){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return!1;if(arguments.length===1)return h=l,Gs(!0,this,r,h);if(arguments.length===2){l=""+l,h=u;const d=this._nodes.get(l);if(typeof d=="undefined")throw new H(`Graph.${o}: could not find the "${l}" node in the graph.`);return Ro(!0,this.multi,r==="mixed"?this.type:r,i,d,h)}if(arguments.length===3){l=""+l,u=""+u;const d=this._nodes.get(l);if(!d)throw new H(`Graph.${o}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(u))throw new H(`Graph.${o}:  could not find the "${u}" target node in the graph.`);return Go(!0,r,this.multi,i,d,u,h)}throw new X(`Graph.${o}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const a="some"+e[0].toUpperCase()+e.slice(1,-1);n.prototype[a]=function(){const l=Array.prototype.slice.call(arguments),u=l.pop();return l.push((d,c,f,p,w,S,A)=>u(d,c,f,p,w,S,A)),!!this[o].apply(this,l)};const s="every"+e[0].toUpperCase()+e.slice(1,-1);n.prototype[s]=function(){const l=Array.prototype.slice.call(arguments),u=l.pop();return l.push((d,c,f,p,w,S,A)=>!u(d,c,f,p,w,S,A)),!this[o].apply(this,l)}}function uc(n,t){const{name:e,type:r,direction:i}=t,o=e.slice(0,-1)+"Entries";n.prototype[o]=function(a,s){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return Et.empty();if(!arguments.length)return ec(this,r);if(arguments.length===1){a=""+a;const l=this._nodes.get(a);if(!l)throw new H(`Graph.${o}: could not find the "${a}" node in the graph.`);return rc(r,i,l)}if(arguments.length===2){a=""+a,s=""+s;const l=this._nodes.get(a);if(!l)throw new H(`Graph.${o}:  could not find the "${a}" source node in the graph.`);if(!this._nodes.has(s))throw new H(`Graph.${o}:  could not find the "${s}" target node in the graph.`);return ic(r,i,l,s)}throw new X(`Graph.${o}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function lc(n){Yl.forEach(t=>{oc(n,t),ac(n,t),sc(n,t),uc(n,t)})}const cc=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Ki(){this.A=null,this.B=null}Ki.prototype.wrap=function(n){this.A===null?this.A=n:this.B===null&&(this.B=n)};Ki.prototype.has=function(n){return this.A!==null&&n in this.A||this.B!==null&&n in this.B};function jn(n,t,e,r,i){for(const o in r){const a=r[o],s=a.source,l=a.target,u=s===e?l:s;if(t&&t.has(u.key))continue;const h=i(u.key,u.attributes);if(n&&h)return u.key}}function Io(n,t,e,r,i){if(t!=="mixed"){if(t==="undirected")return jn(n,null,r,r.undirected,i);if(typeof e=="string")return jn(n,null,r,r[e],i)}const o=new Ki;let a;if(t!=="undirected"){if(e!=="out"){if(a=jn(n,null,r,r.in,i),n&&a)return a;o.wrap(r.in)}if(e!=="in"){if(a=jn(n,o,r,r.out,i),n&&a)return a;o.wrap(r.out)}}if(t!=="directed"&&(a=jn(n,o,r,r.undirected,i),n&&a))return a}function hc(n,t,e){if(n!=="mixed"){if(n==="undirected")return Object.keys(e.undirected);if(typeof t=="string")return Object.keys(e[t])}const r=[];return Io(!1,n,t,e,function(i){r.push(i)}),r}function Un(n,t,e){const r=Object.keys(e),i=r.length;let o=0;return new Et(function(){let s=null;do{if(o>=i)return n&&n.wrap(e),{done:!0};const l=e[r[o++]],u=l.source,h=l.target;if(s=u===t?h:u,n&&n.has(s.key)){s=null;continue}}while(s===null);return{done:!1,value:{neighbor:s.key,attributes:s.attributes}}})}function dc(n,t,e){if(n!=="mixed"){if(n==="undirected")return Un(null,e,e.undirected);if(typeof t=="string")return Un(null,e,e[t])}let r=Et.empty();const i=new Ki;return n!=="undirected"&&(t!=="out"&&(r=fr(r,Un(i,e,e.in))),t!=="in"&&(r=fr(r,Un(i,e,e.out)))),n!=="directed"&&(r=fr(r,Un(i,e,e.undirected))),r}function fc(n,t){const{name:e,type:r,direction:i}=t;n.prototype[e]=function(o){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];o=""+o;const a=this._nodes.get(o);if(typeof a=="undefined")throw new H(`Graph.${e}: could not find the "${o}" node in the graph.`);return hc(r==="mixed"?this.type:r,i,a)}}function pc(n,t){const{name:e,type:r,direction:i}=t,o="forEach"+e[0].toUpperCase()+e.slice(1,-1);n.prototype[o]=function(u,h){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;u=""+u;const d=this._nodes.get(u);if(typeof d=="undefined")throw new H(`Graph.${o}: could not find the "${u}" node in the graph.`);Io(!1,r==="mixed"?this.type:r,i,d,h)};const a="map"+e[0].toUpperCase()+e.slice(1);n.prototype[a]=function(u,h){const d=[];return this[o](u,(c,f)=>{d.push(h(c,f))}),d};const s="filter"+e[0].toUpperCase()+e.slice(1);n.prototype[s]=function(u,h){const d=[];return this[o](u,(c,f)=>{h(c,f)&&d.push(c)}),d};const l="reduce"+e[0].toUpperCase()+e.slice(1);n.prototype[l]=function(u,h,d){if(arguments.length<3)throw new X(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let c=d;return this[o](u,(f,p)=>{c=h(c,f,p)}),c}}function gc(n,t){const{name:e,type:r,direction:i}=t,o=e[0].toUpperCase()+e.slice(1,-1),a="find"+o;n.prototype[a]=function(u,h){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;u=""+u;const d=this._nodes.get(u);if(typeof d=="undefined")throw new H(`Graph.${a}: could not find the "${u}" node in the graph.`);return Io(!0,r==="mixed"?this.type:r,i,d,h)};const s="some"+o;n.prototype[s]=function(u,h){return!!this[a](u,h)};const l="every"+o;n.prototype[l]=function(u,h){return!this[a](u,(c,f)=>!h(c,f))}}function yc(n,t){const{name:e,type:r,direction:i}=t,o=e.slice(0,-1)+"Entries";n.prototype[o]=function(a){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return Et.empty();a=""+a;const s=this._nodes.get(a);if(typeof s=="undefined")throw new H(`Graph.${o}: could not find the "${a}" node in the graph.`);return dc(r==="mixed"?this.type:r,i,s)}}function mc(n){cc.forEach(t=>{fc(n,t),pc(n,t),gc(n,t),yc(n,t)})}function Oi(n,t,e,r,i){const o=r._nodes.values(),a=r.type;let s,l,u,h,d,c,f;for(;s=o.next(),s.done!==!0;){let p=!1;if(l=s.value,a!=="undirected"){h=l.out;for(u in h){d=h[u];do{if(c=d.target,p=!0,f=i(l.key,c.key,l.attributes,c.attributes,d.key,d.attributes,d.undirected),n&&f)return d;d=d.next}while(d)}}if(a!=="directed"){h=l.undirected;for(u in h)if(!(t&&l.key>u)){d=h[u];do{if(c=d.target,c.key!==u&&(c=d.source),p=!0,f=i(l.key,c.key,l.attributes,c.attributes,d.key,d.attributes,d.undirected),n&&f)return d;d=d.next}while(d)}}if(e&&!p&&(f=i(l.key,null,l.attributes,null,null,null,null),n&&f))return null}}function vc(n,t){const e={key:n};return xs(t.attributes)||(e.attributes=at({},t.attributes)),e}function bc(n,t,e){const r={key:t,source:e.source.key,target:e.target.key};return xs(e.attributes)||(r.attributes=at({},e.attributes)),n==="mixed"&&e.undirected&&(r.undirected=!0),r}function _c(n){if(!ct(n))throw new X('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in n))throw new X("Graph.import: serialized node is missing its key.");if("attributes"in n&&(!ct(n.attributes)||n.attributes===null))throw new X("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function wc(n){if(!ct(n))throw new X('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in n))throw new X("Graph.import: serialized edge is missing its source.");if(!("target"in n))throw new X("Graph.import: serialized edge is missing its target.");if("attributes"in n&&(!ct(n.attributes)||n.attributes===null))throw new X("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in n&&typeof n.undirected!="boolean")throw new X("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const Ec=Sl(),Ac=new Set(["directed","undirected","mixed"]),Ea=new Set(["domain","_events","_eventsCount","_maxListeners"]),Sc=[{name:n=>`${n}Edge`,generateKey:!0},{name:n=>`${n}DirectedEdge`,generateKey:!0,type:"directed"},{name:n=>`${n}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:n=>`${n}EdgeWithKey`},{name:n=>`${n}DirectedEdgeWithKey`,type:"directed"},{name:n=>`${n}UndirectedEdgeWithKey`,type:"undirected"}],Cc={allowSelfLoops:!0,multi:!1,type:"mixed"};function Lc(n,t,e){if(e&&!ct(e))throw new X(`Graph.addNode: invalid attributes. Expecting an object but got "${e}"`);if(t=""+t,e=e||{},n._nodes.has(t))throw new he(`Graph.addNode: the "${t}" node already exist in the graph.`);const r=new n.NodeDataClass(t,e);return n._nodes.set(t,r),n.emit("nodeAdded",{key:t,attributes:e}),r}function Aa(n,t,e){const r=new n.NodeDataClass(t,e);return n._nodes.set(t,r),n.emit("nodeAdded",{key:t,attributes:e}),r}function Is(n,t,e,r,i,o,a,s){if(!r&&n.type==="undirected")throw new he(`Graph.${t}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(r&&n.type==="directed")throw new he(`Graph.${t}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(s&&!ct(s))throw new X(`Graph.${t}: invalid attributes. Expecting an object but got "${s}"`);if(o=""+o,a=""+a,s=s||{},!n.allowSelfLoops&&o===a)throw new he(`Graph.${t}: source & target are the same ("${o}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const l=n._nodes.get(o),u=n._nodes.get(a);if(!l)throw new H(`Graph.${t}: source node "${o}" not found.`);if(!u)throw new H(`Graph.${t}: target node "${a}" not found.`);const h={key:null,undirected:r,source:o,target:a,attributes:s};if(e)i=n._edgeKeyGenerator();else if(i=""+i,n._edges.has(i))throw new he(`Graph.${t}: the "${i}" edge already exists in the graph.`);if(!n.multi&&(r?typeof l.undirected[a]!="undefined":typeof l.out[a]!="undefined"))throw new he(`Graph.${t}: an edge linking "${o}" to "${a}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const d=new An(r,i,l,u,s);n._edges.set(i,d);const c=o===a;return r?(l.undirectedDegree++,u.undirectedDegree++,c&&(l.undirectedLoops++,n._undirectedSelfLoopCount++)):(l.outDegree++,u.inDegree++,c&&(l.directedLoops++,n._directedSelfLoopCount++)),n.multi?d.attachMulti():d.attach(),r?n._undirectedSize++:n._directedSize++,h.key=i,n.emit("edgeAdded",h),i}function Tc(n,t,e,r,i,o,a,s,l){if(!r&&n.type==="undirected")throw new he(`Graph.${t}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(r&&n.type==="directed")throw new he(`Graph.${t}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(s){if(l){if(typeof s!="function")throw new X(`Graph.${t}: invalid updater function. Expecting a function but got "${s}"`)}else if(!ct(s))throw new X(`Graph.${t}: invalid attributes. Expecting an object but got "${s}"`)}o=""+o,a=""+a;let u;if(l&&(u=s,s=void 0),!n.allowSelfLoops&&o===a)throw new he(`Graph.${t}: source & target are the same ("${o}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let h=n._nodes.get(o),d=n._nodes.get(a),c,f;if(!e&&(c=n._edges.get(i),c)){if((c.source.key!==o||c.target.key!==a)&&(!r||c.source.key!==a||c.target.key!==o))throw new he(`Graph.${t}: inconsistency detected when attempting to merge the "${i}" edge with "${o}" source & "${a}" target vs. ("${c.source.key}", "${c.target.key}").`);f=c}if(!f&&!n.multi&&h&&(f=r?h.undirected[a]:h.out[a]),f){const T=[f.key,!1,!1,!1];if(l?!u:!s)return T;if(l){const L=f.attributes;f.attributes=u(L),n.emit("edgeAttributesUpdated",{type:"replace",key:f.key,attributes:f.attributes})}else at(f.attributes,s),n.emit("edgeAttributesUpdated",{type:"merge",key:f.key,attributes:f.attributes,data:s});return T}s=s||{},l&&u&&(s=u(s));const p={key:null,undirected:r,source:o,target:a,attributes:s};if(e)i=n._edgeKeyGenerator();else if(i=""+i,n._edges.has(i))throw new he(`Graph.${t}: the "${i}" edge already exists in the graph.`);let w=!1,S=!1;h||(h=Aa(n,o,{}),w=!0,o===a&&(d=h,S=!0)),d||(d=Aa(n,a,{}),S=!0),c=new An(r,i,h,d,s),n._edges.set(i,c);const A=o===a;return r?(h.undirectedDegree++,d.undirectedDegree++,A&&(h.undirectedLoops++,n._undirectedSelfLoopCount++)):(h.outDegree++,d.inDegree++,A&&(h.directedLoops++,n._directedSelfLoopCount++)),n.multi?c.attachMulti():c.attach(),r?n._undirectedSize++:n._directedSize++,p.key=i,n.emit("edgeAdded",p),[i,!0,w,S]}function ln(n,t){n._edges.delete(t.key);const{source:e,target:r,attributes:i}=t,o=t.undirected,a=e===r;o?(e.undirectedDegree--,r.undirectedDegree--,a&&(e.undirectedLoops--,n._undirectedSelfLoopCount--)):(e.outDegree--,r.inDegree--,a&&(e.directedLoops--,n._directedSelfLoopCount--)),n.multi?t.detachMulti():t.detach(),o?n._undirectedSize--:n._directedSize--,n.emit("edgeDropped",{key:t.key,attributes:i,source:e.key,target:r.key,undirected:o})}class _e extends qi.exports.EventEmitter{constructor(t){if(super(),t=at({},Cc,t),typeof t.multi!="boolean")throw new X(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${t.multi}".`);if(!Ac.has(t.type))throw new X(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${t.type}".`);if(typeof t.allowSelfLoops!="boolean")throw new X(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${t.allowSelfLoops}".`);const e=t.type==="mixed"?Os:t.type==="directed"?Ds:Ps;kt(this,"NodeDataClass",e);const r="geid_"+Ec()+"_";let i=0;const o=()=>{let a;do a=r+i++;while(this._edges.has(a));return a};kt(this,"_attributes",{}),kt(this,"_nodes",new Map),kt(this,"_edges",new Map),kt(this,"_directedSize",0),kt(this,"_undirectedSize",0),kt(this,"_directedSelfLoopCount",0),kt(this,"_undirectedSelfLoopCount",0),kt(this,"_edgeKeyGenerator",o),kt(this,"_options",t),Ea.forEach(a=>kt(this,a,this[a])),Wt(this,"order",()=>this._nodes.size),Wt(this,"size",()=>this._edges.size),Wt(this,"directedSize",()=>this._directedSize),Wt(this,"undirectedSize",()=>this._undirectedSize),Wt(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),Wt(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),Wt(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),Wt(this,"multi",this._options.multi),Wt(this,"type",this._options.type),Wt(this,"allowSelfLoops",this._options.allowSelfLoops),Wt(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(t){return this._nodes.has(""+t)}hasDirectedEdge(t,e){if(this.type==="undirected")return!1;if(arguments.length===1){const r=""+t,i=this._edges.get(r);return!!i&&!i.undirected}else if(arguments.length===2){t=""+t,e=""+e;const r=this._nodes.get(t);return r?r.out.hasOwnProperty(e):!1}throw new X(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(t,e){if(this.type==="directed")return!1;if(arguments.length===1){const r=""+t,i=this._edges.get(r);return!!i&&i.undirected}else if(arguments.length===2){t=""+t,e=""+e;const r=this._nodes.get(t);return r?r.undirected.hasOwnProperty(e):!1}throw new X(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(t,e){if(arguments.length===1){const r=""+t;return this._edges.has(r)}else if(arguments.length===2){t=""+t,e=""+e;const r=this._nodes.get(t);return r?typeof r.out!="undefined"&&r.out.hasOwnProperty(e)||typeof r.undirected!="undefined"&&r.undirected.hasOwnProperty(e):!1}throw new X(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(t,e){if(this.type==="undirected")return;if(t=""+t,e=""+e,this.multi)throw new he("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const r=this._nodes.get(t);if(!r)throw new H(`Graph.directedEdge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(e))throw new H(`Graph.directedEdge: could not find the "${e}" target node in the graph.`);const i=r.out&&r.out[e]||void 0;if(i)return i.key}undirectedEdge(t,e){if(this.type==="directed")return;if(t=""+t,e=""+e,this.multi)throw new he("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const r=this._nodes.get(t);if(!r)throw new H(`Graph.undirectedEdge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(e))throw new H(`Graph.undirectedEdge: could not find the "${e}" target node in the graph.`);const i=r.undirected&&r.undirected[e]||void 0;if(i)return i.key}edge(t,e){if(this.multi)throw new he("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");t=""+t,e=""+e;const r=this._nodes.get(t);if(!r)throw new H(`Graph.edge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(e))throw new H(`Graph.edge: could not find the "${e}" target node in the graph.`);const i=r.out&&r.out[e]||r.undirected&&r.undirected[e]||void 0;if(i)return i.key}areDirectedNeighbors(t,e){t=""+t,e=""+e;const r=this._nodes.get(t);if(!r)throw new H(`Graph.areDirectedNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:e in r.in||e in r.out}areOutNeighbors(t,e){t=""+t,e=""+e;const r=this._nodes.get(t);if(!r)throw new H(`Graph.areOutNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:e in r.out}areInNeighbors(t,e){t=""+t,e=""+e;const r=this._nodes.get(t);if(!r)throw new H(`Graph.areInNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:e in r.in}areUndirectedNeighbors(t,e){t=""+t,e=""+e;const r=this._nodes.get(t);if(!r)throw new H(`Graph.areUndirectedNeighbors: could not find the "${t}" node in the graph.`);return this.type==="directed"?!1:e in r.undirected}areNeighbors(t,e){t=""+t,e=""+e;const r=this._nodes.get(t);if(!r)throw new H(`Graph.areNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&(e in r.in||e in r.out)||this.type!=="directed"&&e in r.undirected}areInboundNeighbors(t,e){t=""+t,e=""+e;const r=this._nodes.get(t);if(!r)throw new H(`Graph.areInboundNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&e in r.in||this.type!=="directed"&&e in r.undirected}areOutboundNeighbors(t,e){t=""+t,e=""+e;const r=this._nodes.get(t);if(!r)throw new H(`Graph.areOutboundNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&e in r.out||this.type!=="directed"&&e in r.undirected}inDegree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new H(`Graph.inDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:e.inDegree}outDegree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new H(`Graph.outDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:e.outDegree}directedDegree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new H(`Graph.directedDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:e.inDegree+e.outDegree}undirectedDegree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new H(`Graph.undirectedDegree: could not find the "${t}" node in the graph.`);return this.type==="directed"?0:e.undirectedDegree}inboundDegree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new H(`Graph.inboundDegree: could not find the "${t}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=e.undirectedDegree),this.type!=="undirected"&&(r+=e.inDegree),r}outboundDegree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new H(`Graph.outboundDegree: could not find the "${t}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=e.undirectedDegree),this.type!=="undirected"&&(r+=e.outDegree),r}degree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new H(`Graph.degree: could not find the "${t}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=e.undirectedDegree),this.type!=="undirected"&&(r+=e.inDegree+e.outDegree),r}inDegreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new H(`Graph.inDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:e.inDegree-e.directedLoops}outDegreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new H(`Graph.outDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:e.outDegree-e.directedLoops}directedDegreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new H(`Graph.directedDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:e.inDegree+e.outDegree-e.directedLoops*2}undirectedDegreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new H(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="directed"?0:e.undirectedDegree-e.undirectedLoops*2}inboundDegreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new H(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=e.undirectedDegree,i+=e.undirectedLoops*2),this.type!=="undirected"&&(r+=e.inDegree,i+=e.directedLoops),r-i}outboundDegreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new H(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=e.undirectedDegree,i+=e.undirectedLoops*2),this.type!=="undirected"&&(r+=e.outDegree,i+=e.directedLoops),r-i}degreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new H(`Graph.degreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=e.undirectedDegree,i+=e.undirectedLoops*2),this.type!=="undirected"&&(r+=e.inDegree+e.outDegree,i+=e.directedLoops*2),r-i}source(t){t=""+t;const e=this._edges.get(t);if(!e)throw new H(`Graph.source: could not find the "${t}" edge in the graph.`);return e.source.key}target(t){t=""+t;const e=this._edges.get(t);if(!e)throw new H(`Graph.target: could not find the "${t}" edge in the graph.`);return e.target.key}extremities(t){t=""+t;const e=this._edges.get(t);if(!e)throw new H(`Graph.extremities: could not find the "${t}" edge in the graph.`);return[e.source.key,e.target.key]}opposite(t,e){t=""+t,e=""+e;const r=this._edges.get(e);if(!r)throw new H(`Graph.opposite: could not find the "${e}" edge in the graph.`);const i=r.source.key,o=r.target.key;if(t===i)return o;if(t===o)return i;throw new H(`Graph.opposite: the "${t}" node is not attached to the "${e}" edge (${i}, ${o}).`)}hasExtremity(t,e){t=""+t,e=""+e;const r=this._edges.get(t);if(!r)throw new H(`Graph.hasExtremity: could not find the "${t}" edge in the graph.`);return r.source.key===e||r.target.key===e}isUndirected(t){t=""+t;const e=this._edges.get(t);if(!e)throw new H(`Graph.isUndirected: could not find the "${t}" edge in the graph.`);return e.undirected}isDirected(t){t=""+t;const e=this._edges.get(t);if(!e)throw new H(`Graph.isDirected: could not find the "${t}" edge in the graph.`);return!e.undirected}isSelfLoop(t){t=""+t;const e=this._edges.get(t);if(!e)throw new H(`Graph.isSelfLoop: could not find the "${t}" edge in the graph.`);return e.source===e.target}addNode(t,e){return Lc(this,t,e).key}mergeNode(t,e){if(e&&!ct(e))throw new X(`Graph.mergeNode: invalid attributes. Expecting an object but got "${e}"`);t=""+t,e=e||{};let r=this._nodes.get(t);return r?(e&&(at(r.attributes,e),this.emit("nodeAttributesUpdated",{type:"merge",key:t,attributes:r.attributes,data:e})),[t,!1]):(r=new this.NodeDataClass(t,e),this._nodes.set(t,r),this.emit("nodeAdded",{key:t,attributes:e}),[t,!0])}updateNode(t,e){if(e&&typeof e!="function")throw new X(`Graph.updateNode: invalid updater function. Expecting a function but got "${e}"`);t=""+t;let r=this._nodes.get(t);if(r){if(e){const o=r.attributes;r.attributes=e(o),this.emit("nodeAttributesUpdated",{type:"replace",key:t,attributes:r.attributes})}return[t,!1]}const i=e?e({}):{};return r=new this.NodeDataClass(t,i),this._nodes.set(t,r),this.emit("nodeAdded",{key:t,attributes:i}),[t,!0]}dropNode(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new H(`Graph.dropNode: could not find the "${t}" node in the graph.`);let r;if(this.type!=="undirected"){for(const i in e.out){r=e.out[i];do ln(this,r),r=r.next;while(r)}for(const i in e.in){r=e.in[i];do ln(this,r),r=r.next;while(r)}}if(this.type!=="directed")for(const i in e.undirected){r=e.undirected[i];do ln(this,r),r=r.next;while(r)}this._nodes.delete(t),this.emit("nodeDropped",{key:t,attributes:e.attributes})}dropEdge(t){let e;if(arguments.length>1){const r=""+arguments[0],i=""+arguments[1];if(e=Gt(this,r,i,this.type),!e)throw new H(`Graph.dropEdge: could not find the "${r}" -> "${i}" edge in the graph.`)}else if(t=""+t,e=this._edges.get(t),!e)throw new H(`Graph.dropEdge: could not find the "${t}" edge in the graph.`);return ln(this,e),this}dropDirectedEdge(t,e){if(arguments.length<2)throw new he("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new he("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");t=""+t,e=""+e;const r=Gt(this,t,e,"directed");if(!r)throw new H(`Graph.dropDirectedEdge: could not find a "${t}" -> "${e}" edge in the graph.`);return ln(this,r),this}dropUndirectedEdge(t,e){if(arguments.length<2)throw new he("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new he("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const r=Gt(this,t,e,"undirected");if(!r)throw new H(`Graph.dropUndirectedEdge: could not find a "${t}" -> "${e}" edge in the graph.`);return ln(this,r),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const t=this._nodes.values();let e;for(;e=t.next(),e.done!==!0;)e.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(t){return this._attributes[t]}getAttributes(){return this._attributes}hasAttribute(t){return this._attributes.hasOwnProperty(t)}setAttribute(t,e){return this._attributes[t]=e,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:t}),this}updateAttribute(t,e){if(typeof e!="function")throw new X("Graph.updateAttribute: updater should be a function.");const r=this._attributes[t];return this._attributes[t]=e(r),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:t}),this}removeAttribute(t){return delete this._attributes[t],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:t}),this}replaceAttributes(t){if(!ct(t))throw new X("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=t,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(t){if(!ct(t))throw new X("Graph.mergeAttributes: provided attributes are not a plain object.");return at(this._attributes,t),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:t}),this}updateAttributes(t){if(typeof t!="function")throw new X("Graph.updateAttributes: provided updater is not a function.");return this._attributes=t(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(t,e){if(typeof t!="function")throw new X("Graph.updateEachNodeAttributes: expecting an updater function.");if(e&&!wa(e))throw new X("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._nodes.values();let i,o;for(;i=r.next(),i.done!==!0;)o=i.value,o.attributes=t(o.key,o.attributes);this.emit("eachNodeAttributesUpdated",{hints:e||null})}updateEachEdgeAttributes(t,e){if(typeof t!="function")throw new X("Graph.updateEachEdgeAttributes: expecting an updater function.");if(e&&!wa(e))throw new X("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._edges.values();let i,o,a,s;for(;i=r.next(),i.done!==!0;)o=i.value,a=o.source,s=o.target,o.attributes=t(o.key,o.attributes,a.key,s.key,a.attributes,s.attributes,o.undirected);this.emit("eachEdgeAttributesUpdated",{hints:e||null})}forEachAdjacencyEntry(t){if(typeof t!="function")throw new X("Graph.forEachAdjacencyEntry: expecting a callback.");Oi(!1,!1,!1,this,t)}forEachAdjacencyEntryWithOrphans(t){if(typeof t!="function")throw new X("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");Oi(!1,!1,!0,this,t)}forEachAssymetricAdjacencyEntry(t){if(typeof t!="function")throw new X("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");Oi(!1,!0,!1,this,t)}forEachAssymetricAdjacencyEntryWithOrphans(t){if(typeof t!="function")throw new X("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");Oi(!1,!0,!0,this,t)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):Ts(this._nodes.keys(),this._nodes.size)}forEachNode(t){if(typeof t!="function")throw new X("Graph.forEachNode: expecting a callback.");const e=this._nodes.values();let r,i;for(;r=e.next(),r.done!==!0;)i=r.value,t(i.key,i.attributes)}findNode(t){if(typeof t!="function")throw new X("Graph.findNode: expecting a callback.");const e=this._nodes.values();let r,i;for(;r=e.next(),r.done!==!0;)if(i=r.value,t(i.key,i.attributes))return i.key}mapNodes(t){if(typeof t!="function")throw new X("Graph.mapNode: expecting a callback.");const e=this._nodes.values();let r,i;const o=new Array(this.order);let a=0;for(;r=e.next(),r.done!==!0;)i=r.value,o[a++]=t(i.key,i.attributes);return o}someNode(t){if(typeof t!="function")throw new X("Graph.someNode: expecting a callback.");const e=this._nodes.values();let r,i;for(;r=e.next(),r.done!==!0;)if(i=r.value,t(i.key,i.attributes))return!0;return!1}everyNode(t){if(typeof t!="function")throw new X("Graph.everyNode: expecting a callback.");const e=this._nodes.values();let r,i;for(;r=e.next(),r.done!==!0;)if(i=r.value,!t(i.key,i.attributes))return!1;return!0}filterNodes(t){if(typeof t!="function")throw new X("Graph.filterNodes: expecting a callback.");const e=this._nodes.values();let r,i;const o=[];for(;r=e.next(),r.done!==!0;)i=r.value,t(i.key,i.attributes)&&o.push(i.key);return o}reduceNodes(t,e){if(typeof t!="function")throw new X("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new X("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let r=e;const i=this._nodes.values();let o,a;for(;o=i.next(),o.done!==!0;)a=o.value,r=t(r,a.key,a.attributes);return r}nodeEntries(){const t=this._nodes.values();return new Et(()=>{const e=t.next();if(e.done)return e;const r=e.value;return{value:{node:r.key,attributes:r.attributes},done:!1}})}export(){const t=new Array(this._nodes.size);let e=0;this._nodes.forEach((i,o)=>{t[e++]=vc(o,i)});const r=new Array(this._edges.size);return e=0,this._edges.forEach((i,o)=>{r[e++]=bc(this.type,o,i)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:t,edges:r}}import(t,e=!1){if(t instanceof _e)return t.forEachNode((l,u)=>{e?this.mergeNode(l,u):this.addNode(l,u)}),t.forEachEdge((l,u,h,d,c,f,p)=>{e?p?this.mergeUndirectedEdgeWithKey(l,h,d,u):this.mergeDirectedEdgeWithKey(l,h,d,u):p?this.addUndirectedEdgeWithKey(l,h,d,u):this.addDirectedEdgeWithKey(l,h,d,u)}),this;if(!ct(t))throw new X("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(t.attributes){if(!ct(t.attributes))throw new X("Graph.import: invalid attributes. Expecting a plain object.");e?this.mergeAttributes(t.attributes):this.replaceAttributes(t.attributes)}let r,i,o,a,s;if(t.nodes){if(o=t.nodes,!Array.isArray(o))throw new X("Graph.import: invalid nodes. Expecting an array.");for(r=0,i=o.length;r<i;r++){a=o[r],_c(a);const{key:l,attributes:u}=a;e?this.mergeNode(l,u):this.addNode(l,u)}}if(t.edges){let l=!1;if(this.type==="undirected"&&(l=!0),o=t.edges,!Array.isArray(o))throw new X("Graph.import: invalid edges. Expecting an array.");for(r=0,i=o.length;r<i;r++){s=o[r],wc(s);const{source:u,target:h,attributes:d,undirected:c=l}=s;let f;"key"in s?(f=e?c?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:c?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,f.call(this,s.key,u,h,d)):(f=e?c?this.mergeUndirectedEdge:this.mergeDirectedEdge:c?this.addUndirectedEdge:this.addDirectedEdge,f.call(this,u,h,d))}}return this}nullCopy(t){const e=new _e(at({},this._options,t));return e.replaceAttributes(at({},this.getAttributes())),e}emptyCopy(t){const e=this.nullCopy(t);return this._nodes.forEach((r,i)=>{const o=at({},r.attributes);r=new e.NodeDataClass(i,o),e._nodes.set(i,r)}),e}copy(t){if(t=t||{},typeof t.type=="string"&&t.type!==this.type&&t.type!=="mixed")throw new he(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${t.type}" because this would mean losing information about the current graph.`);if(typeof t.multi=="boolean"&&t.multi!==this.multi&&t.multi!==!0)throw new he("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof t.allowSelfLoops=="boolean"&&t.allowSelfLoops!==this.allowSelfLoops&&t.allowSelfLoops!==!0)throw new he("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const e=this.emptyCopy(t),r=this._edges.values();let i,o;for(;i=r.next(),i.done!==!0;)o=i.value,Is(e,"copy",!1,o.undirected,o.key,o.source.key,o.target.key,at({},o.attributes));return e}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const t={};this._nodes.forEach((o,a)=>{t[a]=o.attributes});const e={},r={};this._edges.forEach((o,a)=>{const s=o.undirected?"--":"->";let l="",u=o.source.key,h=o.target.key,d;o.undirected&&u>h&&(d=u,u=h,h=d);const c=`(${u})${s}(${h})`;a.startsWith("geid_")?this.multi&&(typeof r[c]=="undefined"?r[c]=0:r[c]++,l+=`${r[c]}. `):l+=`[${a}]: `,l+=c,e[l]=o.attributes});const i={};for(const o in this)this.hasOwnProperty(o)&&!Ea.has(o)&&typeof this[o]!="function"&&typeof o!="symbol"&&(i[o]=this[o]);return i.attributes=this._attributes,i.nodes=t,i.edges=e,kt(i,"constructor",this.constructor),i}}typeof Symbol!="undefined"&&(_e.prototype[Symbol.for("nodejs.util.inspect.custom")]=_e.prototype.inspect);Sc.forEach(n=>{["add","merge","update"].forEach(t=>{const e=n.name(t),r=t==="add"?Is:Tc;n.generateKey?_e.prototype[e]=function(i,o,a){return r(this,e,!0,(n.type||this.type)==="undirected",null,i,o,a,t==="update")}:_e.prototype[e]=function(i,o,a,s){return r(this,e,!1,(n.type||this.type)==="undirected",i,o,a,s,t==="update")}})});Il(_e);Vl(_e);lc(_e);mc(_e);class $s extends _e{constructor(t){const e=at({type:"directed"},t);if("multi"in e&&e.multi!==!1)throw new X("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(e.type!=="directed")throw new X('DirectedGraph.from: inconsistent "'+e.type+'" type in given options!');super(e)}}class js extends _e{constructor(t){const e=at({type:"undirected"},t);if("multi"in e&&e.multi!==!1)throw new X("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(e.type!=="undirected")throw new X('UndirectedGraph.from: inconsistent "'+e.type+'" type in given options!');super(e)}}class Us extends _e{constructor(t){const e=at({multi:!0},t);if("multi"in e&&e.multi!==!0)throw new X("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(e)}}class zs extends _e{constructor(t){const e=at({type:"directed",multi:!0},t);if("multi"in e&&e.multi!==!0)throw new X("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(e.type!=="directed")throw new X('MultiDirectedGraph.from: inconsistent "'+e.type+'" type in given options!');super(e)}}class Ms extends _e{constructor(t){const e=at({type:"undirected",multi:!0},t);if("multi"in e&&e.multi!==!0)throw new X("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(e.type!=="undirected")throw new X('MultiUndirectedGraph.from: inconsistent "'+e.type+'" type in given options!');super(e)}}function Sn(n){n.from=function(t,e){const r=at({},t.options,e),i=new n(r);return i.import(t),i}}Sn(_e);Sn($s);Sn(js);Sn(Us);Sn(zs);Sn(Ms);_e.Graph=_e;_e.DirectedGraph=$s;_e.UndirectedGraph=js;_e.MultiGraph=Us;_e.MultiDirectedGraph=zs;_e.MultiUndirectedGraph=Ms;_e.InvalidArgumentsGraphError=X;_e.NotFoundGraphError=H;_e.UsageGraphError=he;function xc(n){return!n||typeof n!="object"||typeof n=="function"||Array.isArray(n)||n instanceof Set||n instanceof Map||n instanceof RegExp||n instanceof Date}function Ns(n,t){n=n||{};var e={};for(var r in t){var i=n[r],o=t[r];if(!xc(o)){e[r]=Ns(i,o);continue}i===void 0?e[r]=o:e[r]=i}return e}var Bs=Ns,Pr=function(t){return t!==null&&typeof t=="object"&&typeof t.addUndirectedEdgeWithKey=="function"&&typeof t.dropNode=="function"&&typeof t.multi=="boolean"},Oc=Bs,Dc=Pr,Pc={dimensions:["x","y"],center:.5,rng:Math.random,scale:1};function Ws(n,t,e){if(!Dc(t))throw new Error("graphology-layout/random: the given graph is not a valid graphology instance.");e=Oc(e,Pc);var r=e.dimensions;if(!Array.isArray(r)||r.length<1)throw new Error("graphology-layout/random: given dimensions are invalid.");var i=r.length,o=e.center,a=e.rng,s=e.scale,l=(o-.5)*s;function u(d){for(var c=0;c<i;c++)d[r[c]]=a()*s+l;return d}if(!n){var h={};return t.forEachNode(function(d){h[d]=u({})}),h}t.updateEachNodeAttributes(function(d,c){return u(c),c},{attributes:r})}var Hs=Ws.bind(null,!1);Hs.assign=Ws.bind(null,!0);var kc=Hs,Cn={},qs=Yi,Fc=qs.ARRAY_BUFFER_SUPPORT,Rc=qs.SYMBOL_SUPPORT,$o=function(t,e){var r,i,o,a,s;if(!t)throw new Error("obliterator/forEach: invalid iterable.");if(typeof e!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(t)||Fc&&ArrayBuffer.isView(t)||typeof t=="string"||t.toString()==="[object Arguments]"){for(o=0,a=t.length;o<a;o++)e(t[o],o);return}if(typeof t.forEach=="function"){t.forEach(e);return}if(Rc&&Symbol.iterator in t&&typeof t.next!="function"&&(t=t[Symbol.iterator]()),typeof t.next=="function"){for(r=t,o=0;s=r.next(),s.done!==!0;)e(s.value,o),o++;return}for(i in t)t.hasOwnProperty(i)&&e(t[i],i)},Vs=Et,Gc=$o;function et(){this.clear()}et.prototype.clear=function(){this.items=[],this.offset=0,this.size=0};et.prototype.enqueue=function(n){return this.items.push(n),++this.size};et.prototype.dequeue=function(){if(!!this.size){var n=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,n}};et.prototype.peek=function(){if(!!this.size)return this.items[this.offset]};et.prototype.forEach=function(n,t){t=arguments.length>1?t:this;for(var e=this.offset,r=0,i=this.items.length;e<i;e++,r++)n.call(t,this.items[e],r,this)};et.prototype.toArray=function(){return this.items.slice(this.offset)};et.prototype.values=function(){var n=this.items,t=this.offset;return new Vs(function(){if(t>=n.length)return{done:!0};var e=n[t];return t++,{value:e,done:!1}})};et.prototype.entries=function(){var n=this.items,t=this.offset,e=0;return new Vs(function(){if(t>=n.length)return{done:!0};var r=n[t];return t++,{value:[e++,r],done:!1}})};typeof Symbol!="undefined"&&(et.prototype[Symbol.iterator]=et.prototype.values);et.prototype.toString=function(){return this.toArray().join(",")};et.prototype.toJSON=function(){return this.toArray()};et.prototype.inspect=function(){var n=this.toArray();return Object.defineProperty(n,"constructor",{value:et,enumerable:!1}),n};typeof Symbol!="undefined"&&(et.prototype[Symbol.for("nodejs.util.inspect.custom")]=et.prototype.inspect);et.from=function(n){var t=new et;return Gc(n,function(e){t.enqueue(e)}),t};et.of=function(){return et.from(arguments)};var Ic=et,Ys=function(t,e){var r=e.length;if(r!==0){var i=t.length;t.length+=r;for(var o=0;o<r;o++)t[i+o]=e[o]}},jo=Pr,$c=Ic,jc=Ys;function Uc(n,t,e){if(!jo(n))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!n.hasNode(t))throw new Error('graphology-shortest-path: the "'+t+'" source node does not exist in the given graph.');if(!n.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" target node does not exist in the given graph.');if(t=""+t,e=""+e,t===e)return[t];var r=n.inboundNeighbors.bind(n),i=n.outboundNeighbors.bind(n),o={},a={};o[t]=null,a[e]=null;var s=[t],l=[e],u,h,d,c,f,p,w,S,A=!1;e:for(;s.length&&l.length;)if(s.length<=l.length){for(u=s,s=[],f=0,w=u.length;f<w;f++)for(h=u[f],d=i(h),p=0,S=d.length;p<S;p++)if(c=d[p],c in o||(s.push(c),o[c]=h),c in a){A=!0;break e}}else for(u=l,l=[],f=0,w=u.length;f<w;f++)for(h=u[f],d=r(h),p=0,S=d.length;p<S;p++)if(c=d[p],c in a||(l.push(c),a[c]=h),c in o){A=!0;break e}if(!A)return null;for(var T=[];c;)T.unshift(c),c=o[c];for(c=a[T[T.length-1]];c;)T.push(c),c=a[c];return T.length?T:null}function zc(n,t){if(!jo(n))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<2)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 2.");if(!n.hasNode(t))throw new Error('graphology-shortest-path: the "'+t+'" source node does not exist in the given graph.');t=""+t;var e={},r={},i,o,a,s,l,u;for(e[t]=!0,r[t]=[t];Object.keys(e).length;){i=e,e={};for(a in i)for(o=n.outboundNeighbors(a),l=0,u=o.length;l<u;l++)s=o[l],r[s]||(r[s]=r[a].concat(s),e[s]=!0)}return r}function Ks(n,t,e){if(!jo(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!t.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');e=""+e;var r=new Set,i={},o=0;i[e]=0;for(var a=[e],s,l,u;a.length!==0;){var h=[];for(s=0,l=a.length;s<l;s++)u=a[s],!r.has(u)&&(r.add(u),jc(h,t[n](u)),i[u]=o);o++,a=h}return i}var Mc=Ks.bind(null,"outboundNeighbors"),Nc=Ks.bind(null,"neighbors");function Bc(n,t){t=""+t;var e=[],r={},i={},o=n.nodes(),a,s,l,u,h,d,c,f,p;for(d=0,f=o.length;d<f;d++)u=o[d],r[u]=[],i[u]=0;var w={};i[t]=1,w[t]=0;for(var S=$c.of(t);S.size;)for(u=S.dequeue(),e.push(u),a=w[u],s=i[u],l=n.outboundNeighbors(u),c=0,p=l.length;c<p;c++)h=l[c],h in w||(S.enqueue(h),w[h]=a+1),w[h]===a+1&&(i[h]+=s,r[h].push(u));return[e,r,i]}Cn.bidirectional=Uc;Cn.singleSource=zc;Cn.singleSourceLength=Mc;Cn.undirectedSingleSourceLength=Nc;Cn.brandes=Bc;var Zs={},Sa=function(){return!0};Zs.edgePathFromNodePath=function(n,t){var e=t.length,r,i,o,a;if(e<2)return i=t[0],a=n.multi?n.findEdge(i,i,Sa):n.edge(i,i),a?[a]:[];e--;var s=new Array(e);for(r=0;r<e;r++){if(i=t[r],o=t[r+1],a=n.multi?n.findOutboundEdge(i,o,Sa):n.edge(i,o),a===void 0)throw new Error("graphology-shortest-path: given path is impossible in given graph.");s[r]=a}return s};var Zi={},qr={};function Wc(n){return typeof n!="number"||isNaN(n)?1:n}function Hc(n,t){var e={},r=function(a){return typeof a=="undefined"?t:a};typeof t=="function"&&(r=t);var i=function(a){return r(a[n])},o=function(){return r(void 0)};return typeof n=="string"?(e.fromAttributes=i,e.fromGraph=function(a,s){return i(a.getNodeAttributes(s))},e.fromEntry=function(a,s){return i(s)}):typeof n=="function"?(e.fromAttributes=function(){throw new Error("graphology-utils/getters/createNodeValueGetter: irrelevant usage.")},e.fromGraph=function(a,s){return r(n(s,a.getNodeAttributes(s)))},e.fromEntry=function(a,s){return r(n(a,s))}):(e.fromAttributes=o,e.fromGraph=o,e.fromEntry=o),e}function Xs(n,t){var e={},r=function(a){return typeof a=="undefined"?t:a};typeof t=="function"&&(r=t);var i=function(a){return r(a[n])},o=function(){return r(void 0)};return typeof n=="string"?(e.fromAttributes=i,e.fromGraph=function(a,s){return i(a.getEdgeAttributes(s))},e.fromEntry=function(a,s){return i(s)},e.fromPartialEntry=e.fromEntry,e.fromMinimalEntry=e.fromEntry):typeof n=="function"?(e.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},e.fromGraph=function(a,s){var l=a.extremities(s);return r(n(s,a.getEdgeAttributes(s),l[0],l[1],a.getNodeAttributes(l[0]),a.getNodeAttributes(l[1]),a.isUndirected(s)))},e.fromEntry=function(a,s,l,u,h,d,c){return r(n(a,s,l,u,h,d,c))},e.fromPartialEntry=function(a,s,l,u){return r(n(a,s,l,u))},e.fromMinimalEntry=function(a,s){return r(n(a,s))}):(e.fromAttributes=o,e.fromGraph=o,e.fromEntry=o,e.fromMinimalEntry=o),e}qr.createNodeValueGetter=Hc;qr.createEdgeValueGetter=Xs;qr.createEdgeWeightGetter=function(n){return Xs(n,Wc)};var ti={},qc=function(n,t){return n<t?-1:n>t?1:0},Vc=function(n,t){return n<t?1:n>t?-1:0};function Yc(n){return function(t,e){return n(e,t)}}function Kc(n){return n===2?function(t,e){return t[0]<e[0]?-1:t[0]>e[0]?1:t[1]<e[1]?-1:t[1]>e[1]?1:0}:function(t,e){for(var r=0;r<n;){if(t[r]<e[r])return-1;if(t[r]>e[r])return 1;r++}return 0}}ti.DEFAULT_COMPARATOR=qc;ti.DEFAULT_REVERSE_COMPARATOR=Vc;ti.reverseComparator=Yc;ti.createTupleComparator=Kc;var ri={},Js={};(function(n){var t=Math.pow(2,8)-1,e=Math.pow(2,16)-1,r=Math.pow(2,32)-1,i=Math.pow(2,7)-1,o=Math.pow(2,15)-1,a=Math.pow(2,31)-1;n.getPointerArray=function(l){var u=l-1;if(u<=t)return Uint8Array;if(u<=e)return Uint16Array;if(u<=r)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")},n.getSignedPointerArray=function(l){var u=l-1;return u<=i?Int8Array:u<=o?Int16Array:u<=a?Int32Array:Float64Array},n.getNumberType=function(l){return l===(l|0)?Math.sign(l)===-1?l<=127&&l>=-128?Int8Array:l<=32767&&l>=-32768?Int16Array:Int32Array:l<=255?Uint8Array:l<=65535?Uint16Array:Uint32Array:Float64Array};var s={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};n.getMinimalRepresentation=function(l,u){var h=null,d=0,c,f,p,w,S;for(w=0,S=l.length;w<S;w++)p=u?u(l[w]):l[w],f=n.getNumberType(p),c=s[f.name],c>d&&(d=c,h=f);return h},n.isTypedArray=function(l){return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView(l)},n.concat=function(){var l=0,u,h,d;for(u=0,d=arguments.length;u<d;u++)l+=arguments[u].length;var c=new arguments[0].constructor(l);for(u=0,h=0;u<d;u++)c.set(arguments[u],h),h+=arguments[u].length;return c},n.indices=function(l){for(var u=n.getPointerArray(l),h=new u(l),d=0;d<l;d++)h[d]=d;return h}})(Js);var Qs=$o,eu=Js;function Zc(n){return Array.isArray(n)||eu.isTypedArray(n)}function Uo(n){if(typeof n.length=="number")return n.length;if(typeof n.size=="number")return n.size}function Xc(n){var t=Uo(n),e=typeof t=="number"?new Array(t):[],r=0;return Qs(n,function(i){e[r++]=i}),e}function Jc(n){var t=Uo(n),e=typeof t=="number"?eu.getPointerArray(t):Array,r=typeof t=="number"?new Array(t):[],i=typeof t=="number"?new e(t):[],o=0;return Qs(n,function(a){r[o]=a,i[o]=o++}),[r,i]}ri.isArrayLike=Zc;ri.guessLength=Uo;ri.toArray=Xc;ri.toArrayWithIndices=Jc;var Ni=$o,tu=ti,er=ri,Xi=tu.DEFAULT_COMPARATOR,zo=tu.reverseComparator;function Mo(n,t,e,r){for(var i=t[r],o,a;r>e;){if(o=r-1>>1,a=t[o],n(i,a)<0){t[r]=a,r=o;continue}break}t[r]=i}function ni(n,t,e){for(var r=t.length,i=e,o=t[e],a=2*e+1,s;a<r;)s=a+1,s<r&&n(t[a],t[s])>=0&&(a=s),t[e]=t[a],e=a,a=2*e+1;t[e]=o,Mo(n,t,i,e)}function ru(n,t,e){t.push(e),Mo(n,t,0,t.length-1)}function No(n,t){var e=t.pop();if(t.length!==0){var r=t[0];return t[0]=e,ni(n,t,0),r}return e}function gn(n,t,e){if(t.length===0)throw new Error("mnemonist/heap.replace: cannot pop an empty heap.");var r=t[0];return t[0]=e,ni(n,t,0),r}function nu(n,t,e){var r;return t.length!==0&&n(t[0],e)<0&&(r=t[0],t[0]=e,e=r,ni(n,t,0)),e}function Wr(n,t){for(var e=t.length,r=e>>1,i=r;--i>=0;)ni(n,t,i)}function Bo(n,t){for(var e=t.length,r=0,i=new Array(e);r<e;)i[r++]=No(n,t);return i}function Qc(n,t,e){arguments.length===2&&(e=t,t=n,n=Xi);var r=zo(n),i,o,a,s=1/0,l;if(t===1){if(er.isArrayLike(e)){for(i=0,o=e.length;i<o;i++)a=e[i],(s===1/0||n(a,s)<0)&&(s=a);return l=new e.constructor(1),l[0]=s,l}return Ni(e,function(h){(s===1/0||n(h,s)<0)&&(s=h)}),[s]}if(er.isArrayLike(e)){if(t>=e.length)return e.slice().sort(n);for(l=e.slice(0,t),Wr(r,l),i=t,o=e.length;i<o;i++)r(e[i],l[0])>0&&gn(r,l,e[i]);return l.sort(n)}var u=er.guessLength(e);return u!==null&&u<t&&(t=u),l=new Array(t),i=0,Ni(e,function(h){i<t?l[i]=h:(i===t&&Wr(r,l),r(h,l[0])>0&&gn(r,l,h)),i++}),l.length>i&&(l.length=i),l.sort(n)}function eh(n,t,e){arguments.length===2&&(e=t,t=n,n=Xi);var r=zo(n),i,o,a,s=-1/0,l;if(t===1){if(er.isArrayLike(e)){for(i=0,o=e.length;i<o;i++)a=e[i],(s===-1/0||n(a,s)>0)&&(s=a);return l=new e.constructor(1),l[0]=s,l}return Ni(e,function(h){(s===-1/0||n(h,s)>0)&&(s=h)}),[s]}if(er.isArrayLike(e)){if(t>=e.length)return e.slice().sort(r);for(l=e.slice(0,t),Wr(n,l),i=t,o=e.length;i<o;i++)n(e[i],l[0])>0&&gn(n,l,e[i]);return l.sort(r)}var u=er.guessLength(e);return u!==null&&u<t&&(t=u),l=new Array(t),i=0,Ni(e,function(h){i<t?l[i]=h:(i===t&&Wr(n,l),n(h,l[0])>0&&gn(n,l,h)),i++}),l.length>i&&(l.length=i),l.sort(r)}function Ie(n){if(this.clear(),this.comparator=n||Xi,typeof this.comparator!="function")throw new Error("mnemonist/Heap.constructor: given comparator should be a function.")}Ie.prototype.clear=function(){this.items=[],this.size=0};Ie.prototype.push=function(n){return ru(this.comparator,this.items,n),++this.size};Ie.prototype.peek=function(){return this.items[0]};Ie.prototype.pop=function(){return this.size!==0&&this.size--,No(this.comparator,this.items)};Ie.prototype.replace=function(n){return gn(this.comparator,this.items,n)};Ie.prototype.pushpop=function(n){return nu(this.comparator,this.items,n)};Ie.prototype.consume=function(){return this.size=0,Bo(this.comparator,this.items)};Ie.prototype.toArray=function(){return Bo(this.comparator,this.items.slice())};Ie.prototype.inspect=function(){var n=this.toArray();return Object.defineProperty(n,"constructor",{value:Ie,enumerable:!1}),n};typeof Symbol!="undefined"&&(Ie.prototype[Symbol.for("nodejs.util.inspect.custom")]=Ie.prototype.inspect);function Bi(n){if(this.clear(),this.comparator=n||Xi,typeof this.comparator!="function")throw new Error("mnemonist/MaxHeap.constructor: given comparator should be a function.");this.comparator=zo(this.comparator)}Bi.prototype=Ie.prototype;Ie.from=function(n,t){var e=new Ie(t),r;return er.isArrayLike(n)?r=n.slice():r=er.toArray(n),Wr(e.comparator,r),e.items=r,e.size=r.length,e};Bi.from=function(n,t){var e=new Bi(t),r;return er.isArrayLike(n)?r=n.slice():r=er.toArray(n),Wr(e.comparator,r),e.items=r,e.size=r.length,e};Ie.siftUp=ni;Ie.siftDown=Mo;Ie.push=ru;Ie.pop=No;Ie.replace=gn;Ie.pushpop=nu;Ie.heapify=Wr;Ie.consume=Bo;Ie.nsmallest=Qc;Ie.nlargest=eh;Ie.MinHeap=Ie;Ie.MaxHeap=Bi;var th=Ie,iu=Pr,Wo=qr.createEdgeWeightGetter,Wi=th,Ho="weight";function Eo(n,t){return n[0]>t[0]?1:n[0]<t[0]?-1:n[1]>t[1]?1:n[1]<t[1]?-1:n[2]>t[2]?1:n[2]<t[2]?-1:0}function rh(n,t){return n[0]>t[0]?1:n[0]<t[0]?-1:n[1]>t[1]?1:n[1]<t[1]?-1:n[2]>t[2]?1:n[2]<t[2]?-1:n[3]>t[3]?1:n[3]<t[3]?-1:0}function nh(n,t,e,r){if(t=""+t,e=""+e,!iu(n))throw new Error("graphology-shortest-path/dijkstra: invalid graphology instance.");if(t&&!n.hasNode(t))throw new Error('graphology-shortest-path/dijkstra: the "'+t+'" source node does not exist in the given graph.');if(e&&!n.hasNode(e))throw new Error('graphology-shortest-path/dijkstra: the "'+e+'" target node does not exist in the given graph.');if(r=Wo(r||Ho).fromMinimalEntry,t===e)return[0,[t]];var i=[{},{}],o=[{},{}],a=[new Wi(Eo),new Wi(Eo)],s=[{},{}];o[0][t]=[t],o[1][e]=[e],s[0][t]=0,s[1][e]=0;var l=[],u=1/0,h=0,d=1,c,f,p,w,S,A,T,L,C;for(a[0].push([0,h++,t]),a[1].push([0,h++,e]);a[0].size&&a[1].size;)if(d=1-d,c=a[d].pop(),w=c[0],S=c[2],!(S in i[d])){if(i[d][S]=w,S in i[1-d])return[u,l];for(f=d===1?n.inboundEdges(S):n.outboundEdges(S),L=0,C=f.length;L<C;L++){if(T=f[L],A=n.opposite(S,T),p=i[d][S]+r(T,n.getEdgeAttributes(T)),A in i[d]&&p<i[d][A])throw Error("graphology-shortest-path/dijkstra: contradictory paths found. Do some of your edges have a negative weight?");(!(A in s[d])||p<s[d][A])&&(s[d][A]=p,a[d].push([p,h++,A]),o[d][A]=o[d][S].concat(A),A in s[0]&&A in s[1]&&(w=s[0][A]+s[1][A],(l.length===0||u>w)&&(u=w,l=o[0][A].concat(o[1][A].slice(0,-1).reverse()))))}}return[1/0,null]}function ih(n,t,e,r,i,o){if(!iu(n))throw new Error("graphology-shortest-path/dijkstra: invalid graphology instance.");if(i&&!n.hasNode(i))throw new Error('graphology-shortest-path/dijkstra: the "'+i+'" target node does not exist in the given graph.');e=Wo(e||Ho).fromMinimalEntry;var a={},s={},l=new Wi(Eo),u=0,h,d,c,f,p,w,S,A,T,L,C;for(A=0,L=t.length;A<L;A++)f=t[A],s[f]=0,l.push([0,u++,f]),o&&(o[f]=[f]);for(;l.size;)if(d=l.pop(),S=d[0],f=d[2],!(f in a)){if(a[f]=S,f===i)break;for(h=n.outboundEdges(f),T=0,C=h.length;T<C;T++)if(w=h[T],p=n.opposite(f,w),c=e(w,n.getEdgeAttributes(w))+a[f],!(r&&c>r)){if(p in a&&c<a[p])throw Error("graphology-shortest-path/dijkstra: contradictory paths found. Do some of your edges have a negative weight?");(!(p in s)||c<s[p])&&(s[p]=c,l.push([c,u++,p]),o&&(o[p]=o[f].concat(p)))}}return a}function oh(n,t,e){var r={};return ih(n,[t],e,0,null,r),r}function ah(n,t,e,r){return nh(n,t,e,r)[1]}function sh(n,t,e){t=""+t,e=Wo(e||Ho).fromMinimalEntry;var r=[],i={},o={},a=n.nodes(),s,l,u,h,d,c,f,p,w,S;for(w=0,S=a.length;w<S;w++)c=a[w],i[c]=[],o[c]=0;var A={};o[t]=1;var T={};T[t]=0;var L=0,C=new Wi(rh);for(C.push([0,L++,t,t]);C.size;)if(l=C.pop(),h=l[0],u=l[2],c=l[3],!(c in A))for(o[c]+=o[u],r.push(c),A[c]=h,s=n.outboundEdges(c),w=0,S=s.length;w<S;w++)p=s[w],f=n.opposite(c,p),d=h+e(p,n.getEdgeAttributes(p)),!(f in A)&&(!(f in T)||d<T[f])?(T[f]=d,C.push([d,L++,c,f]),o[f]=0,i[f]=[c]):d===T[f]&&(o[f]+=o[c],i[f].push(c));return[r,i,o]}Zi.bidirectional=ah;Zi.singleSource=oh;Zi.brandes=sh;var uh=Cn,lh=Zs,Ao=Zi,ch=uh.singleSourceLength,hh=lh.edgePathFromNodePath,ii={};ii.addEdge=function(t,e,r,i,o,a){return e?r==null?t.addUndirectedEdge(i,o,a):t.addUndirectedEdgeWithKey(r,i,o,a):r==null?t.addDirectedEdge(i,o,a):t.addDirectedEdgeWithKey(r,i,o,a)};ii.copyEdge=function(t,e,r,i,o,a){return a=Object.assign({},a),e?r==null?t.addUndirectedEdge(i,o,a):t.addUndirectedEdgeWithKey(r,i,o,a):r==null?t.addDirectedEdge(i,o,a):t.addDirectedEdgeWithKey(r,i,o,a)};ii.mergeEdge=function(t,e,r,i,o,a){return e?r==null?t.mergeUndirectedEdge(i,o,a):t.mergeUndirectedEdgeWithKey(r,i,o,a):r==null?t.mergeDirectedEdge(i,o,a):t.mergeDirectedEdgeWithKey(r,i,o,a)};ii.updateEdge=function(t,e,r,i,o,a){return e?r==null?t.updateUndirectedEdge(i,o,a):t.updateUndirectedEdgeWithKey(r,i,o,a):r==null?t.updateDirectedEdge(i,o,a):t.updateDirectedEdgeWithKey(r,i,o,a)};var dh=Pr,Ca=ii.copyEdge,fh=function(t,e){if(!dh(t))throw new Error("graphology-operators/to-undirected: expecting a valid graphology instance.");typeof e=="function"&&(e={mergeEdge:e}),e=e||{};var r=typeof e.mergeEdge=="function"?e.mergeEdge:null;if(t.type==="undirected")return t.copy();var i=t.emptyCopy({type:"undirected"});return t.forEachUndirectedEdge(function(o,a,s,l){Ca(i,!0,o,s,l,a)}),t.forEachDirectedEdge(function(o,a,s,l){if(!t.multi){var u=i.edge(s,l);if(u){r&&i.replaceEdgeAttributes(u,r(i.getEdgeAttributes(u),a));return}}Ca(i,!0,null,s,l,a)}),i},ou=fh;function ph(n,t,e){var u;const r=e.refs,i=r.map(h=>h.id);let o=[];for(const h of(u=e["path-refs"])!=null?u:[]){const d=!!t.find(c=>c.id===h.id);!n&&d||h.id!==e.page.id&&(i.includes(h.id)||o.push(h))}let a=e.page;o.length>0?a=o[o.length-1]:a=e.page;const s=r.map(h=>({source:a.id,target:h.id})),l=r.flatMap((h,d)=>[...r.slice(0,d),...r.slice(d+1)].map(c=>({source:h.id,target:c.id,undirected:!0})));return s.concat(l)}async function gh(n,t,e,r){if(e.find(o=>o.id===r))return r;if(t.has(r))return t.get(r);const i=await n(r);if(i&&i.page){const o=i.page.id;return t.has(o)?t.get(o):o}}async function qt(n,t,e,r){var u,h;console.log("building graph");const i=new _e;let o=await n();const a=yh(o);o=mh(a,o);const s=o.filter(d=>d["journal?"]);for(const d of o){if(d.properties&&d.properties.graphHide||i.hasNode(d.id)||e().journal!==!0&&d["journal?"])continue;const c=((u=d.properties)==null?void 0:u.icon)||((h=d.properties)==null?void 0:h.pageIcon);i.addNode(d.id,$n(ur({},c?{type:"image",image:`data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='1.1em' x='0.2em' font-size='70'>${c}</text></svg>`}:{type:"circle"}),{label:d.name,aliases:La(d,!0),rawAliases:La(d,!1)}))}const l=await t();return await Promise.all(l.flat().map(async d=>{if(d.refs)for(const c of ph(e().journal===!0,s,d)){const f=await gh(r,a,o,c.target);f&&i.hasNode(c.source)&&i.hasNode(f)&&(i.hasEdge(c.source,f)?i.updateDirectedEdgeAttribute(c.source,f,"weight",p=>p+1):i.addEdge(c.source,f,{weight:1}))}})),console.log("graph complete",i.size),i.getAttribute("isInited")||(kc.assign(i),i.setAttribute("isInited",!0)),i}function yh(n){const t=new Map;for(const e of n)if(e.properties&&e.properties.alias){const r=e.properties.alias.map(i=>n.find(o=>o.name.toUpperCase()===i.toUpperCase()));for(const i of r)i&&t.set(i.id,e.id)}return t}function mh(n,t){return t.filter(e=>!n.has(e.id))}function La(n,t){var e,r;return((r=(e=n.properties)==null?void 0:e.alias)!=null?r:[]).map(i=>t?i.toUpperCase():i)}function Xn(n,t){if(!t)return;const e=t.toUpperCase();return n.findNode((r,i)=>i.label.toUpperCase()===e||i.aliases&&i.aliases.includes(e))}function vh(n){const t=new Map;for(const e of n.nodeEntries())if(t.set(e.attributes.label.toUpperCase(),e.node),e.attributes.aliases)for(const r of e.attributes.aliases)t.set(r.toUpperCase(),e.node);return t}function bh(n,t){const e=ou(n),r=new Map;for(const i of n.nodeEntries()){const o=i.attributes.label.toUpperCase(),a=t.toUpperCase();if(o.includes(a)){const s=ch(e,i.node);for(const[l,u]of Object.entries(s)){const h=r.get(l);(!h||h>u)&&r.set(l,u)}}}return console.log(r),(i,o)=>{const a=r.get(i);return a===void 0?!0:o<=a}}if(Hi.vitest){const{it:n,expect:t,describe:e,vi:r}=Hi.vitest;e("buildGraph",()=>{function i(o){const a=o.toJSON();return a.edges.forEach(s=>{delete s.key}),a.nodes.forEach(s=>{delete s.key,delete s.attributes.x,delete s.attributes.y}),a}n("creates a graph with edges",async()=>{const u=await qt(async()=>[{id:1,"journal?":!1,name:"A"},{id:2,"journal?":!1,name:"B"}],async()=>[[{refs:[{id:2}],"path-refs":[{id:1},{id:2}],page:{id:1}}]],()=>({journal:!1}),async h=>null);t(i(u)).toMatchSnapshot()}),n("increases the weight for multiple edges",async()=>{const u=await qt(async()=>[{id:1,"journal?":!1,name:"A"},{id:2,"journal?":!1,name:"B"}],async()=>[[{refs:[{id:2}],"path-refs":[{id:1},{id:2}],page:{id:1}},{refs:[{id:2}],"path-refs":[{id:1},{id:2}],page:{id:1}}]],()=>({journal:!1}),async h=>null);t(i(u)).toMatchSnapshot()}),n("shows journal pages when requested",async()=>{const u=await qt(async()=>[{id:1,"journal?":!1,name:"A"},{id:2,"journal?":!0,name:"B"}],async()=>[[{refs:[{id:2}],"path-refs":[{id:1},{id:2}],page:{id:1}}]],()=>({journal:!0}),async h=>null);t(i(u)).toMatchSnapshot()}),n("does not shows journal pages when not requested",async()=>{const u=await qt(async()=>[{id:1,"journal?":!1,name:"A"},{id:2,"journal?":!0,name:"B"}],async()=>[[{refs:[{id:2}],"path-refs":[{id:1},{id:2}],page:{id:1}}]],()=>({journal:!1}),async h=>null);t(i(u)).toMatchSnapshot()}),n("links graphs to nested parents",async()=>{const u=await qt(async()=>[{id:1,"journal?":!1,name:"A"},{id:2,"journal?":!1,name:"B"},{id:3,"journal?":!1,name:"C"}],async()=>[[{refs:[{id:2}],"path-refs":[{id:1},{id:2}],page:{id:1}},{refs:[{id:3}],"path-refs":[{id:1},{id:2},{id:3}],page:{id:1}}]],()=>({journal:!1}),async h=>null);t(i(u)).toMatchSnapshot()}),n("handles block references",async()=>{const o=async()=>[{id:1,"journal?":!1,name:"A"},{id:2,"journal?":!1,name:"B"}],a=async()=>[[{refs:[{id:3}],"path-refs":[{id:1},{id:3}],page:{id:1}}]],s=()=>({journal:!1}),l=r.fn().mockImplementationOnce(()=>({page:{id:2}})),u=await qt(o,a,s,l);t(l).toBeCalledWith(3),t(i(u)).toMatchSnapshot()}),n("skips references to journal pages",async()=>{const u=await qt(async()=>[{id:1,"journal?":!1,name:"A"},{id:2,"journal?":!0,name:"B"},{id:3,"journal?":!1,name:"C"}],async()=>[[{refs:[{id:2}],"path-refs":[{id:1},{id:2}],page:{id:1}},{refs:[{id:3}],"path-refs":[{id:1},{id:2},{id:3}],page:{id:1}}]],()=>({journal:!1}),async h=>null);t(i(u)).toMatchSnapshot()}),n("skips pages with graph-hide: true",async()=>{const u=await qt(async()=>[{id:1,"journal?":!1,name:"A"},{id:2,"journal?":!1,name:"B",properties:{graphHide:!0}}],async()=>[[{refs:[{id:2}],"path-refs":[{id:1},{id:2}],page:{id:1}}]],()=>({journal:!1}),async h=>null);t(i(u)).toMatchSnapshot()}),n("merges alias nodes",async()=>{const u=await qt(async()=>[{id:1,"journal?":!1,name:"A",properties:{alias:["B"]}},{id:2,"journal?":!1,name:"B"},{id:3,"journal?":!1,name:"C"}],async()=>[[{refs:[{id:2}],"path-refs":[{id:3},{id:2}],page:{id:3}}]],()=>({journal:!1}),async h=>null);t(i(u)).toMatchSnapshot()}),n("links shared references in a block",async()=>{const u=await qt(async()=>[{id:1,"journal?":!1,name:"A"},{id:2,"journal?":!1,name:"B"},{id:3,"journal?":!1,name:"C"}],async()=>[[{refs:[{id:2},{id:3}],"path-refs":[{id:1},{id:2},{id:3}],page:{id:1}}]],()=>({journal:!1}),async h=>null);t(i(u)).toMatchSnapshot()})})}function _h(n,t,e){const{getGraph:r}=gs("sigma");let{id:i}=t,{attributes:o}=t;return ko(()=>{const a=r();!a||a.hasNode(i)&&a.dropNode(i)}),ps(()=>{const a=r();!a||(a.hasNode(i)?a.updateNodeAttributes(i,()=>o):a.addNode(i,o))}),n.$$set=a=>{"id"in a&&e(0,i=a.id),"attributes"in a&&e(1,o=a.attributes)},[i,o]}class wh extends ei{constructor(t){super(),Qn(this,t,_h,null,wn,{id:0,attributes:1})}}function Eh(n,t,e){const{getGraph:r}=gs("sigma");let{source:i}=t,{target:o}=t,{attributes:a}=t;return Po(()=>{var l;const s=r();s&&(s.hasNode(i)||s.addNode(i,{x:0,y:0}),s.hasNode(o)||s.addNode(o,{x:0,y:0})),(l=r())==null||l.addDirectedEdge(i,o,a)}),ko(()=>{const s=r();s&&s.hasDirectedEdge(i,o)&&s.dropDirectedEdge(i,o)}),n.$$set=s=>{"source"in s&&e(0,i=s.source),"target"in s&&e(1,o=s.target),"attributes"in s&&e(2,a=s.attributes)},[i,o,a]}class Ah extends ei{constructor(t){super(),Qn(this,t,Eh,null,wn,{source:0,target:1,attributes:2})}}const cn=[];function Sh(n,t){return{subscribe:qo(n,t).subscribe}}function qo(n,t=Vt){let e;const r=new Set;function i(s){if(wn(n,s)&&(n=s,e)){const l=!cn.length;for(const u of r)u[1](),cn.push(u,n);if(l){for(let u=0;u<cn.length;u+=2)cn[u][0](cn[u+1]);cn.length=0}}}function o(s){i(s(n))}function a(s,l=Vt){const u=[s,l];return r.add(u),r.size===1&&(e=t(i)||Vt),s(n),()=>{r.delete(u),r.size===0&&(e(),e=null)}}return{set:i,update:o,subscribe:a}}function au(n,t,e){const r=!Array.isArray(n),i=r?[n]:n,o=t.length<2;return Sh(e,a=>{let s=!1;const l=[];let u=0,h=Vt;const d=()=>{if(u)return;h();const f=t(r?l[0]:l,a);o?a(f):h=hs(f)?f:Vt},c=i.map((f,p)=>ds(f,w=>{l[p]=w,u&=~(1<<p),s&&d()},()=>{u|=1<<p}));return s=!0,d(),function(){It(c),h()}})}var Je=(n=>(n.Navigate="Navigate",n.ShortestPath="Shortest Path",n.AdamicAdar="Adamic Adar",n.CoCitation="CoCitation",n))(Je||{});function Ch(){const{subscribe:n,update:t}=qo({uiVisibile:!1,graph:new _e});return{subscribe:n,update:t,visible:e=>{t(r=>$n(ur({},r),{uiVisibile:e}))},reload:()=>{Ne.update(e=>(e.cameraState=void 0,e)),qt(()=>logseq.Editor.getAllPages(),()=>logseq.DB.datascriptQuery("[:find (pull ?b [*]) :in $ :where [?b :block/refs]]"),()=>{var e;return{journal:((e=logseq.settings)==null?void 0:e.journal)===!0}},e=>logseq.Editor.getBlock(e)).then(e=>{t(r=>$n(ur({},r),{graph:e}))})}}}const qn=Ch(),su=au(qn,n=>n.uiVisibile),uu=au(qn,n=>n.graph),Ne=qo({size:"in",mode:"Navigate",directed:!0,bubbleSize:5,filter:!1,filterLength:3,labelThreshold:1,nodesGravity:1,scalingRatio:1,edgeWeightInfluence:.5});var nt=0,qe=1,De=2,Pe=3,lr=4,cr=5,Ge=6,Ta=7,Di=8,xa=9,Lh=0,Th=1,xh=2,ut=0,Ft=1,yt=2,Ur=3,Tr=4,Ye=5,Lt=6,Xt=7,Jt=8,Oa=3,Ht=10,Oh=3,ft=9,go=10,Dh=function(t,e,r){var i,o,a,s,l,u,h,d,c,f,p=e.length,w=r.length,S=t.adjustSizes,A=t.barnesHutTheta*t.barnesHutTheta,T,L,C,E,F,y,_,b=[];for(a=0;a<p;a+=Ht)e[a+lr]=e[a+De],e[a+cr]=e[a+Pe],e[a+De]=0,e[a+Pe]=0;if(t.outboundAttractionDistribution){for(T=0,a=0;a<p;a+=Ht)T+=e[a+Ge];T/=p/Ht}if(t.barnesHutOptimize){var G=1/0,q=-1/0,Q=1/0,ne=-1/0,N,pe,Ce;for(a=0;a<p;a+=Ht)G=Math.min(G,e[a+nt]),q=Math.max(q,e[a+nt]),Q=Math.min(Q,e[a+qe]),ne=Math.max(ne,e[a+qe]);var ie=q-G,P=ne-Q;for(ie>P?(Q-=(ie-P)/2,ne=Q+ie):(G-=(P-ie)/2,q=G+P),b[0+ut]=-1,b[0+Ft]=(G+q)/2,b[0+yt]=(Q+ne)/2,b[0+Ur]=Math.max(q-G,ne-Q),b[0+Tr]=-1,b[0+Ye]=-1,b[0+Lt]=0,b[0+Xt]=0,b[0+Jt]=0,i=1,a=0;a<p;a+=Ht)for(o=0,Ce=Oa;;)if(b[o+Ye]>=0){e[a+nt]<b[o+Ft]?e[a+qe]<b[o+yt]?N=b[o+Ye]:N=b[o+Ye]+ft:e[a+qe]<b[o+yt]?N=b[o+Ye]+ft*2:N=b[o+Ye]+ft*3,b[o+Xt]=(b[o+Xt]*b[o+Lt]+e[a+nt]*e[a+Ge])/(b[o+Lt]+e[a+Ge]),b[o+Jt]=(b[o+Jt]*b[o+Lt]+e[a+qe]*e[a+Ge])/(b[o+Lt]+e[a+Ge]),b[o+Lt]+=e[a+Ge],o=N;continue}else if(b[o+ut]<0){b[o+ut]=a;break}else{if(b[o+Ye]=i*ft,d=b[o+Ur]/2,c=b[o+Ye],b[c+ut]=-1,b[c+Ft]=b[o+Ft]-d,b[c+yt]=b[o+yt]-d,b[c+Ur]=d,b[c+Tr]=c+ft,b[c+Ye]=-1,b[c+Lt]=0,b[c+Xt]=0,b[c+Jt]=0,c+=ft,b[c+ut]=-1,b[c+Ft]=b[o+Ft]-d,b[c+yt]=b[o+yt]+d,b[c+Ur]=d,b[c+Tr]=c+ft,b[c+Ye]=-1,b[c+Lt]=0,b[c+Xt]=0,b[c+Jt]=0,c+=ft,b[c+ut]=-1,b[c+Ft]=b[o+Ft]+d,b[c+yt]=b[o+yt]-d,b[c+Ur]=d,b[c+Tr]=c+ft,b[c+Ye]=-1,b[c+Lt]=0,b[c+Xt]=0,b[c+Jt]=0,c+=ft,b[c+ut]=-1,b[c+Ft]=b[o+Ft]+d,b[c+yt]=b[o+yt]+d,b[c+Ur]=d,b[c+Tr]=b[o+Tr],b[c+Ye]=-1,b[c+Lt]=0,b[c+Xt]=0,b[c+Jt]=0,i+=4,e[b[o+ut]+nt]<b[o+Ft]?e[b[o+ut]+qe]<b[o+yt]?N=b[o+Ye]:N=b[o+Ye]+ft:e[b[o+ut]+qe]<b[o+yt]?N=b[o+Ye]+ft*2:N=b[o+Ye]+ft*3,b[o+Lt]=e[b[o+ut]+Ge],b[o+Xt]=e[b[o+ut]+nt],b[o+Jt]=e[b[o+ut]+qe],b[N+ut]=b[o+ut],b[o+ut]=-1,e[a+nt]<b[o+Ft]?e[a+qe]<b[o+yt]?pe=b[o+Ye]:pe=b[o+Ye]+ft:e[a+qe]<b[o+yt]?pe=b[o+Ye]+ft*2:pe=b[o+Ye]+ft*3,N===pe)if(Ce--){o=N;continue}else{Ce=Oa;break}b[pe+ut]=a;break}}if(t.barnesHutOptimize)for(L=t.scalingRatio,a=0;a<p;a+=Ht)for(o=0;;)if(b[o+Ye]>=0)if(y=Math.pow(e[a+nt]-b[o+Xt],2)+Math.pow(e[a+qe]-b[o+Jt],2),f=b[o+Ur],4*f*f/y<A){if(C=e[a+nt]-b[o+Xt],E=e[a+qe]-b[o+Jt],S===!0?y>0?(_=L*e[a+Ge]*b[o+Lt]/y,e[a+De]+=C*_,e[a+Pe]+=E*_):y<0&&(_=-L*e[a+Ge]*b[o+Lt]/Math.sqrt(y),e[a+De]+=C*_,e[a+Pe]+=E*_):y>0&&(_=L*e[a+Ge]*b[o+Lt]/y,e[a+De]+=C*_,e[a+Pe]+=E*_),o=b[o+Tr],o<0)break;continue}else{o=b[o+Ye];continue}else{if(u=b[o+ut],u>=0&&u!==a&&(C=e[a+nt]-e[u+nt],E=e[a+qe]-e[u+qe],y=C*C+E*E,S===!0?y>0?(_=L*e[a+Ge]*e[u+Ge]/y,e[a+De]+=C*_,e[a+Pe]+=E*_):y<0&&(_=-L*e[a+Ge]*e[u+Ge]/Math.sqrt(y),e[a+De]+=C*_,e[a+Pe]+=E*_):y>0&&(_=L*e[a+Ge]*e[u+Ge]/y,e[a+De]+=C*_,e[a+Pe]+=E*_)),o=b[o+Tr],o<0)break;continue}else for(L=t.scalingRatio,s=0;s<p;s+=Ht)for(l=0;l<s;l+=Ht)C=e[s+nt]-e[l+nt],E=e[s+qe]-e[l+qe],S===!0?(y=Math.sqrt(C*C+E*E)-e[s+Di]-e[l+Di],y>0?(_=L*e[s+Ge]*e[l+Ge]/y/y,e[s+De]+=C*_,e[s+Pe]+=E*_,e[l+De]-=C*_,e[l+Pe]-=E*_):y<0&&(_=100*L*e[s+Ge]*e[l+Ge],e[s+De]+=C*_,e[s+Pe]+=E*_,e[l+De]-=C*_,e[l+Pe]-=E*_)):(y=Math.sqrt(C*C+E*E),y>0&&(_=L*e[s+Ge]*e[l+Ge]/y/y,e[s+De]+=C*_,e[s+Pe]+=E*_,e[l+De]-=C*_,e[l+Pe]-=E*_));for(c=t.gravity/t.scalingRatio,L=t.scalingRatio,a=0;a<p;a+=Ht)_=0,C=e[a+nt],E=e[a+qe],y=Math.sqrt(Math.pow(C,2)+Math.pow(E,2)),t.strongGravityMode?y>0&&(_=L*e[a+Ge]*c):y>0&&(_=L*e[a+Ge]*c/y),e[a+De]-=C*_,e[a+Pe]-=E*_;for(L=1*(t.outboundAttractionDistribution?T:1),h=0;h<w;h+=Oh)s=r[h+Lh],l=r[h+Th],d=r[h+xh],F=Math.pow(d,t.edgeWeightInfluence),C=e[s+nt]-e[l+nt],E=e[s+qe]-e[l+qe],S===!0?(y=Math.sqrt(C*C+E*E)-e[s+Di]-e[l+Di],t.linLogMode?t.outboundAttractionDistribution?y>0&&(_=-L*F*Math.log(1+y)/y/e[s+Ge]):y>0&&(_=-L*F*Math.log(1+y)/y):t.outboundAttractionDistribution?y>0&&(_=-L*F/e[s+Ge]):y>0&&(_=-L*F)):(y=Math.sqrt(Math.pow(C,2)+Math.pow(E,2)),t.linLogMode?t.outboundAttractionDistribution?y>0&&(_=-L*F*Math.log(1+y)/y/e[s+Ge]):y>0&&(_=-L*F*Math.log(1+y)/y):t.outboundAttractionDistribution?(y=1,_=-L*F/e[s+Ge]):(y=1,_=-L*F)),y>0&&(e[s+De]+=C*_,e[s+Pe]+=E*_,e[l+De]-=C*_,e[l+Pe]-=E*_);var j,B,R,k,oe,de;if(S===!0)for(a=0;a<p;a+=Ht)e[a+xa]!==1&&(j=Math.sqrt(Math.pow(e[a+De],2)+Math.pow(e[a+Pe],2)),j>go&&(e[a+De]=e[a+De]*go/j,e[a+Pe]=e[a+Pe]*go/j),B=e[a+Ge]*Math.sqrt((e[a+lr]-e[a+De])*(e[a+lr]-e[a+De])+(e[a+cr]-e[a+Pe])*(e[a+cr]-e[a+Pe])),R=Math.sqrt((e[a+lr]+e[a+De])*(e[a+lr]+e[a+De])+(e[a+cr]+e[a+Pe])*(e[a+cr]+e[a+Pe]))/2,k=.1*Math.log(1+R)/(1+Math.sqrt(B)),oe=e[a+nt]+e[a+De]*(k/t.slowDown),e[a+nt]=oe,de=e[a+qe]+e[a+Pe]*(k/t.slowDown),e[a+qe]=de);else for(a=0;a<p;a+=Ht)e[a+xa]!==1&&(B=e[a+Ge]*Math.sqrt((e[a+lr]-e[a+De])*(e[a+lr]-e[a+De])+(e[a+cr]-e[a+Pe])*(e[a+cr]-e[a+Pe])),R=Math.sqrt((e[a+lr]+e[a+De])*(e[a+lr]+e[a+De])+(e[a+cr]+e[a+Pe])*(e[a+cr]+e[a+Pe]))/2,k=e[a+Ta]*Math.log(1+R)/(1+Math.sqrt(B)),e[a+Ta]=Math.min(1,Math.sqrt(k*(Math.pow(e[a+De],2)+Math.pow(e[a+Pe],2))/(1+Math.sqrt(B)))),oe=e[a+nt]+e[a+De]*(k/t.slowDown),e[a+nt]=oe,de=e[a+qe]+e[a+Pe]*(k/t.slowDown),e[a+qe]=de);return{}},mr={},Jn=10,Da=3;mr.assign=function(n){n=n||{};var t=Array.prototype.slice.call(arguments).slice(1),e,r,i;for(e=0,i=t.length;e<i;e++)if(!!t[e])for(r in t[e])n[r]=t[e][r];return n};mr.validateSettings=function(n){return"linLogMode"in n&&typeof n.linLogMode!="boolean"?{message:"the `linLogMode` setting should be a boolean."}:"outboundAttractionDistribution"in n&&typeof n.outboundAttractionDistribution!="boolean"?{message:"the `outboundAttractionDistribution` setting should be a boolean."}:"adjustSizes"in n&&typeof n.adjustSizes!="boolean"?{message:"the `adjustSizes` setting should be a boolean."}:"edgeWeightInfluence"in n&&typeof n.edgeWeightInfluence!="number"?{message:"the `edgeWeightInfluence` setting should be a number."}:"scalingRatio"in n&&!(typeof n.scalingRatio=="number"&&n.scalingRatio>=0)?{message:"the `scalingRatio` setting should be a number >= 0."}:"strongGravityMode"in n&&typeof n.strongGravityMode!="boolean"?{message:"the `strongGravityMode` setting should be a boolean."}:"gravity"in n&&!(typeof n.gravity=="number"&&n.gravity>=0)?{message:"the `gravity` setting should be a number >= 0."}:"slowDown"in n&&!(typeof n.slowDown=="number"||n.slowDown>=0)?{message:"the `slowDown` setting should be a number >= 0."}:"barnesHutOptimize"in n&&typeof n.barnesHutOptimize!="boolean"?{message:"the `barnesHutOptimize` setting should be a boolean."}:"barnesHutTheta"in n&&!(typeof n.barnesHutTheta=="number"&&n.barnesHutTheta>=0)?{message:"the `barnesHutTheta` setting should be a number >= 0."}:null};mr.graphToByteArrays=function(n,t){var e=n.order,r=n.size,i={},o,a=new Float32Array(e*Jn),s=new Float32Array(r*Da);return o=0,n.forEachNode(function(l,u){i[l]=o,a[o]=u.x,a[o+1]=u.y,a[o+2]=0,a[o+3]=0,a[o+4]=0,a[o+5]=0,a[o+6]=1,a[o+7]=1,a[o+8]=u.size||1,a[o+9]=u.fixed?1:0,o+=Jn}),o=0,n.forEachEdge(function(l,u,h,d,c,f,p){var w=i[h],S=i[d],A=t(l,u,h,d,c,f,p);a[w+6]+=A,a[S+6]+=A,s[o]=w,s[o+1]=S,s[o+2]=A,o+=Da}),{nodes:a,edges:s}};mr.assignLayoutChanges=function(n,t,e){var r=0;n.updateEachNodeAttributes(function(i,o){return o.x=t[r],o.y=t[r+1],r+=Jn,e?e(i,o):o})};mr.readGraphPositions=function(n,t){var e=0;n.forEachNode(function(r,i){t[e]=i.x,t[e+1]=i.y,e+=Jn})};mr.collectLayoutChanges=function(n,t,e){for(var r=n.nodes(),i={},o=0,a=0,s=t.length;o<s;o+=Jn){if(e){var l=Object.assign({},n.getNodeAttributes(r[a]));l.x=t[o],l.y=t[o+1],l=e(r[a],l),i[r[a]]={x:l.x,y:l.y}}else i[r[a]]={x:t[o],y:t[o+1]};a++}return i};mr.createWorker=function(t){var e=window.URL||window.webkitURL,r=t.toString(),i=e.createObjectURL(new Blob(["("+r+").call(this);"],{type:"text/javascript"})),o=new Worker(i);return e.revokeObjectURL(i),o};var lu={linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:1,scalingRatio:1,strongGravityMode:!1,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5},Ph=Pr,kh=qr.createEdgeWeightGetter,Fh=Dh,zn=mr,Rh=lu;function cu(n,t,e){if(!Ph(t))throw new Error("graphology-layout-forceatlas2: the given graph is not a valid graphology instance.");typeof e=="number"&&(e={iterations:e});var r=e.iterations;if(typeof r!="number")throw new Error("graphology-layout-forceatlas2: invalid number of iterations.");if(r<=0)throw new Error("graphology-layout-forceatlas2: you should provide a positive number of iterations.");var i=kh("getEdgeWeight"in e?e.getEdgeWeight:"weight").fromEntry,o=typeof e.outputReducer=="function"?e.outputReducer:null,a=zn.assign({},Rh,e.settings),s=zn.validateSettings(a);if(s)throw new Error("graphology-layout-forceatlas2: "+s.message);var l=zn.graphToByteArrays(t,i),u;for(u=0;u<r;u++)Fh(a,l.nodes,l.edges);if(n){zn.assignLayoutChanges(t,l.nodes,o);return}return zn.collectLayoutChanges(t,l.nodes)}function Gh(n){var t=typeof n=="number"?n:n.order;return{barnesHutOptimize:t>2e3,strongGravityMode:!0,gravity:.05,scalingRatio:10,slowDown:1+Math.log(t)}}var Vo=cu.bind(null,!1);Vo.assign=cu.bind(null,!0);Vo.inferSettings=Gh;var Ih=Vo;function Pa(n,t,e){const r=n.slice();return r[17]=t[e][0],r[18]=t[e][1],r}function ka(n){let t,e,r,i,o,a;return{c(){t=ue("div"),e=ue("label"),e.textContent="n hops",r=Se(),i=ue("input"),ae(e,"for","nhops"),ae(i,"type","range"),ae(i,"min","1"),ae(i,"step","1"),ae(i,"max","10")},m(s,l){Qe(s,t,l),K(t,e),K(t,r),K(t,i),Ke(i,n[0].filterLength),o||(a=[Be(i,"change",n[4]),Be(i,"input",n[4])],o=!0)},p(s,l){l&1&&Ke(i,s[0].filterLength)},d(s){s&&Ze(t),o=!1,It(a)}}}function Fa(n){let t,e,r,i,o,a;return{c(){t=ue("div"),e=ue("label"),e.textContent="n hops",r=Se(),i=ue("input"),ae(e,"for","nhops"),ae(i,"type","range"),ae(i,"min","1"),ae(i,"step","1"),ae(i,"max","10")},m(s,l){Qe(s,t,l),K(t,e),K(t,r),K(t,i),Ke(i,n[0].filterLength),o||(a=[Be(i,"change",n[9]),Be(i,"input",n[9])],o=!0)},p(s,l){l&1&&Ke(i,s[0].filterLength)},d(s){s&&Ze(t),o=!1,It(a)}}}function Ra(n){let t,e=n[18]+"",r,i;return{c(){t=ue("option"),r=Oo(e),t.__value=i=n[18],t.value=t.__value},m(o,a){Qe(o,t,a),K(t,r)},p:Vt,d(o){o&&Ze(t)}}}function Ga(n){let t,e,r,i,o,a,s,l,u,h,d,c,f,p,w,S,A,T,L;return{c(){t=ue("div"),e=ue("input"),r=Se(),i=ue("div"),o=ue("label"),o.textContent="directed?",a=Se(),s=ue("input"),l=Se(),u=ue("div"),h=ue("label"),h.textContent="path a",d=Se(),c=ue("input"),f=Se(),p=ue("div"),w=ue("label"),w.textContent="path b",S=Se(),A=ue("input"),ae(e,"type","submit"),e.value="clear",ae(o,"for","directed"),ae(s,"type","checkbox"),ae(h,"for","path"),ae(c,"type","text"),ae(w,"for","path"),ae(A,"type","text")},m(C,E){Qe(C,t,E),K(t,e),Qe(C,r,E),Qe(C,i,E),K(i,o),K(i,a),K(i,s),s.checked=n[0].directed,Qe(C,l,E),Qe(C,u,E),K(u,h),K(u,d),K(u,c),Ke(c,n[0].pathA),Qe(C,f,E),Qe(C,p,E),K(p,w),K(p,S),K(p,A),Ke(A,n[0].pathB),T||(L=[Be(e,"click",n[1]),Be(s,"change",n[12]),Be(c,"input",n[13]),Be(A,"input",n[14])],T=!0)},p(C,E){E&1&&(s.checked=C[0].directed),E&1&&c.value!==C[0].pathA&&Ke(c,C[0].pathA),E&1&&A.value!==C[0].pathB&&Ke(A,C[0].pathB)},d(C){C&&Ze(t),C&&Ze(r),C&&Ze(i),C&&Ze(l),C&&Ze(u),C&&Ze(f),C&&Ze(p),T=!1,It(L)}}}function Ia(n){let t,e,r,i,o,a,s,l,u,h,d;return{c(){t=ue("div"),e=ue("label"),e.textContent="path a",r=Se(),i=ue("input"),o=Se(),a=ue("div"),s=ue("label"),s.textContent="bubble size",l=Se(),u=ue("input"),ae(e,"for","path"),ae(i,"type","text"),ae(s,"for","bubbleSize"),ae(u,"type","range"),ae(u,"min","0.01"),ae(u,"step","0.1"),ae(u,"max","10")},m(c,f){Qe(c,t,f),K(t,e),K(t,r),K(t,i),Ke(i,n[0].pathA),Qe(c,o,f),Qe(c,a,f),K(a,s),K(a,l),K(a,u),Ke(u,n[0].bubbleSize),h||(d=[Be(i,"input",n[15]),Be(u,"change",n[16]),Be(u,"input",n[16])],h=!0)},p(c,f){f&1&&i.value!==c[0].pathA&&Ke(i,c[0].pathA),f&1&&Ke(u,c[0].bubbleSize)},d(c){c&&Ze(t),c&&Ze(o),c&&Ze(a),h=!1,It(d)}}}function $h(n){let t,e,r,i,o,a,s,l,u,h,d,c,f,p,w,S,A,T,L,C,E,F,y,_,b,G,q,Q,ne,N,pe,Ce,ie,P,j,B,R,k,oe,de,ye,Le,ve,V,gt,$e,ze,we,Ae=n[0].filter&&ka(n),xe=n[0].filter&&Fa(n),me=Object.entries(Je),re=[];for(let $=0;$<me.length;$+=1)re[$]=Ra(Pa(n,me,$));let se=n[0].mode===Je.ShortestPath&&Ga(n),Oe=(n[0].mode===Je.AdamicAdar||n[0].mode===Je.CoCitation)&&Ia(n);return{c(){t=ue("div"),e=ue("div"),r=ue("label"),r.textContent="search",i=Se(),o=ue("input"),a=Se(),s=ue("div"),l=ue("label"),l.textContent="filter",u=Se(),h=ue("input"),d=Se(),Ae&&Ae.c(),c=Se(),f=ue("div"),p=ue("label"),p.textContent="label threshold",w=Se(),S=ue("input"),A=Se(),T=ue("div"),L=ue("label"),L.textContent="nodes gravity",C=Se(),E=ue("input"),F=Se(),y=ue("div"),_=ue("label"),_.textContent="scaling ratio",b=Se(),G=ue("input"),q=Se(),Q=ue("div"),ne=ue("label"),ne.textContent="edge weight influence",N=Se(),pe=ue("input"),Ce=Se(),xe&&xe.c(),ie=Se(),P=ue("div"),j=ue("label"),j.textContent="size",B=Se(),R=ue("select"),k=ue("option"),k.textContent="inbound links",oe=ue("option"),oe.textContent="outbound links",de=Se(),ye=ue("hr"),Le=Se(),ve=ue("div"),V=ue("select");for(let $=0;$<re.length;$+=1)re[$].c();gt=Se(),se&&se.c(),$e=Se(),Oe&&Oe.c(),ae(r,"for","search"),ae(o,"type","text"),ae(l,"for","filter"),ae(h,"type","checkbox"),ae(p,"for","labelThreshold"),ae(S,"type","range"),ae(S,"min","0"),ae(S,"step","0.05"),ae(S,"max","10"),ae(L,"for","gravity"),ae(E,"type","range"),ae(E,"min","0.01"),ae(E,"step","0.01"),ae(E,"max","20"),ae(_,"for","scalingRatio"),ae(G,"type","range"),ae(G,"min","0.001"),ae(G,"step","0.0001"),ae(G,"max","1.5"),ae(ne,"for","edgeWeightInfluence"),ae(pe,"type","range"),ae(pe,"min","-2"),ae(pe,"step","0.1"),ae(pe,"max","2"),ae(j,"for","size"),k.selected=!0,k.__value="in",k.value=k.__value,oe.__value="out",oe.value=oe.__value,ae(R,"id","size"),ae(R,"name","size"),n[0].size===void 0&&Yn(()=>n[10].call(R)),n[0].mode===void 0&&Yn(()=>n[11].call(V)),ae(t,"class","settings svelte-dvpvvc")},m($,U){Qe($,t,U),K(t,e),K(e,r),K(e,i),K(e,o),Ke(o,n[0].search),K(t,a),K(t,s),K(s,l),K(s,u),K(s,h),h.checked=n[0].filter,K(t,d),Ae&&Ae.m(t,null),K(t,c),K(t,f),K(f,p),K(f,w),K(f,S),Ke(S,n[0].labelThreshold),K(t,A),K(t,T),K(T,L),K(T,C),K(T,E),Ke(E,n[0].nodesGravity),K(t,F),K(t,y),K(y,_),K(y,b),K(y,G),Ke(G,n[0].scalingRatio),K(t,q),K(t,Q),K(Q,ne),K(Q,N),K(Q,pe),Ke(pe,n[0].edgeWeightInfluence),K(t,Ce),xe&&xe.m(t,null),K(t,ie),K(t,P),K(P,j),K(P,B),K(P,R),K(R,k),K(R,oe),Ti(R,n[0].size),K(t,de),K(t,ye),K(t,Le),K(t,ve),K(ve,V);for(let O=0;O<re.length;O+=1)re[O].m(V,null);Ti(V,n[0].mode),K(t,gt),se&&se.m(t,null),K(t,$e),Oe&&Oe.m(t,null),ze||(we=[Be(o,"input",n[2]),Be(h,"change",n[3]),Be(S,"change",n[5]),Be(S,"input",n[5]),Be(E,"change",n[6]),Be(E,"input",n[6]),Be(G,"change",n[7]),Be(G,"input",n[7]),Be(pe,"change",n[8]),Be(pe,"input",n[8]),Be(R,"change",n[10]),Be(V,"change",n[11])],ze=!0)},p($,[U]){if(U&1&&o.value!==$[0].search&&Ke(o,$[0].search),U&1&&(h.checked=$[0].filter),$[0].filter?Ae?Ae.p($,U):(Ae=ka($),Ae.c(),Ae.m(t,c)):Ae&&(Ae.d(1),Ae=null),U&1&&Ke(S,$[0].labelThreshold),U&1&&Ke(E,$[0].nodesGravity),U&1&&Ke(G,$[0].scalingRatio),U&1&&Ke(pe,$[0].edgeWeightInfluence),$[0].filter?xe?xe.p($,U):(xe=Fa($),xe.c(),xe.m(t,ie)):xe&&(xe.d(1),xe=null),U&1&&Ti(R,$[0].size),U&0){me=Object.entries(Je);let O;for(O=0;O<me.length;O+=1){const Ee=Pa($,me,O);re[O]?re[O].p(Ee,U):(re[O]=Ra(Ee),re[O].c(),re[O].m(V,null))}for(;O<re.length;O+=1)re[O].d(1);re.length=me.length}U&1&&Ti(V,$[0].mode),$[0].mode===Je.ShortestPath?se?se.p($,U):(se=Ga($),se.c(),se.m(t,$e)):se&&(se.d(1),se=null),$[0].mode===Je.AdamicAdar||$[0].mode===Je.CoCitation?Oe?Oe.p($,U):(Oe=Ia($),Oe.c(),Oe.m(t,null)):Oe&&(Oe.d(1),Oe=null)},i:Vt,o:Vt,d($){$&&Ze(t),Ae&&Ae.d(),xe&&xe.d(),tl(re,$),se&&se.d(),Oe&&Oe.d(),ze=!1,It(we)}}}function jh(n,t,e){let r;Br(n,Ne,C=>e(0,r=C));function i(){Mr(Ne,r.pathA=void 0,r),Mr(Ne,r.pathB=void 0,r)}function o(){r.search=this.value,Ne.set(r)}function a(){r.filter=this.checked,Ne.set(r)}function s(){r.filterLength=jr(this.value),Ne.set(r)}function l(){r.labelThreshold=jr(this.value),Ne.set(r)}function u(){r.nodesGravity=jr(this.value),Ne.set(r)}function h(){r.scalingRatio=jr(this.value),Ne.set(r)}function d(){r.edgeWeightInfluence=jr(this.value),Ne.set(r)}function c(){r.filterLength=jr(this.value),Ne.set(r)}function f(){r.size=fa(this),Ne.set(r)}function p(){r.mode=fa(this),Ne.set(r)}function w(){r.directed=this.checked,Ne.set(r)}function S(){r.pathA=this.value,Ne.set(r)}function A(){r.pathB=this.value,Ne.set(r)}function T(){r.pathA=this.value,Ne.set(r)}function L(){r.bubbleSize=jr(this.value),Ne.set(r)}return[r,i,o,a,s,l,u,h,d,c,f,p,w,S,A,T,L]}class Uh extends ei{constructor(t){super(),Qn(this,t,jh,$h,wn,{})}}var Qt={},Yo={},Ji={},hu={},ge={},mt={};Object.defineProperty(mt,"__esModule",{value:!0});mt.multiplyVec2=mt.multiply=mt.translate=mt.rotate=mt.scale=mt.identity=void 0;function zh(){return Float32Array.of(1,0,0,0,1,0,0,0,1)}mt.identity=zh;function Mh(n,t,e){return n[0]=t,n[4]=typeof e=="number"?e:t,n}mt.scale=Mh;function Nh(n,t){var e=Math.sin(t),r=Math.cos(t);return n[0]=r,n[1]=e,n[3]=-e,n[4]=r,n}mt.rotate=Nh;function Bh(n,t,e){return n[6]=t,n[7]=e,n}mt.translate=Bh;function Wh(n,t){var e=n[0],r=n[1],i=n[2],o=n[3],a=n[4],s=n[5],l=n[6],u=n[7],h=n[8],d=t[0],c=t[1],f=t[2],p=t[3],w=t[4],S=t[5],A=t[6],T=t[7],L=t[8];return n[0]=d*e+c*o+f*l,n[1]=d*r+c*a+f*u,n[2]=d*i+c*s+f*h,n[3]=p*e+w*o+S*l,n[4]=p*r+w*a+S*u,n[5]=p*i+w*s+S*h,n[6]=A*e+T*o+L*l,n[7]=A*r+T*a+L*u,n[8]=A*i+T*s+L*h,n}mt.multiply=Wh;function Hh(n,t,e){e===void 0&&(e=1);var r=n[0],i=n[1],o=n[3],a=n[4],s=n[6],l=n[7],u=t.x,h=t.y;return{x:u*r+h*o+s*e,y:u*i+h*a+l*e}}mt.multiplyVec2=Hh;var Qi={};Object.defineProperty(Qi,"__esModule",{value:!0});Qi.HTML_COLORS=void 0;Qi.HTML_COLORS={black:"#000000",silver:"#C0C0C0",gray:"#808080",grey:"#808080",white:"#FFFFFF",maroon:"#800000",red:"#FF0000",purple:"#800080",fuchsia:"#FF00FF",green:"#008000",lime:"#00FF00",olive:"#808000",yellow:"#FFFF00",navy:"#000080",blue:"#0000FF",teal:"#008080",aqua:"#00FFFF",darkblue:"#00008B",mediumblue:"#0000CD",darkgreen:"#006400",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",springgreen:"#00FF7F",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",rebeccapurple:"#663399",mediumaquamarine:"#66CDAA",dimgray:"#696969",dimgrey:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",slategrey:"#708090",lightslategray:"#778899",lightslategrey:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370DB",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",palevioletred:"#DB7093",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",lightyellow:"#FFFFE0",ivory:"#FFFFF0"};var $a=W&&W.__read||function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var r=e.call(n),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},qh=W&&W.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ge,"__esModule",{value:!0});ge.validateGraph=ge.canUse32BitsIndices=ge.extractPixel=ge.getMatrixImpact=ge.matrixFromCamera=ge.getCorrectionRatio=ge.floatColor=ge.floatArrayColor=ge.parseColor=ge.zIndexOrdering=ge.createNormalizationFunction=ge.graphExtent=ge.getPixelRatio=ge.createElement=ge.cancelFrame=ge.requestFrame=ge.assignDeep=ge.assign=ge.isPlainObject=void 0;var Vh=qh(Pr),Me=mt,Ui=Qi;function du(n){return typeof n=="object"&&n!==null&&n.constructor===Object}ge.isPlainObject=du;function Yh(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];n=n||{};for(var r=0,i=t.length;r<i;r++){var o=t[r];!o||Object.assign(n,o)}return n}ge.assign=Yh;function fu(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];n=n||{};for(var r=0,i=t.length;r<i;r++){var o=t[r];if(!!o)for(var a in o)du(o[a])?n[a]=fu(n[a],o[a]):n[a]=o[a]}return n}ge.assignDeep=fu;ge.requestFrame=typeof requestAnimationFrame!="undefined"?function(n){return requestAnimationFrame(n)}:function(n){return setTimeout(n,0)};ge.cancelFrame=typeof cancelAnimationFrame!="undefined"?function(n){return cancelAnimationFrame(n)}:function(n){return clearTimeout(n)};function Kh(n,t,e){var r=document.createElement(n);if(t)for(var i in t)r.style[i]=t[i];if(e)for(var i in e)r.setAttribute(i,e[i]);return r}ge.createElement=Kh;function Zh(){return typeof window.devicePixelRatio!="undefined"?window.devicePixelRatio:1}ge.getPixelRatio=Zh;function Xh(n){if(!n.order)return{x:[0,1],y:[0,1]};var t=1/0,e=-1/0,r=1/0,i=-1/0;return n.forEachNode(function(o,a){var s=a.x,l=a.y;s<t&&(t=s),s>e&&(e=s),l<r&&(r=l),l>i&&(i=l)}),{x:[t,e],y:[r,i]}}ge.graphExtent=Xh;function Jh(n){var t=$a(n.x,2),e=t[0],r=t[1],i=$a(n.y,2),o=i[0],a=i[1],s=Math.max(r-e,a-o),l=(r+e)/2,u=(a+o)/2;(s===0||Math.abs(s)===1/0||isNaN(s))&&(s=1),isNaN(l)&&(l=0),isNaN(u)&&(u=0);var h=function(d){return{x:.5+(d.x-l)/s,y:.5+(d.y-u)/s}};return h.applyTo=function(d){d.x=.5+(d.x-l)/s,d.y=.5+(d.y-u)/s},h.inverse=function(d){return{x:l+s*(d.x-.5),y:u+s*(d.y-.5)}},h.ratio=s,h}ge.createNormalizationFunction=Jh;function Qh(n,t,e){return e.sort(function(r,i){var o=t(r)||0,a=t(i)||0;return o<a?-1:o>a?1:0})}ge.zIndexOrdering=Qh;var pu=new Int8Array(4),ed=new Int32Array(pu.buffer,0,1),td=new Float32Array(pu.buffer,0,1),rd=/^\s*rgba?\s*\(/,nd=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)(?:\s*,\s*(.*)?)?\)\s*$/;function Ko(n){var t=0,e=0,r=0,i=1;if(n[0]==="#")n.length===4?(t=parseInt(n.charAt(1)+n.charAt(1),16),e=parseInt(n.charAt(2)+n.charAt(2),16),r=parseInt(n.charAt(3)+n.charAt(3),16)):(t=parseInt(n.charAt(1)+n.charAt(2),16),e=parseInt(n.charAt(3)+n.charAt(4),16),r=parseInt(n.charAt(5)+n.charAt(6),16));else if(rd.test(n)){var o=n.match(nd);o&&(t=+o[1],e=+o[2],r=+o[3],o[4]&&(i=+o[4]))}return{r:t,g:e,b:r,a:i}}ge.parseColor=Ko;var pn={};for(var Pi in Ui.HTML_COLORS)pn[Pi]=gu(Ui.HTML_COLORS[Pi]),pn[Ui.HTML_COLORS[Pi]]=pn[Pi];function id(n){n=Ui.HTML_COLORS[n]||n;var t=Ko(n),e=t.r,r=t.g,i=t.b,o=t.a;return new Float32Array([e/255,r/255,i/255,o])}ge.floatArrayColor=id;function gu(n){if(typeof pn[n]!="undefined")return pn[n];var t=Ko(n),e=t.r,r=t.g,i=t.b,o=t.a;o=o*255|0,ed[0]=(o<<24|i<<16|r<<8|e)&4278190079;var a=td[0];return pn[n]=a,a}ge.floatColor=gu;function yu(n,t){var e=n.height/n.width,r=t.height/t.width;return e<1&&r>1||e>1&&r<1?1:Math.min(Math.max(r,1/r),Math.max(1/e,e))}ge.getCorrectionRatio=yu;function od(n,t,e,r,i){var o=n.angle,a=n.ratio,s=n.x,l=n.y,u=t.width,h=t.height,d=(0,Me.identity)(),c=Math.min(u,h)-2*r,f=yu(t,e);return i?((0,Me.multiply)(d,(0,Me.translate)((0,Me.identity)(),s,l)),(0,Me.multiply)(d,(0,Me.scale)((0,Me.identity)(),a)),(0,Me.multiply)(d,(0,Me.rotate)((0,Me.identity)(),o)),(0,Me.multiply)(d,(0,Me.scale)((0,Me.identity)(),u/c/2/f,h/c/2/f))):((0,Me.multiply)(d,(0,Me.scale)((0,Me.identity)(),2*(c/u)*f,2*(c/h)*f)),(0,Me.multiply)(d,(0,Me.rotate)((0,Me.identity)(),-o)),(0,Me.multiply)(d,(0,Me.scale)((0,Me.identity)(),1/a)),(0,Me.multiply)(d,(0,Me.translate)((0,Me.identity)(),-s,-l))),d}ge.matrixFromCamera=od;function ad(n,t,e){var r=(0,Me.multiplyVec2)(n,{x:Math.cos(t.angle),y:Math.sin(t.angle)},0),i=r.x,o=r.y;return 1/Math.sqrt(Math.pow(i,2)+Math.pow(o,2))/e.width}ge.getMatrixImpact=ad;function sd(n,t,e,r){var i=r||new Uint8Array(4);return n.readPixels(t,e,1,1,n.RGBA,n.UNSIGNED_BYTE,i),i}ge.extractPixel=sd;function ud(n){var t=typeof WebGL2RenderingContext!="undefined"&&n instanceof WebGL2RenderingContext;return t||!!n.getExtension("OES_element_index_uint")}ge.canUse32BitsIndices=ud;function ld(n){if(!(0,Vh.default)(n))throw new Error("Sigma: invalid graph instance.");n.forEachNode(function(t,e){if(!Number.isFinite(e.x)||!Number.isFinite(e.y))throw new Error("Sigma: Coordinates of node ".concat(t," are invalid. A node must have a numeric 'x' and 'y' attribute."))})}ge.validateGraph=ld;var Zo={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.cubicInOut=n.cubicOut=n.cubicIn=n.quadraticInOut=n.quadraticOut=n.quadraticIn=n.linear=void 0;var t=function(u){return u};n.linear=t;var e=function(u){return u*u};n.quadraticIn=e;var r=function(u){return u*(2-u)};n.quadraticOut=r;var i=function(u){return(u*=2)<1?.5*u*u:-.5*(--u*(u-2)-1)};n.quadraticInOut=i;var o=function(u){return u*u*u};n.cubicIn=o;var a=function(u){return--u*u*u+1};n.cubicOut=a;var s=function(u){return(u*=2)<1?.5*u*u*u:.5*((u-=2)*u*u+2)};n.cubicInOut=s;var l={linear:n.linear,quadraticIn:n.quadraticIn,quadraticOut:n.quadraticOut,quadraticInOut:n.quadraticInOut,cubicIn:n.cubicIn,cubicOut:n.cubicOut,cubicInOut:n.cubicInOut};n.default=l})(Zo);(function(n){var t=W&&W.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(n,"__esModule",{value:!0}),n.animateNodes=n.ANIMATE_DEFAULTS=void 0;var e=ge,r=t(Zo);n.ANIMATE_DEFAULTS={easing:"quadraticInOut",duration:150};function i(o,a,s,l){var u=Object.assign({},n.ANIMATE_DEFAULTS,s),h=typeof u.easing=="function"?u.easing:r.default[u.easing],d=Date.now(),c={};for(var f in a){var p=a[f];c[f]={};for(var w in p)c[f][w]=o.getNodeAttribute(f,w)}var S=null,A=function(){S=null;var T=(Date.now()-d)/u.duration;if(T>=1){for(var L in a){var C=a[L];for(var E in C)o.setNodeAttribute(L,E,C[E])}typeof l=="function"&&l();return}T=h(T);for(var L in a){var C=a[L],F=c[L];for(var E in C)o.setNodeAttribute(L,E,C[E]*T+F[E]*(1-T))}S=(0,e.requestFrame)(A)};return A(),function(){S&&(0,e.cancelFrame)(S)}}n.animateNodes=i})(hu);var Ln={},cd=W&&W.__extends||function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();Object.defineProperty(Ln,"__esModule",{value:!0});Ln.TypedEventEmitter=void 0;var hd=qi.exports,dd=function(n){cd(t,n);function t(){var e=n.call(this)||this;return e.rawEmitter=e,e}return t}(hd.EventEmitter);Ln.TypedEventEmitter=dd;var fd=W&&W.__extends||function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),pd=W&&W.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ji,"__esModule",{value:!0});var gd=hu,yd=pd(Zo),yo=ge,md=Ln,ki=1.5,vd=function(n){fd(t,n);function t(){var e=n.call(this)||this;return e.x=.5,e.y=.5,e.angle=0,e.ratio=1,e.minRatio=null,e.maxRatio=null,e.nextFrame=null,e.previousState=null,e.enabled=!0,e.previousState=e.getState(),e}return t.from=function(e){var r=new t;return r.setState(e)},t.prototype.enable=function(){return this.enabled=!0,this},t.prototype.disable=function(){return this.enabled=!1,this},t.prototype.getState=function(){return{x:this.x,y:this.y,angle:this.angle,ratio:this.ratio}},t.prototype.hasState=function(e){return this.x===e.x&&this.y===e.y&&this.ratio===e.ratio&&this.angle===e.angle},t.prototype.getPreviousState=function(){var e=this.previousState;return e?{x:e.x,y:e.y,angle:e.angle,ratio:e.ratio}:null},t.prototype.getBoundedRatio=function(e){var r=e;return typeof this.minRatio=="number"&&(r=Math.max(r,this.minRatio)),typeof this.maxRatio=="number"&&(r=Math.min(r,this.maxRatio)),r},t.prototype.validateState=function(e){var r={};return typeof e.x=="number"&&(r.x=e.x),typeof e.y=="number"&&(r.y=e.y),typeof e.angle=="number"&&(r.angle=e.angle),typeof e.ratio=="number"&&(r.ratio=this.getBoundedRatio(e.ratio)),r},t.prototype.isAnimated=function(){return!!this.nextFrame},t.prototype.setState=function(e){if(!this.enabled)return this;this.previousState=this.getState();var r=this.validateState(e);return typeof r.x=="number"&&(this.x=r.x),typeof r.y=="number"&&(this.y=r.y),typeof r.angle=="number"&&(this.angle=r.angle),typeof r.ratio=="number"&&(this.ratio=r.ratio),this.hasState(this.previousState)||this.emit("updated",this.getState()),this},t.prototype.animate=function(e,r,i){var o=this;if(!!this.enabled){var a=Object.assign({},gd.ANIMATE_DEFAULTS,r),s=this.validateState(e),l=typeof a.easing=="function"?a.easing:yd.default[a.easing],u=Date.now(),h=this.getState(),d=function(){var c=(Date.now()-u)/a.duration;if(c>=1){o.nextFrame=null,o.setState(s),o.animationCallback&&(o.animationCallback.call(null),o.animationCallback=void 0);return}var f=l(c),p={};typeof s.x=="number"&&(p.x=h.x+(s.x-h.x)*f),typeof s.y=="number"&&(p.y=h.y+(s.y-h.y)*f),typeof s.angle=="number"&&(p.angle=h.angle+(s.angle-h.angle)*f),typeof s.ratio=="number"&&(p.ratio=h.ratio+(s.ratio-h.ratio)*f),o.setState(p),o.nextFrame=(0,yo.requestFrame)(d)};this.nextFrame?((0,yo.cancelFrame)(this.nextFrame),this.animationCallback&&this.animationCallback.call(null),this.nextFrame=(0,yo.requestFrame)(d)):d(),this.animationCallback=i}},t.prototype.animatedZoom=function(e){if(!e)this.animate({ratio:this.ratio/ki});else{if(typeof e=="number")return this.animate({ratio:this.ratio/e});this.animate({ratio:this.ratio/(e.factor||ki)},e)}},t.prototype.animatedUnzoom=function(e){if(!e)this.animate({ratio:this.ratio*ki});else{if(typeof e=="number")return this.animate({ratio:this.ratio*e});this.animate({ratio:this.ratio*(e.factor||ki)},e)}},t.prototype.animatedReset=function(e){this.animate({x:.5,y:.5,ratio:1,angle:0},e)},t.prototype.copy=function(){return t.from(this.getState())},t}(md.TypedEventEmitter);Ji.default=vd;var eo={},pt={},bd=W&&W.__extends||function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),yn=W&&W.__assign||function(){return yn=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},yn.apply(this,arguments)};Object.defineProperty(pt,"__esModule",{value:!0});pt.getWheelDelta=pt.getTouchCoords=pt.getTouchesArray=pt.getWheelCoords=pt.getMouseCoords=pt.getPosition=void 0;var _d=Ln;function Xo(n,t){var e=t.getBoundingClientRect();return{x:n.clientX-e.left,y:n.clientY-e.top}}pt.getPosition=Xo;function mu(n,t){var e=yn(yn({},Xo(n,t)),{sigmaDefaultPrevented:!1,preventSigmaDefault:function(){e.sigmaDefaultPrevented=!0},original:n});return e}pt.getMouseCoords=mu;function wd(n,t){return yn(yn({},mu(n,t)),{delta:bu(n)})}pt.getWheelCoords=wd;var Ed=2;function vu(n){for(var t=[],e=0,r=Math.min(n.length,Ed);e<r;e++)t.push(n[e]);return t}pt.getTouchesArray=vu;function Ad(n,t){return{touches:vu(n.touches).map(function(e){return Xo(e,t)}),original:n}}pt.getTouchCoords=Ad;function bu(n){if(typeof n.deltaY!="undefined")return n.deltaY*-3/360;if(typeof n.detail!="undefined")return n.detail/-9;throw new Error("Captor: could not extract delta from event.")}pt.getWheelDelta=bu;var Sd=function(n){bd(t,n);function t(e,r){var i=n.call(this)||this;return i.container=e,i.renderer=r,i}return t}(_d.TypedEventEmitter);pt.default=Sd;var Cd=W&&W.__extends||function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ld=W&&W.__createBinding||(Object.create?function(n,t,e,r){r===void 0&&(r=e),Object.defineProperty(n,r,{enumerable:!0,get:function(){return t[e]}})}:function(n,t,e,r){r===void 0&&(r=e),n[r]=t[e]}),Td=W&&W.__setModuleDefault||(Object.create?function(n,t){Object.defineProperty(n,"default",{enumerable:!0,value:t})}:function(n,t){n.default=t}),xd=W&&W.__importStar||function(n){if(n&&n.__esModule)return n;var t={};if(n!=null)for(var e in n)e!=="default"&&Object.prototype.hasOwnProperty.call(n,e)&&Ld(t,n,e);return Td(t,n),t};Object.defineProperty(eo,"__esModule",{value:!0});var Tt=xd(pt),Od=100,Dd=3,Pd=200,ja=3,Ua=250,za=1.7,kd=300,Fd=2.2,Rd=200,Gd=function(n){Cd(t,n);function t(e,r){var i=n.call(this,e,r)||this;return i.enabled=!0,i.draggedEvents=0,i.downStartTime=null,i.lastMouseX=null,i.lastMouseY=null,i.isMouseDown=!1,i.isMoving=!1,i.movingTimeout=null,i.startCameraState=null,i.clicks=0,i.doubleClickTimeout=null,i.currentWheelDirection=0,i.handleClick=i.handleClick.bind(i),i.handleRightClick=i.handleRightClick.bind(i),i.handleDown=i.handleDown.bind(i),i.handleUp=i.handleUp.bind(i),i.handleMove=i.handleMove.bind(i),i.handleWheel=i.handleWheel.bind(i),i.handleOut=i.handleOut.bind(i),e.addEventListener("click",i.handleClick,!1),e.addEventListener("contextmenu",i.handleRightClick,!1),e.addEventListener("mousedown",i.handleDown,!1),e.addEventListener("wheel",i.handleWheel,!1),e.addEventListener("mouseout",i.handleOut,!1),document.addEventListener("mousemove",i.handleMove,!1),document.addEventListener("mouseup",i.handleUp,!1),i}return t.prototype.kill=function(){var e=this.container;e.removeEventListener("click",this.handleClick),e.removeEventListener("contextmenu",this.handleRightClick),e.removeEventListener("mousedown",this.handleDown),e.removeEventListener("wheel",this.handleWheel),e.removeEventListener("mouseout",this.handleOut),document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("mouseup",this.handleUp)},t.prototype.handleClick=function(e){var r=this;if(!!this.enabled){if(this.clicks++,this.clicks===2)return this.clicks=0,typeof this.doubleClickTimeout=="number"&&(clearTimeout(this.doubleClickTimeout),this.doubleClickTimeout=null),this.handleDoubleClick(e);setTimeout(function(){r.clicks=0,r.doubleClickTimeout=null},kd),this.draggedEvents<Dd&&this.emit("click",(0,Tt.getMouseCoords)(e,this.container))}},t.prototype.handleRightClick=function(e){!this.enabled||this.emit("rightClick",(0,Tt.getMouseCoords)(e,this.container))},t.prototype.handleDoubleClick=function(e){if(!!this.enabled){e.preventDefault(),e.stopPropagation();var r=(0,Tt.getMouseCoords)(e,this.container);if(this.emit("doubleClick",r),!r.sigmaDefaultPrevented){var i=this.renderer.getCamera(),o=i.getBoundedRatio(i.getState().ratio/Fd);i.animate(this.renderer.getViewportZoomedState((0,Tt.getPosition)(e,this.container),o),{easing:"quadraticInOut",duration:Rd})}}},t.prototype.handleDown=function(e){if(!!this.enabled){this.startCameraState=this.renderer.getCamera().getState();var r=(0,Tt.getPosition)(e,this.container),i=r.x,o=r.y;this.lastMouseX=i,this.lastMouseY=o,this.draggedEvents=0,this.downStartTime=Date.now(),this.isMouseDown=!0,this.emit("mousedown",(0,Tt.getMouseCoords)(e,this.container))}},t.prototype.handleUp=function(e){var r=this;if(!(!this.enabled||!this.isMouseDown)){var i=this.renderer.getCamera();this.isMouseDown=!1,typeof this.movingTimeout=="number"&&(clearTimeout(this.movingTimeout),this.movingTimeout=null);var o=(0,Tt.getPosition)(e,this.container),a=o.x,s=o.y,l=i.getState(),u=i.getPreviousState()||{x:0,y:0};this.isMoving?i.animate({x:l.x+ja*(l.x-u.x),y:l.y+ja*(l.y-u.y)},{duration:Pd,easing:"quadraticOut"}):(this.lastMouseX!==a||this.lastMouseY!==s)&&i.setState({x:l.x,y:l.y}),this.isMoving=!1,setTimeout(function(){r.draggedEvents=0,r.renderer.refresh()},0),this.emit("mouseup",(0,Tt.getMouseCoords)(e,this.container))}},t.prototype.handleMove=function(e){var r=this;if(!!this.enabled){var i=(0,Tt.getMouseCoords)(e,this.container);if(this.emit("mousemovebody",i),e.target===this.container&&this.emit("mousemove",i),!i.sigmaDefaultPrevented&&this.isMouseDown){this.isMoving=!0,this.draggedEvents++,typeof this.movingTimeout=="number"&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){r.movingTimeout=null,r.isMoving=!1},Od);var o=this.renderer.getCamera(),a=(0,Tt.getPosition)(e,this.container),s=a.x,l=a.y,u=this.renderer.viewportToFramedGraph({x:this.lastMouseX,y:this.lastMouseY}),h=this.renderer.viewportToFramedGraph({x:s,y:l}),d=u.x-h.x,c=u.y-h.y,f=o.getState(),p=f.x+d,w=f.y+c;o.setState({x:p,y:w}),this.lastMouseX=s,this.lastMouseY=l,e.preventDefault(),e.stopPropagation()}}},t.prototype.handleWheel=function(e){var r=this;if(!!this.enabled){e.preventDefault(),e.stopPropagation();var i=(0,Tt.getWheelDelta)(e);if(!!i){var o=(0,Tt.getWheelCoords)(e,this.container);if(this.emit("wheel",o),!o.sigmaDefaultPrevented){var a=i>0?1/za:za,s=this.renderer.getCamera(),l=s.getBoundedRatio(s.getState().ratio*a),u=i>0?1:-1,h=Date.now();this.currentWheelDirection===u&&this.lastWheelTriggerTime&&h-this.lastWheelTriggerTime<Ua/5||(s.animate(this.renderer.getViewportZoomedState((0,Tt.getPosition)(e,this.container),l),{easing:"quadraticOut",duration:Ua},function(){r.currentWheelDirection=0}),this.currentWheelDirection=u,this.lastWheelTriggerTime=h)}}}},t.prototype.handleOut=function(){},t}(Tt.default);eo.default=Gd;var Rt={},Ma=W&&W.__read||function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var r=e.call(n),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},Na=W&&W.__spreadArray||function(n,t,e){if(e||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return n.concat(o||Array.prototype.slice.call(t))},Id=W&&W.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Rt,"__esModule",{value:!0});Rt.rectangleCollidesWithQuad=Rt.squareCollidesWithQuad=Rt.getCircumscribedAlignedRectangle=Rt.isRectangleAligned=void 0;var $d=Id(Ys),xt=4,Mn=5,dn="outside",vt=0,bt=1,_t=2,wt=3,jd=1,Ud=2,zd=3,Md=4,Ba=!1;function _u(n){return n.x1===n.x2||n.y1===n.y2}Rt.isRectangleAligned=_u;function wu(n){var t=Math.sqrt(Math.pow(n.x2-n.x1,2)+Math.pow(n.y2-n.y1,2)),e={x:(n.y1-n.y2)*n.height/t,y:(n.x2-n.x1)*n.height/t},r={x:n.x1,y:n.y1},i={x:n.x2,y:n.y2},o={x:n.x1+e.x,y:n.y1+e.y},a={x:n.x2+e.x,y:n.y2+e.y},s=Math.min(r.x,i.x,o.x,a.x),l=Math.max(r.x,i.x,o.x,a.x),u=Math.min(r.y,i.y,o.y,a.y),h=Math.max(r.y,i.y,o.y,a.y);return{x1:s,y1:u,x2:l,y2:u,height:h-u}}Rt.getCircumscribedAlignedRectangle=wu;function Bn(n,t,e,r,i,o,a){return n<r+o&&n+e>r&&t<i+a&&t+e>i}Rt.squareCollidesWithQuad=Bn;function Wn(n,t,e,r,i,o,a,s){return n<i+a&&n+e>i&&t<o+s&&t+r>o}Rt.rectangleCollidesWithQuad=Wn;function Nd(n,t,e,r,i,o){var a=e+i/2,s=r+o/2,l=t<s,u=n<a;return l?u?jd:Ud:u?zd:Md}function Bd(n,t){for(var e=[0,0];e.length;){var r=e.pop(),i=e.pop(),o=4*i+xt,a=4*i+2*xt,s=4*i+3*xt,l=4*i+4*xt,u=t[i+vt],h=t[i+bt],d=t[i+_t],c=t[i+wt],f=d/2,p=c/2;t[o+vt]=u,t[o+bt]=h,t[o+_t]=f,t[o+wt]=p,t[a+vt]=u+f,t[a+bt]=h,t[a+_t]=f,t[a+wt]=p,t[s+vt]=u,t[s+bt]=h+p,t[s+_t]=f,t[s+wt]=p,t[l+vt]=u+f,t[l+bt]=h+p,t[l+_t]=f,t[l+wt]=p,r<n-1&&(e.push(l,r+1),e.push(s,r+1),e.push(a,r+1),e.push(o,r+1))}}function Wd(n,t,e,r,i,o,a){for(var s=i-a,l=o-a,u=a*2,h=0,d=0;;){if(h>=n){e[d]=e[d]||[],e[d].push(r);return}var c=4*d+xt,f=4*d+2*xt,p=4*d+3*xt,w=4*d+4*xt,S=Bn(s,l,u,t[c+vt],t[c+bt],t[c+_t],t[c+wt]),A=Bn(s,l,u,t[f+vt],t[f+bt],t[f+_t],t[f+wt]),T=Bn(s,l,u,t[p+vt],t[p+bt],t[p+_t],t[p+wt]),L=Bn(s,l,u,t[w+vt],t[w+bt],t[w+_t],t[w+wt]),C=[S,A,T,L].reduce(function(E,F){return F?E+1:E},0);if(C===0&&h===0){e[dn].push(r),!Ba&&e[dn].length>=5&&(Ba=!0,console.warn("sigma/quadtree.insertNode: At least 5 nodes are outside the global quadtree zone. You might have a problem with the normalization function or the custom bounding box."));return}if(C===0)throw new Error("sigma/quadtree.insertNode: no collision (level: ".concat(h,", key: ").concat(r,", x: ").concat(i,", y: ").concat(o,", size: ").concat(a,")."));if(C===3)throw new Error("sigma/quadtree.insertNode: 3 impossible collisions (level: ".concat(h,", key: ").concat(r,", x: ").concat(i,", y: ").concat(o,", size: ").concat(a,")."));if(C>1){e[d]=e[d]||[],e[d].push(r);return}else h++;S&&(d=c),A&&(d=f),T&&(d=p),L&&(d=w)}}function Hd(n,t,e,r,i,o,a){for(var s=[0,0],l=[],u;s.length;){var h=s.pop(),d=s.pop();if(u=e[d],u&&(0,$d.default)(l,u),!(h>=n)){var c=4*d+xt,f=4*d+2*xt,p=4*d+3*xt,w=4*d+4*xt,S=Wn(r,i,o,a,t[c+vt],t[c+bt],t[c+_t],t[c+wt]),A=Wn(r,i,o,a,t[f+vt],t[f+bt],t[f+_t],t[f+wt]),T=Wn(r,i,o,a,t[p+vt],t[p+bt],t[p+_t],t[p+wt]),L=Wn(r,i,o,a,t[w+vt],t[w+bt],t[w+_t],t[w+wt]);S&&s.push(c,h+1),A&&s.push(f,h+1),T&&s.push(p,h+1),L&&s.push(w,h+1)}}return l}var qd=function(){function n(t){var e;t===void 0&&(t={}),this.containers=(e={},e[dn]=[],e),this.cache=null,this.lastRectangle=null;var r=Math.pow(4,Mn);this.data=new Float32Array(xt*((4*r-1)/3)),t.boundaries?this.resize(t.boundaries):this.resize({x:0,y:0,width:1,height:1})}return n.prototype.add=function(t,e,r,i){return Wd(Mn,this.data,this.containers,t,e,r,i),this},n.prototype.resize=function(t){this.clear(),this.data[vt]=t.x,this.data[bt]=t.y,this.data[_t]=t.width,this.data[wt]=t.height,Bd(Mn,this.data)},n.prototype.clear=function(){var t;return this.containers=(t={},t[dn]=[],t),this},n.prototype.point=function(t,e){var r=this.containers[dn],i=0,o=0;do{this.containers[i]&&r.push.apply(r,Na([],Ma(this.containers[i]),!1));var a=Nd(t,e,this.data[i+vt],this.data[i+bt],this.data[i+_t],this.data[i+wt]);i=4*i+a*xt,o++}while(o<=Mn);return r},n.prototype.rectangle=function(t,e,r,i,o){var a,s=this.lastRectangle;return s&&t===s.x1&&r===s.x2&&e===s.y1&&i===s.y2&&o===s.height?this.cache:(this.lastRectangle={x1:t,y1:e,x2:r,y2:i,height:o},_u(this.lastRectangle)||(this.lastRectangle=wu(this.lastRectangle)),this.cache=Hd(Mn,this.data,this.containers,t,e,Math.abs(t-r)||Math.abs(e-i),o),(a=this.cache).push.apply(a,Na([],Ma(this.containers[dn]),!1)),this.cache)},n}();Rt.default=qd;var mn={};Object.defineProperty(mn,"__esModule",{value:!0});mn.edgeLabelsToDisplayFromNodes=mn.LabelGrid=void 0;var Wa=function(){function n(t,e){this.key=t,this.size=e}return n.compare=function(t,e){return t.size>e.size?-1:t.size<e.size||t.key>e.key?1:-1},n}(),Vd=function(){function n(){this.width=0,this.height=0,this.cellSize=0,this.columns=0,this.rows=0,this.cells={}}return n.prototype.resizeAndClear=function(t,e){this.width=t.width,this.height=t.height,this.cellSize=e,this.columns=Math.ceil(t.width/e),this.rows=Math.ceil(t.height/e),this.cells={}},n.prototype.getIndex=function(t){var e=Math.floor(t.x/this.cellSize),r=Math.floor(t.y/this.cellSize);return r*this.columns+e},n.prototype.add=function(t,e,r){var i=new Wa(t,e),o=this.getIndex(r),a=this.cells[o];a||(a=[],this.cells[o]=a),a.push(i)},n.prototype.organize=function(){for(var t in this.cells){var e=this.cells[t];e.sort(Wa.compare)}},n.prototype.getLabelsToDisplay=function(t,e){var r=this.cellSize*this.cellSize,i=r/t/t,o=i*e/r,a=Math.ceil(o),s=[];for(var l in this.cells)for(var u=this.cells[l],h=0;h<Math.min(a,u.length);h++)s.push(u[h].key);return s},n}();mn.LabelGrid=Vd;function Yd(n){var t=n.graph,e=n.hoveredNode,r=n.highlightedNodes,i=n.displayedNodeLabels,o=[];return t.forEachEdge(function(a,s,l,u){(l===e||u===e||r.has(l)||r.has(u)||i.has(l)&&i.has(u))&&o.push(a)}),o}mn.edgeLabelsToDisplayFromNodes=Yd;var vn={},to={};Object.defineProperty(to,"__esModule",{value:!0});function Kd(n,t,e){if(!!t.label){var r=e.labelSize,i=e.labelFont,o=e.labelWeight,a=e.labelColor.attribute?t[e.labelColor.attribute]||e.labelColor.color||"#000":e.labelColor.color;n.fillStyle=a,n.font="".concat(o," ").concat(r,"px ").concat(i),n.fillText(t.label,t.x+t.size+3,t.y+r/3)}}to.default=Kd;var Jo={},Zd=W&&W.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Jo,"__esModule",{value:!0});var Xd=Zd(to);function Jd(n,t,e){var r=e.labelSize,i=e.labelFont,o=e.labelWeight;n.font="".concat(o," ").concat(r,"px ").concat(i),n.fillStyle="#FFF",n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowBlur=8,n.shadowColor="#000";var a=2;if(typeof t.label=="string"){var s=n.measureText(t.label).width,l=Math.round(s+5),u=Math.round(r+2*a),h=Math.max(t.size,r/2)+a,d=Math.asin(u/2/h),c=Math.sqrt(Math.abs(Math.pow(h,2)-Math.pow(u/2,2)));n.beginPath(),n.moveTo(t.x+c,t.y+u/2),n.lineTo(t.x+h+l,t.y+u/2),n.lineTo(t.x+h+l,t.y-u/2),n.lineTo(t.x+c,t.y-u/2),n.arc(t.x,t.y,h,d,-d),n.closePath(),n.fill()}else n.beginPath(),n.arc(t.x,t.y,t.size+a,0,Math.PI*2),n.closePath(),n.fill();n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowBlur=0,(0,Xd.default)(n,t,e)}Jo.default=Jd;var Qo={};Object.defineProperty(Qo,"__esModule",{value:!0});function Qd(n,t,e,r,i){var o=i.edgeLabelSize,a=i.edgeLabelFont,s=i.edgeLabelWeight,l=i.edgeLabelColor.attribute?t[i.edgeLabelColor.attribute]||i.edgeLabelColor.color||"#000":i.edgeLabelColor.color,u=t.label;if(!!u){n.fillStyle=l,n.font="".concat(s," ").concat(o,"px ").concat(a);var h=e.size,d=r.size,c=e.x,f=e.y,p=r.x,w=r.y,S=(c+p)/2,A=(f+w)/2,T=p-c,L=w-f,C=Math.sqrt(T*T+L*L);if(!(C<h+d)){c+=T*h/C,f+=L*h/C,p-=T*d/C,w-=L*d/C,S=(c+p)/2,A=(f+w)/2,T=p-c,L=w-f,C=Math.sqrt(T*T+L*L);var E=n.measureText(u).width;if(E>C){var F="\u2026";for(u=u+F,E=n.measureText(u).width;E>C&&u.length>1;)u=u.slice(0,-2)+F,E=n.measureText(u).width;if(u.length<4)return}var y;T>0?L>0?y=Math.acos(T/C):y=Math.asin(L/C):L>0?y=Math.acos(T/C)+Math.PI:y=Math.asin(T/C)+Math.PI/2,n.save(),n.translate(S,A),n.rotate(y),n.fillText(u,-E/2,t.size/2+o),n.restore()}}}Qo.default=Qd;var ea={},Eu={exports:{}};(()=>{var n={d:(r,i)=>{for(var o in i)n.o(i,o)&&!n.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:i[o]})},o:(r,i)=>Object.prototype.hasOwnProperty.call(r,i),r:r=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})}},t={};n.r(t),n.d(t,{default:()=>e});const e=`attribute vec2 a_position;
attribute float a_size;
attribute vec4 a_color;

uniform float u_ratio;
uniform float u_scale;
uniform mat3 u_matrix;

varying vec4 v_color;
varying float v_border;

const float bias = 255.0 / 254.0;

void main() {
  gl_Position = vec4(
    (u_matrix * vec3(a_position, 1)).xy,
    0,
    1
  );

  // Multiply the point size twice:
  //  - x SCALING_RATIO to correct the canvas scaling
  //  - x 2 to correct the formulae
  gl_PointSize = a_size * u_ratio * u_scale * 2.0;

  v_border = (1.0 / u_ratio) * (0.5 / a_size);

  // Extract the color:
  v_color = a_color;
  v_color.a *= bias;
}
`;Eu.exports=t})();var Au={exports:{}};(()=>{var n={d:(r,i)=>{for(var o in i)n.o(i,o)&&!n.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:i[o]})},o:(r,i)=>Object.prototype.hasOwnProperty.call(r,i),r:r=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})}},t={};n.r(t),n.d(t,{default:()=>e});const e=`precision mediump float;

varying vec4 v_color;
varying float v_border;

const float radius = 0.5;
const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  vec2 m = gl_PointCoord - vec2(0.5, 0.5);
  float dist = radius - length(m);

  float t = 0.0;
  if (dist > v_border)
    t = 1.0;
  else if (dist > 0.0)
    t = dist / v_border;

  gl_FragColor = mix(transparent, v_color, t);
}
`;Au.exports=t})();var Hr={},oi={},Or={};Object.defineProperty(Or,"__esModule",{value:!0});Or.loadProgram=Or.loadFragmentShader=Or.loadVertexShader=void 0;function Su(n,t,e){var r=n==="VERTEX"?t.VERTEX_SHADER:t.FRAGMENT_SHADER,i=t.createShader(r);if(i===null)throw new Error("loadShader: error while creating the shader");t.shaderSource(i,e),t.compileShader(i);var o=t.getShaderParameter(i,t.COMPILE_STATUS);if(!o){var a=t.getShaderInfoLog(i);throw t.deleteShader(i),new Error(`loadShader: error while compiling the shader:
`.concat(a,`
`).concat(e))}return i}function ef(n,t){return Su("VERTEX",n,t)}Or.loadVertexShader=ef;function tf(n,t){return Su("FRAGMENT",n,t)}Or.loadFragmentShader=tf;function rf(n,t){var e=n.createProgram();if(e===null)throw new Error("loadProgram: error while creating the program.");var r,i;for(r=0,i=t.length;r<i;r++)n.attachShader(e,t[r]);n.linkProgram(e);var o=n.getProgramParameter(e,n.LINK_STATUS);if(!o)throw n.deleteProgram(e),new Error("loadProgram: error while linking the program.");return e}Or.loadProgram=rf;Object.defineProperty(oi,"__esModule",{value:!0});oi.AbstractProgram=void 0;var mo=Or,nf=function(){function n(t,e,r,i,o){this.array=new Float32Array,this.points=i,this.attributes=o,this.gl=t,this.vertexShaderSource=e,this.fragmentShaderSource=r;var a=t.createBuffer();if(a===null)throw new Error("AbstractProgram: error while creating the buffer");this.buffer=a,t.bindBuffer(t.ARRAY_BUFFER,this.buffer),this.vertexShader=(0,mo.loadVertexShader)(t,this.vertexShaderSource),this.fragmentShader=(0,mo.loadFragmentShader)(t,this.fragmentShaderSource),this.program=(0,mo.loadProgram)(t,[this.vertexShader,this.fragmentShader])}return n.prototype.bufferData=function(){var t=this.gl;t.bufferData(t.ARRAY_BUFFER,this.array,t.DYNAMIC_DRAW)},n.prototype.allocate=function(t){this.array=new Float32Array(this.points*this.attributes*t)},n.prototype.hasNothingToRender=function(){return this.array.length===0},n}();oi.AbstractProgram=nf;var of=W&&W.__extends||function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();Object.defineProperty(Hr,"__esModule",{value:!0});Hr.createNodeCompoundProgram=Hr.AbstractNodeProgram=void 0;var af=oi,sf=function(n){of(t,n);function t(e,r,i,o,a){var s=n.call(this,e,r,i,o,a)||this;s.positionLocation=e.getAttribLocation(s.program,"a_position"),s.sizeLocation=e.getAttribLocation(s.program,"a_size"),s.colorLocation=e.getAttribLocation(s.program,"a_color");var l=e.getUniformLocation(s.program,"u_matrix");if(l===null)throw new Error("AbstractNodeProgram: error while getting matrixLocation");s.matrixLocation=l;var u=e.getUniformLocation(s.program,"u_ratio");if(u===null)throw new Error("AbstractNodeProgram: error while getting ratioLocation");s.ratioLocation=u;var h=e.getUniformLocation(s.program,"u_scale");if(h===null)throw new Error("AbstractNodeProgram: error while getting scaleLocation");return s.scaleLocation=h,s}return t.prototype.bind=function(){var e=this.gl;e.enableVertexAttribArray(this.positionLocation),e.enableVertexAttribArray(this.sizeLocation),e.enableVertexAttribArray(this.colorLocation),e.vertexAttribPointer(this.positionLocation,2,e.FLOAT,!1,this.attributes*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(this.sizeLocation,1,e.FLOAT,!1,this.attributes*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(this.colorLocation,4,e.UNSIGNED_BYTE,!0,this.attributes*Float32Array.BYTES_PER_ELEMENT,12)},t}(af.AbstractProgram);Hr.AbstractNodeProgram=sf;function uf(n){return function(){function t(e,r){this.programs=n.map(function(i){return new i(e,r)})}return t.prototype.bufferData=function(){this.programs.forEach(function(e){return e.bufferData()})},t.prototype.allocate=function(e){this.programs.forEach(function(r){return r.allocate(e)})},t.prototype.bind=function(){},t.prototype.render=function(e){this.programs.forEach(function(r){r.bind(),r.bufferData(),r.render(e)})},t.prototype.process=function(e,r,i){this.programs.forEach(function(o){return o.process(e,r,i)})},t}()}Hr.createNodeCompoundProgram=uf;var lf=W&&W.__extends||function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Cu=W&&W.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ea,"__esModule",{value:!0});var cf=ge,hf=Cu(Eu.exports),df=Cu(Au.exports),ff=Hr,Ha=1,vo=4,pf=function(n){lf(t,n);function t(e){var r=n.call(this,e,hf.default,df.default,Ha,vo)||this;return r.bind(),r}return t.prototype.process=function(e,r,i){var o=this.array,a=i*Ha*vo;if(r){o[a++]=0,o[a++]=0,o[a++]=0,o[a++]=0;return}var s=(0,cf.floatColor)(e.color);o[a++]=e.x,o[a++]=e.y,o[a++]=e.size,o[a]=s},t.prototype.render=function(e){if(!this.hasNothingToRender()){var r=this.gl,i=this.program;r.useProgram(i),r.uniform1f(this.ratioLocation,1/Math.sqrt(e.ratio)),r.uniform1f(this.scaleLocation,e.scalingRatio),r.uniformMatrix3fv(this.matrixLocation,!1,e.matrix),r.drawArrays(r.POINTS,0,this.array.length/vo)}},t}(ff.AbstractNodeProgram),gf=ea.default=pf,ta={},Lu={exports:{}};(()=>{var n={d:(r,i)=>{for(var o in i)n.o(i,o)&&!n.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:i[o]})},o:(r,i)=>Object.prototype.hasOwnProperty.call(r,i),r:r=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})}},t={};n.r(t),n.d(t,{default:()=>e});const e=`attribute vec4 a_color;
attribute vec2 a_normal;
attribute vec2 a_position;

uniform mat3 u_matrix;
uniform float u_sqrtZoomRatio;
uniform float u_correctionRatio;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;

const float minThickness = 1.7;
const float bias = 255.0 / 254.0;

void main() {
  float normalLength = length(a_normal);
  vec2 unitNormal = a_normal / normalLength;

  // We require edges to be at least \`minThickness\` pixels thick *on screen*
  // (so we need to compensate the SQRT zoom ratio):
  float pixelsThickness = max(normalLength, minThickness * u_sqrtZoomRatio);

  // Then, we need to retrieve the normalized thickness of the edge in the WebGL
  // referential (in a ([0, 1], [0, 1]) space), using our "magic" correction
  // ratio:
  float webGLThickness = pixelsThickness * u_correctionRatio;

  // Finally, we adapt the edge thickness to the "SQRT rule" in sigma (so that
  // items are not too big when zoomed in, and not too small when zoomed out).
  // The exact computation should be \`adapted = value * zoom / sqrt(zoom)\`, but
  // it's simpler like this:
  float adaptedWebGLThickness = webGLThickness * u_sqrtZoomRatio;

  // Here is the proper position of the vertex
  gl_Position = vec4((u_matrix * vec3(a_position + unitNormal * adaptedWebGLThickness, 1)).xy, 0, 1);

  // For the fragment shader though, we need a thickness that takes the "magic"
  // correction ratio into account (as in webGLThickness), but so that the
  // antialiasint effect does not depend on the zoom level. So here's yet
  // another thickness version:
  v_thickness = webGLThickness / u_sqrtZoomRatio;

  v_normal = unitNormal;
  v_color = a_color;
  v_color.a *= bias;
}
`;Lu.exports=t})();var ra={exports:{}};(()=>{var n={d:(r,i)=>{for(var o in i)n.o(i,o)&&!n.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:i[o]})},o:(r,i)=>Object.prototype.hasOwnProperty.call(r,i),r:r=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})}},t={};n.r(t),n.d(t,{default:()=>e});const e=`precision mediump float;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;

const float feather = 0.001;
const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  float dist = length(v_normal) * v_thickness;

  float t = smoothstep(
    v_thickness - feather,
    v_thickness,
    dist
  );

  gl_FragColor = mix(v_color, transparent, t);
}
`;ra.exports=t})();var gr={},yf=W&&W.__extends||function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();Object.defineProperty(gr,"__esModule",{value:!0});gr.createEdgeCompoundProgram=gr.AbstractEdgeProgram=void 0;var mf=oi,vf=function(n){yf(t,n);function t(e,r,i,o,a){return n.call(this,e,r,i,o,a)||this}return t}(mf.AbstractProgram);gr.AbstractEdgeProgram=vf;function bf(n){return function(){function t(e,r){this.programs=n.map(function(i){return new i(e,r)})}return t.prototype.bufferData=function(){this.programs.forEach(function(e){return e.bufferData()})},t.prototype.allocate=function(e){this.programs.forEach(function(r){return r.allocate(e)})},t.prototype.bind=function(){},t.prototype.computeIndices=function(){this.programs.forEach(function(e){return e.computeIndices()})},t.prototype.render=function(e){this.programs.forEach(function(r){r.bind(),r.bufferData(),r.render(e)})},t.prototype.process=function(e,r,i,o,a){this.programs.forEach(function(s){return s.process(e,r,i,o,a)})},t}()}gr.createEdgeCompoundProgram=bf;var _f=W&&W.__extends||function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Tu=W&&W.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ta,"__esModule",{value:!0});var qa=ge,wf=Tu(Lu.exports),Ef=Tu(ra.exports),Af=gr,So=4,zr=5,Va=So*zr,Sf=function(n){_f(t,n);function t(e){var r=n.call(this,e,wf.default,Ef.default,So,zr)||this,i=e.createBuffer();if(i===null)throw new Error("EdgeProgram: error while creating indicesBuffer");r.indicesBuffer=i,r.positionLocation=e.getAttribLocation(r.program,"a_position"),r.colorLocation=e.getAttribLocation(r.program,"a_color"),r.normalLocation=e.getAttribLocation(r.program,"a_normal");var o=e.getUniformLocation(r.program,"u_matrix");if(o===null)throw new Error("EdgeProgram: error while getting matrixLocation");r.matrixLocation=o;var a=e.getUniformLocation(r.program,"u_correctionRatio");if(a===null)throw new Error("EdgeProgram: error while getting correctionRatioLocation");r.correctionRatioLocation=a;var s=e.getUniformLocation(r.program,"u_sqrtZoomRatio");if(s===null)throw new Error("EdgeProgram: error while getting sqrtZoomRatioLocation");return r.sqrtZoomRatioLocation=s,r.canUse32BitsIndices=(0,qa.canUse32BitsIndices)(e),r.IndicesArray=r.canUse32BitsIndices?Uint32Array:Uint16Array,r.indicesArray=new r.IndicesArray,r.indicesType=r.canUse32BitsIndices?e.UNSIGNED_INT:e.UNSIGNED_SHORT,r.bind(),r}return t.prototype.bind=function(){var e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),e.enableVertexAttribArray(this.positionLocation),e.enableVertexAttribArray(this.normalLocation),e.enableVertexAttribArray(this.colorLocation),e.vertexAttribPointer(this.positionLocation,2,e.FLOAT,!1,zr*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(this.normalLocation,2,e.FLOAT,!1,zr*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(this.colorLocation,4,e.UNSIGNED_BYTE,!0,zr*Float32Array.BYTES_PER_ELEMENT,16)},t.prototype.computeIndices=function(){for(var e=this.array.length/zr,r=e+e/2,i=new this.IndicesArray(r),o=0,a=0;o<e;o+=4)i[a++]=o,i[a++]=o+1,i[a++]=o+2,i[a++]=o+2,i[a++]=o+1,i[a++]=o+3;this.indicesArray=i},t.prototype.bufferData=function(){n.prototype.bufferData.call(this);var e=this.gl;e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indicesArray,e.STATIC_DRAW)},t.prototype.process=function(e,r,i,o,a){if(o){for(var s=a*Va,l=s+Va;s<l;s++)this.array[s]=0;return}var u=i.size||1,h=e.x,d=e.y,c=r.x,f=r.y,p=(0,qa.floatColor)(i.color),w=c-h,S=f-d,A=w*w+S*S,T=0,L=0;A&&(A=1/Math.sqrt(A),T=-S*A*u,L=w*A*u);var C=So*zr*a,E=this.array;E[C++]=h,E[C++]=d,E[C++]=T,E[C++]=L,E[C++]=p,E[C++]=h,E[C++]=d,E[C++]=-T,E[C++]=-L,E[C++]=p,E[C++]=c,E[C++]=f,E[C++]=T,E[C++]=L,E[C++]=p,E[C++]=c,E[C++]=f,E[C++]=-T,E[C++]=-L,E[C]=p},t.prototype.render=function(e){if(!this.hasNothingToRender()){var r=this.gl,i=this.program;r.useProgram(i),r.uniformMatrix3fv(this.matrixLocation,!1,e.matrix),r.uniform1f(this.sqrtZoomRatioLocation,Math.sqrt(e.ratio)),r.uniform1f(this.correctionRatioLocation,e.correctionRatio),r.drawElements(r.TRIANGLES,this.indicesArray.length,this.indicesType,0)}},t}(Af.AbstractEdgeProgram);ta.default=Sf;var na={},ia={},xu={exports:{}};(()=>{var n={d:(r,i)=>{for(var o in i)n.o(i,o)&&!n.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:i[o]})},o:(r,i)=>Object.prototype.hasOwnProperty.call(r,i),r:r=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})}},t={};n.r(t),n.d(t,{default:()=>e});const e=`attribute vec2 a_position;
attribute vec2 a_normal;
attribute float a_radius;
attribute vec4 a_color;
attribute vec3 a_barycentric;

uniform mat3 u_matrix;
uniform float u_sqrtZoomRatio;
uniform float u_correctionRatio;

varying vec4 v_color;

const float minThickness = 1.7;
const float bias = 255.0 / 254.0;
const float arrowHeadWidthLengthRatio = 0.66;
const float arrowHeadLengthThicknessRatio = 2.5;

void main() {
  float normalLength = length(a_normal);
  vec2 unitNormal = a_normal / normalLength;

  // These first computations are taken from edge.vert.glsl and
  // edge.clamped.vert.glsl. Please read it to get better comments on what's
  // happening:
  float pixelsThickness = max(normalLength, minThickness * u_sqrtZoomRatio);
  float webGLThickness = pixelsThickness * u_correctionRatio;
  float adaptedWebGLThickness = webGLThickness * u_sqrtZoomRatio;
  float adaptedWebGLNodeRadius = a_radius * 2.0 * u_correctionRatio * u_sqrtZoomRatio;
  float adaptedWebGLArrowHeadLength = adaptedWebGLThickness * 2.0 * arrowHeadLengthThicknessRatio;
  float adaptedWebGLArrowHeadHalfWidth = adaptedWebGLArrowHeadLength * arrowHeadWidthLengthRatio / 2.0;

  float da = a_barycentric.x;
  float db = a_barycentric.y;
  float dc = a_barycentric.z;

  vec2 delta = vec2(
      da * (adaptedWebGLNodeRadius * unitNormal.y)
    + db * ((adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.y + adaptedWebGLArrowHeadHalfWidth * unitNormal.x)
    + dc * ((adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.y - adaptedWebGLArrowHeadHalfWidth * unitNormal.x),

      da * (-adaptedWebGLNodeRadius * unitNormal.x)
    + db * (-(adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.x + adaptedWebGLArrowHeadHalfWidth * unitNormal.y)
    + dc * (-(adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.x - adaptedWebGLArrowHeadHalfWidth * unitNormal.y)
  );

  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;

  gl_Position = vec4(position, 0, 1);

  // Extract the color:
  v_color = a_color;
  v_color.a *= bias;
}
`;xu.exports=t})();var Ou={exports:{}};(()=>{var n={d:(r,i)=>{for(var o in i)n.o(i,o)&&!n.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:i[o]})},o:(r,i)=>Object.prototype.hasOwnProperty.call(r,i),r:r=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})}},t={};n.r(t),n.d(t,{default:()=>e});const e=`precision mediump float;

varying vec4 v_color;

void main(void) {
  gl_FragColor = v_color;
}
`;Ou.exports=t})();var Cf=W&&W.__extends||function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Du=W&&W.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ia,"__esModule",{value:!0});var Lf=ge,Tf=Du(xu.exports),xf=Du(Ou.exports),Of=gr,Co=3,dr=9,Ya=Co*dr,Df=function(n){Cf(t,n);function t(e){var r=n.call(this,e,Tf.default,xf.default,Co,dr)||this;r.positionLocation=e.getAttribLocation(r.program,"a_position"),r.colorLocation=e.getAttribLocation(r.program,"a_color"),r.normalLocation=e.getAttribLocation(r.program,"a_normal"),r.radiusLocation=e.getAttribLocation(r.program,"a_radius"),r.barycentricLocation=e.getAttribLocation(r.program,"a_barycentric");var i=e.getUniformLocation(r.program,"u_matrix");if(i===null)throw new Error("EdgeArrowHeadProgram: error while getting matrixLocation");r.matrixLocation=i;var o=e.getUniformLocation(r.program,"u_sqrtZoomRatio");if(o===null)throw new Error("EdgeArrowHeadProgram: error while getting sqrtZoomRatioLocation");r.sqrtZoomRatioLocation=o;var a=e.getUniformLocation(r.program,"u_correctionRatio");if(a===null)throw new Error("EdgeArrowHeadProgram: error while getting correctionRatioLocation");return r.correctionRatioLocation=a,r.bind(),r}return t.prototype.bind=function(){var e=this.gl;e.enableVertexAttribArray(this.positionLocation),e.enableVertexAttribArray(this.normalLocation),e.enableVertexAttribArray(this.radiusLocation),e.enableVertexAttribArray(this.colorLocation),e.enableVertexAttribArray(this.barycentricLocation),e.vertexAttribPointer(this.positionLocation,2,e.FLOAT,!1,dr*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(this.normalLocation,2,e.FLOAT,!1,dr*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(this.radiusLocation,1,e.FLOAT,!1,dr*Float32Array.BYTES_PER_ELEMENT,16),e.vertexAttribPointer(this.colorLocation,4,e.UNSIGNED_BYTE,!0,dr*Float32Array.BYTES_PER_ELEMENT,20),e.vertexAttribPointer(this.barycentricLocation,3,e.FLOAT,!1,dr*Float32Array.BYTES_PER_ELEMENT,24)},t.prototype.computeIndices=function(){},t.prototype.process=function(e,r,i,o,a){if(o){for(var s=a*Ya,l=s+Ya;s<l;s++)this.array[s]=0;return}var u=i.size||1,h=r.size||1,d=e.x,c=e.y,f=r.x,p=r.y,w=(0,Lf.floatColor)(i.color),S=f-d,A=p-c,T=S*S+A*A,L=0,C=0;T&&(T=1/Math.sqrt(T),L=-A*T*u,C=S*T*u);var E=Co*dr*a,F=this.array;F[E++]=f,F[E++]=p,F[E++]=-L,F[E++]=-C,F[E++]=h,F[E++]=w,F[E++]=1,F[E++]=0,F[E++]=0,F[E++]=f,F[E++]=p,F[E++]=-L,F[E++]=-C,F[E++]=h,F[E++]=w,F[E++]=0,F[E++]=1,F[E++]=0,F[E++]=f,F[E++]=p,F[E++]=-L,F[E++]=-C,F[E++]=h,F[E++]=w,F[E++]=0,F[E++]=0,F[E]=1},t.prototype.render=function(e){if(!this.hasNothingToRender()){var r=this.gl,i=this.program;r.useProgram(i),r.uniformMatrix3fv(this.matrixLocation,!1,e.matrix),r.uniform1f(this.sqrtZoomRatioLocation,Math.sqrt(e.ratio)),r.uniform1f(this.correctionRatioLocation,e.correctionRatio),r.drawArrays(r.TRIANGLES,0,this.array.length/dr)}},t}(Of.AbstractEdgeProgram);ia.default=Df;var oa={},Pu={exports:{}};(()=>{var n={d:(r,i)=>{for(var o in i)n.o(i,o)&&!n.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:i[o]})},o:(r,i)=>Object.prototype.hasOwnProperty.call(r,i),r:r=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})}},t={};n.r(t),n.d(t,{default:()=>e});const e=`attribute vec4 a_color;
attribute vec2 a_normal;
attribute vec2 a_position;
attribute float a_radius;

uniform mat3 u_matrix;
uniform float u_sqrtZoomRatio;
uniform float u_correctionRatio;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;

const float minThickness = 1.7;
const float bias = 255.0 / 254.0;
const float arrowHeadLengthThicknessRatio = 2.5;

void main() {
  float normalLength = length(a_normal);
  vec2 unitNormal = a_normal / normalLength;

  // These first computations are taken from edge.vert.glsl. Please read it to
  // get better comments on what's happening:
  float pixelsThickness = max(normalLength, minThickness * u_sqrtZoomRatio);
  float webGLThickness = pixelsThickness * u_correctionRatio;
  float adaptedWebGLThickness = webGLThickness * u_sqrtZoomRatio;

  // Here, we move the point to leave space for the arrow head:
  float direction = sign(a_radius);
  float adaptedWebGLNodeRadius = direction * a_radius * 2.0 * u_correctionRatio * u_sqrtZoomRatio;
  float adaptedWebGLArrowHeadLength = adaptedWebGLThickness * 2.0 * arrowHeadLengthThicknessRatio;

  vec2 compensationVector = vec2(-direction * unitNormal.y, direction * unitNormal.x) * (adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength);

  // Here is the proper position of the vertex
  gl_Position = vec4((u_matrix * vec3(a_position + unitNormal * adaptedWebGLThickness + compensationVector, 1)).xy, 0, 1);

  v_thickness = webGLThickness / u_sqrtZoomRatio;

  v_normal = unitNormal;
  v_color = a_color;
  v_color.a *= bias;
}
`;Pu.exports=t})();var Pf=W&&W.__extends||function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ku=W&&W.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(oa,"__esModule",{value:!0});var kf=gr,Ka=ge,Ff=ku(Pu.exports),Rf=ku(ra.exports),Lo=4,xr=6,Za=Lo*xr,Gf=function(n){Pf(t,n);function t(e){var r=n.call(this,e,Ff.default,Rf.default,Lo,xr)||this,i=e.createBuffer();if(i===null)throw new Error("EdgeClampedProgram: error while getting resolutionLocation");r.indicesBuffer=i,r.positionLocation=e.getAttribLocation(r.program,"a_position"),r.colorLocation=e.getAttribLocation(r.program,"a_color"),r.normalLocation=e.getAttribLocation(r.program,"a_normal"),r.radiusLocation=e.getAttribLocation(r.program,"a_radius");var o=e.getUniformLocation(r.program,"u_matrix");if(o===null)throw new Error("EdgeClampedProgram: error while getting matrixLocation");r.matrixLocation=o;var a=e.getUniformLocation(r.program,"u_sqrtZoomRatio");if(a===null)throw new Error("EdgeClampedProgram: error while getting cameraRatioLocation");r.sqrtZoomRatioLocation=a;var s=e.getUniformLocation(r.program,"u_correctionRatio");if(s===null)throw new Error("EdgeClampedProgram: error while getting viewportRatioLocation");return r.correctionRatioLocation=s,r.canUse32BitsIndices=(0,Ka.canUse32BitsIndices)(e),r.IndicesArray=r.canUse32BitsIndices?Uint32Array:Uint16Array,r.indicesArray=new r.IndicesArray,r.indicesType=r.canUse32BitsIndices?e.UNSIGNED_INT:e.UNSIGNED_SHORT,r.bind(),r}return t.prototype.bind=function(){var e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),e.enableVertexAttribArray(this.positionLocation),e.enableVertexAttribArray(this.normalLocation),e.enableVertexAttribArray(this.colorLocation),e.enableVertexAttribArray(this.radiusLocation),e.vertexAttribPointer(this.positionLocation,2,e.FLOAT,!1,xr*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(this.normalLocation,2,e.FLOAT,!1,xr*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(this.colorLocation,4,e.UNSIGNED_BYTE,!0,xr*Float32Array.BYTES_PER_ELEMENT,16),e.vertexAttribPointer(this.radiusLocation,1,e.FLOAT,!1,xr*Float32Array.BYTES_PER_ELEMENT,20)},t.prototype.process=function(e,r,i,o,a){if(o){for(var s=a*Za,l=s+Za;s<l;s++)this.array[s]=0;return}var u=i.size||1,h=e.x,d=e.y,c=r.x,f=r.y,p=r.size||1,w=(0,Ka.floatColor)(i.color),S=c-h,A=f-d,T=S*S+A*A,L=0,C=0;T&&(T=1/Math.sqrt(T),L=-A*T*u,C=S*T*u);var E=Lo*xr*a,F=this.array;F[E++]=h,F[E++]=d,F[E++]=L,F[E++]=C,F[E++]=w,F[E++]=0,F[E++]=h,F[E++]=d,F[E++]=-L,F[E++]=-C,F[E++]=w,F[E++]=0,F[E++]=c,F[E++]=f,F[E++]=L,F[E++]=C,F[E++]=w,F[E++]=p,F[E++]=c,F[E++]=f,F[E++]=-L,F[E++]=-C,F[E++]=w,F[E]=-p},t.prototype.computeIndices=function(){for(var e=this.array.length/xr,r=e+e/2,i=new this.IndicesArray(r),o=0,a=0;o<e;o+=4)i[a++]=o,i[a++]=o+1,i[a++]=o+2,i[a++]=o+2,i[a++]=o+1,i[a++]=o+3;this.indicesArray=i},t.prototype.bufferData=function(){n.prototype.bufferData.call(this);var e=this.gl;e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indicesArray,e.STATIC_DRAW)},t.prototype.render=function(e){if(!this.hasNothingToRender()){var r=this.gl,i=this.program;r.useProgram(i),r.uniformMatrix3fv(this.matrixLocation,!1,e.matrix),r.uniform1f(this.sqrtZoomRatioLocation,Math.sqrt(e.ratio)),r.uniform1f(this.correctionRatioLocation,e.correctionRatio),r.drawElements(r.TRIANGLES,this.indicesArray.length,this.indicesType,0)}},t}(kf.AbstractEdgeProgram);oa.default=Gf;var Fu=W&&W.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(na,"__esModule",{value:!0});var If=gr,$f=Fu(ia),jf=Fu(oa),Uf=(0,If.createEdgeCompoundProgram)([jf.default,$f.default]);na.default=Uf;var Tn=W&&W.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(vn,"__esModule",{value:!0});vn.DEFAULT_SETTINGS=vn.validateSettings=void 0;var zf=Tn(to),Mf=Tn(Jo),Nf=Tn(Qo),Bf=Tn(ea),Wf=Tn(ta),Hf=Tn(na);function qf(n){if(typeof n.labelDensity!="number"||n.labelDensity<0)throw new Error("Settings: invalid `labelDensity`. Expecting a positive number.");var t=n.minCameraRatio,e=n.maxCameraRatio;if(typeof t=="number"&&typeof e=="number"&&e<t)throw new Error("Settings: invalid camera ratio boundaries. Expecting `maxCameraRatio` to be greater than `minCameraRatio`.")}vn.validateSettings=qf;vn.DEFAULT_SETTINGS={hideEdgesOnMove:!1,hideLabelsOnMove:!1,renderLabels:!0,renderEdgeLabels:!1,enableEdgeClickEvents:!1,enableEdgeWheelEvents:!1,enableEdgeHoverEvents:!1,defaultNodeColor:"#999",defaultNodeType:"circle",defaultEdgeColor:"#ccc",defaultEdgeType:"line",labelFont:"Arial",labelSize:14,labelWeight:"normal",labelColor:{color:"#000"},edgeLabelFont:"Arial",edgeLabelSize:14,edgeLabelWeight:"normal",edgeLabelColor:{attribute:"color"},stagePadding:30,labelDensity:1,labelGridCellSize:100,labelRenderedSizeThreshold:6,nodeReducer:null,edgeReducer:null,zIndex:!1,minCameraRatio:null,maxCameraRatio:null,labelRenderer:zf.default,hoverRenderer:Mf.default,edgeLabelRenderer:Nf.default,allowInvalidContainer:!1,nodeProgramClasses:{circle:Bf.default},edgeProgramClasses:{arrow:Hf.default,line:Wf.default}};var aa={},Vf=W&&W.__extends||function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Yf=W&&W.__createBinding||(Object.create?function(n,t,e,r){r===void 0&&(r=e),Object.defineProperty(n,r,{enumerable:!0,get:function(){return t[e]}})}:function(n,t,e,r){r===void 0&&(r=e),n[r]=t[e]}),Kf=W&&W.__setModuleDefault||(Object.create?function(n,t){Object.defineProperty(n,"default",{enumerable:!0,value:t})}:function(n,t){n.default=t}),Zf=W&&W.__importStar||function(n){if(n&&n.__esModule)return n;var t={};if(n!=null)for(var e in n)e!=="default"&&Object.prototype.hasOwnProperty.call(n,e)&&Yf(t,n,e);return Kf(t,n),t},Xa=W&&W.__read||function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var r=e.call(n),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o};Object.defineProperty(aa,"__esModule",{value:!0});var hr=Zf(pt),Xf=200,Ja=3,Jf=200,Qf=function(n){Vf(t,n);function t(e,r){var i=n.call(this,e,r)||this;return i.enabled=!0,i.isMoving=!1,i.touchMode=0,i.handleStart=i.handleStart.bind(i),i.handleLeave=i.handleLeave.bind(i),i.handleMove=i.handleMove.bind(i),e.addEventListener("touchstart",i.handleStart,!1),e.addEventListener("touchend",i.handleLeave,!1),e.addEventListener("touchcancel",i.handleLeave,!1),e.addEventListener("touchmove",i.handleMove,!1),i}return t.prototype.kill=function(){var e=this.container;e.removeEventListener("touchstart",this.handleStart),e.removeEventListener("touchend",this.handleLeave),e.removeEventListener("touchcancel",this.handleLeave),e.removeEventListener("touchmove",this.handleMove)},t.prototype.getDimensions=function(){return{width:this.container.offsetWidth,height:this.container.offsetHeight}},t.prototype.dispatchRelatedMouseEvent=function(e,r,i,o){var a=i||(0,hr.getPosition)(r.touches[0],this.container),s=new MouseEvent(e,{clientX:a.x,clientY:a.y,altKey:r.altKey,ctrlKey:r.ctrlKey});s.isFakeSigmaMouseEvent=!0,(o||this.container).dispatchEvent(s)},t.prototype.handleStart=function(e){var r=this;if(!!this.enabled){e.preventDefault(),e.touches.length===1&&this.dispatchRelatedMouseEvent("mousedown",e);var i=(0,hr.getTouchesArray)(e.touches);if(this.isMoving=!0,this.touchMode=i.length,this.startCameraState=this.renderer.getCamera().getState(),this.startTouchesPositions=i.map(function(c){return(0,hr.getPosition)(c,r.container)}),this.lastTouchesPositions=this.startTouchesPositions,this.touchMode===2){var o=Xa(this.startTouchesPositions,2),a=o[0],s=a.x,l=a.y,u=o[1],h=u.x,d=u.y;this.startTouchesAngle=Math.atan2(d-l,h-s),this.startTouchesDistance=Math.sqrt(Math.pow(h-s,2)+Math.pow(d-l,2))}this.emit("touchdown",(0,hr.getTouchCoords)(e,this.container))}},t.prototype.handleLeave=function(e){if(!!this.enabled){switch(e.preventDefault(),e.touches.length===0&&this.lastTouchesPositions&&this.lastTouchesPositions.length&&(this.dispatchRelatedMouseEvent("mouseup",e,this.lastTouchesPositions[0],document),this.dispatchRelatedMouseEvent("click",e,this.lastTouchesPositions[0])),this.movingTimeout&&(this.isMoving=!1,clearTimeout(this.movingTimeout)),this.touchMode){case 2:if(e.touches.length===1){this.handleStart(e),e.preventDefault();break}case 1:if(this.isMoving){var r=this.renderer.getCamera(),i=r.getState(),o=r.getPreviousState()||{x:0,y:0};r.animate({x:i.x+Ja*(i.x-o.x),y:i.y+Ja*(i.y-o.y)},{duration:Jf,easing:"quadraticOut"})}this.isMoving=!1,this.touchMode=0;break}this.emit("touchup",(0,hr.getTouchCoords)(e,this.container))}},t.prototype.handleMove=function(e){var r,i=this;if(!!this.enabled){e.preventDefault(),e.touches.length===1&&this.dispatchRelatedMouseEvent("mousemove",e);var o=this.renderer.getCamera(),a=this.startCameraState,s=(0,hr.getTouchesArray)(e.touches),l=s.map(function(pe){return(0,hr.getPosition)(pe,i.container)});switch(this.lastTouchesPositions=l,this.isMoving=!0,this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){i.isMoving=!1},Xf),this.touchMode){case 1:{var u=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0]),h=u.x,d=u.y,c=this.renderer.viewportToFramedGraph(l[0]),f=c.x,p=c.y;o.setState({x:a.x+h-f,y:a.y+d-p});break}case 2:{var w={},S=l[0],A=S.x,T=S.y,L=l[1],C=L.x,E=L.y,F=Math.atan2(E-T,C-A)-this.startTouchesAngle,y=Math.hypot(E-T,C-A)/this.startTouchesDistance,_=o.getBoundedRatio(a.ratio/y);w.ratio=_,w.angle=a.angle+F;var b=this.getDimensions(),G=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0],{cameraState:a}),q=Math.min(b.width,b.height),Q=q/b.width,ne=q/b.height,N=_/q,f=A-q/2/Q,p=T-q/2/ne;r=Xa([f*Math.cos(-w.angle)-p*Math.sin(-w.angle),p*Math.cos(-w.angle)+f*Math.sin(-w.angle)],2),f=r[0],p=r[1],w.x=G.x-f*N,w.y=G.y+p*N,o.setState(w);break}}this.emit("touchmove",(0,hr.getTouchCoords)(e,this.container))}},t}(hr.default);aa.default=Qf;var bn={};Object.defineProperty(bn,"__esModule",{value:!0});bn.doEdgeCollideWithPoint=bn.isPixelColored=void 0;function ep(n,t,e){var r=new Uint8Array(4);return n.readPixels(t,n.drawingBufferHeight-e,1,1,n.RGBA,n.UNSIGNED_BYTE,r),r[3]>0}bn.isPixelColored=ep;function tp(n,t,e,r,i,o,a){if(n<e-a&&n<i-a||t<r-a&&t<o-a||n>e+a&&n>i+a||t>r+a&&t>o+a)return!1;var s=Math.abs((i-e)*(r-t)-(e-n)*(o-r))/Math.sqrt(Math.pow(i-e,2)+Math.pow(o-r,2));return s<a/2}bn.doEdgeCollideWithPoint=tp;var rp=W&&W.__extends||function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ke=W&&W.__assign||function(){return ke=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},ke.apply(this,arguments)},np=W&&W.__values||function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ro=W&&W.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Yo,"__esModule",{value:!0});var Qa=ro(Ji),ip=ro(eo),es=ro(Rt),op=Ln,Ve=ge,ts=mn,Fi=vn,ap=ro(aa),Ri=mt,rs=bn;function sp(n,t,e){if(!e.hasOwnProperty("x")||!e.hasOwnProperty("y"))throw new Error('Sigma: could not find a valid position (x, y) for node "'.concat(t,'". All your nodes must have a number "x" and "y". Maybe your forgot to apply a layout or your "nodeReducer" is not returning the correct data?'));return e.color||(e.color=n.defaultNodeColor),!e.label&&e.label!==""&&(e.label=null),e.label!==void 0&&e.label!==null?e.label=""+e.label:e.label=null,e.size||(e.size=2),e.hasOwnProperty("hidden")||(e.hidden=!1),e.hasOwnProperty("highlighted")||(e.highlighted=!1),e.hasOwnProperty("forceLabel")||(e.forceLabel=!1),(!e.type||e.type==="")&&(e.type=n.defaultNodeType),e.zIndex||(e.zIndex=0),e}function up(n,t,e){return e.color||(e.color=n.defaultEdgeColor),e.label||(e.label=""),e.size||(e.size=.5),e.hasOwnProperty("hidden")||(e.hidden=!1),e.hasOwnProperty("forceLabel")||(e.forceLabel=!1),(!e.type||e.type==="")&&(e.type=n.defaultEdgeType),e.zIndex||(e.zIndex=0),e}var lp=function(n){rp(t,n);function t(e,r,i){i===void 0&&(i={});var o=n.call(this)||this;if(o.elements={},o.canvasContexts={},o.webGLContexts={},o.activeListeners={},o.quadtree=new es.default,o.labelGrid=new ts.LabelGrid,o.nodeDataCache={},o.edgeDataCache={},o.nodesWithForcedLabels=[],o.edgesWithForcedLabels=[],o.nodeExtent={x:[0,1],y:[0,1]},o.matrix=(0,Ri.identity)(),o.invMatrix=(0,Ri.identity)(),o.correctionRatio=1,o.customBBox=null,o.normalizationFunction=(0,Ve.createNormalizationFunction)({x:[0,1],y:[0,1]}),o.cameraSizeRatio=1,o.width=0,o.height=0,o.pixelRatio=(0,Ve.getPixelRatio)(),o.displayedLabels=new Set,o.highlightedNodes=new Set,o.hoveredNode=null,o.hoveredEdge=null,o.renderFrame=null,o.renderHighlightedNodesFrame=null,o.needToProcess=!1,o.needToSoftProcess=!1,o.checkEdgesEventsFrame=null,o.nodePrograms={},o.hoverNodePrograms={},o.edgePrograms={},o.settings=(0,Ve.assign)({},Fi.DEFAULT_SETTINGS,i),(0,Fi.validateSettings)(o.settings),(0,Ve.validateGraph)(e),!(r instanceof HTMLElement))throw new Error("Sigma: container should be an html element.");o.graph=e,o.container=r,o.createWebGLContext("edges",{preserveDrawingBuffer:!0}),o.createCanvasContext("edgeLabels"),o.createWebGLContext("nodes"),o.createCanvasContext("labels"),o.createCanvasContext("hovers"),o.createWebGLContext("hoverNodes"),o.createCanvasContext("mouse");for(var a in o.webGLContexts){var s=o.webGLContexts[a];s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),s.enable(s.BLEND)}for(var l in o.settings.nodeProgramClasses){var u=o.settings.nodeProgramClasses[l];o.nodePrograms[l]=new u(o.webGLContexts.nodes,o),o.hoverNodePrograms[l]=new u(o.webGLContexts.hoverNodes,o)}for(var l in o.settings.edgeProgramClasses){var h=o.settings.edgeProgramClasses[l];o.edgePrograms[l]=new h(o.webGLContexts.edges,o)}return o.resize(),o.camera=new Qa.default,o.bindCameraHandlers(),o.mouseCaptor=new ip.default(o.elements.mouse,o),o.touchCaptor=new ap.default(o.elements.mouse,o),o.bindEventHandlers(),o.bindGraphHandlers(),o.handleSettingsUpdate(),o.process(),o.render(),o}return t.prototype.createCanvas=function(e){var r=(0,Ve.createElement)("canvas",{position:"absolute"},{class:"sigma-".concat(e)});return this.elements[e]=r,this.container.appendChild(r),r},t.prototype.createCanvasContext=function(e){var r=this.createCanvas(e),i={preserveDrawingBuffer:!1,antialias:!1};return this.canvasContexts[e]=r.getContext("2d",i),this},t.prototype.createWebGLContext=function(e,r){var i=this.createCanvas(e),o=ke({preserveDrawingBuffer:!1,antialias:!1},r||{}),a;return a=i.getContext("webgl2",o),a||(a=i.getContext("webgl",o)),a||(a=i.getContext("experimental-webgl",o)),this.webGLContexts[e]=a,this},t.prototype.bindCameraHandlers=function(){var e=this;return this.activeListeners.camera=function(){e._scheduleRefresh()},this.camera.on("updated",this.activeListeners.camera),this},t.prototype.mouseIsOnNode=function(e,r,i){var o=e.x,a=e.y,s=r.x,l=r.y;return o>s-i&&o<s+i&&a>l-i&&a<l+i&&Math.sqrt(Math.pow(o-s,2)+Math.pow(a-l,2))<i},t.prototype.getQuadNodes=function(e){var r=this.viewportToFramedGraph(e);return this.quadtree.point(r.x,1-r.y)},t.prototype.getNodeAtPosition=function(e){for(var r=e.x,i=e.y,o=this.getQuadNodes(e),a=1/0,s=null,l=0,u=o.length;l<u;l++){var h=o[l],d=this.nodeDataCache[h],c=this.framedGraphToViewport(d),f=this.scaleSize(d.size);if(!d.hidden&&this.mouseIsOnNode(e,c,f)){var p=Math.sqrt(Math.pow(r-c.x,2)+Math.pow(i-c.y,2));p<a&&(a=p,s=h)}}return s},t.prototype.bindEventHandlers=function(){var e=this;this.activeListeners.handleResize=function(){e.needToSoftProcess=!0,e._scheduleRefresh()},window.addEventListener("resize",this.activeListeners.handleResize),this.activeListeners.handleMove=function(i){var o={event:i,preventSigmaDefault:function(){i.preventSigmaDefault()}},a=e.getNodeAtPosition(i);if(a&&e.hoveredNode!==a&&!e.nodeDataCache[a].hidden){e.hoveredNode&&e.emit("leaveNode",ke(ke({},o),{node:e.hoveredNode})),e.hoveredNode=a,e.emit("enterNode",ke(ke({},o),{node:a})),e.scheduleHighlightedNodesRender();return}if(e.hoveredNode){var s=e.nodeDataCache[e.hoveredNode],l=e.framedGraphToViewport(s),u=e.scaleSize(s.size);if(!e.mouseIsOnNode(i,l,u)){var h=e.hoveredNode;e.hoveredNode=null,e.emit("leaveNode",ke(ke({},o),{node:h})),e.scheduleHighlightedNodesRender();return}}e.settings.enableEdgeHoverEvents===!0?e.checkEdgeHoverEvents(o):e.settings.enableEdgeHoverEvents==="debounce"&&(e.checkEdgesEventsFrame||(e.checkEdgesEventsFrame=(0,Ve.requestFrame)(function(){e.checkEdgeHoverEvents(o),e.checkEdgesEventsFrame=null})))};var r=function(i){return function(o){var a={event:o,preventSigmaDefault:function(){o.preventSigmaDefault()}},s=o.original.isFakeSigmaMouseEvent,l=s?e.getNodeAtPosition(o):e.hoveredNode;if(l)return e.emit("".concat(i,"Node"),ke(ke({},a),{node:l}));if(i==="wheel"?e.settings.enableEdgeWheelEvents:e.settings.enableEdgeClickEvents){var u=e.getEdgeAtPoint(o.x,o.y);if(u)return e.emit("".concat(i,"Edge"),ke(ke({},a),{edge:u}))}return e.emit("".concat(i,"Stage"),a)}};return this.activeListeners.handleClick=r("click"),this.activeListeners.handleRightClick=r("rightClick"),this.activeListeners.handleDoubleClick=r("doubleClick"),this.activeListeners.handleWheel=r("wheel"),this.activeListeners.handleDown=r("down"),this.mouseCaptor.on("mousemove",this.activeListeners.handleMove),this.mouseCaptor.on("click",this.activeListeners.handleClick),this.mouseCaptor.on("rightClick",this.activeListeners.handleRightClick),this.mouseCaptor.on("doubleClick",this.activeListeners.handleDoubleClick),this.mouseCaptor.on("wheel",this.activeListeners.handleWheel),this.mouseCaptor.on("mousedown",this.activeListeners.handleDown),this},t.prototype.bindGraphHandlers=function(){var e=this,r=this.graph;return this.activeListeners.graphUpdate=function(){e.needToProcess=!0,e._scheduleRefresh()},this.activeListeners.softGraphUpdate=function(){e.needToSoftProcess=!0,e._scheduleRefresh()},this.activeListeners.dropNodeGraphUpdate=function(i){delete e.nodeDataCache[i.key],e.hoveredNode===i.key&&(e.hoveredNode=null),e.activeListeners.graphUpdate()},this.activeListeners.dropEdgeGraphUpdate=function(i){delete e.edgeDataCache[i.key],e.hoveredEdge===i.key&&(e.hoveredEdge=null),e.activeListeners.graphUpdate()},this.activeListeners.clearEdgesGraphUpdate=function(){e.edgeDataCache={},e.hoveredEdge=null,e.activeListeners.graphUpdate()},this.activeListeners.clearGraphUpdate=function(){e.nodeDataCache={},e.hoveredNode=null,e.activeListeners.clearEdgesGraphUpdate()},r.on("nodeAdded",this.activeListeners.graphUpdate),r.on("nodeDropped",this.activeListeners.dropNodeGraphUpdate),r.on("nodeAttributesUpdated",this.activeListeners.softGraphUpdate),r.on("eachNodeAttributesUpdated",this.activeListeners.graphUpdate),r.on("edgeAdded",this.activeListeners.graphUpdate),r.on("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),r.on("edgeAttributesUpdated",this.activeListeners.softGraphUpdate),r.on("eachEdgeAttributesUpdated",this.activeListeners.graphUpdate),r.on("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),r.on("cleared",this.activeListeners.clearGraphUpdate),this},t.prototype.checkEdgeHoverEvents=function(e){var r=this.hoveredNode?null:this.getEdgeAtPoint(e.event.x,e.event.y);return r!==this.hoveredEdge&&(this.hoveredEdge&&this.emit("leaveEdge",ke(ke({},e),{edge:this.hoveredEdge})),r&&this.emit("enterEdge",ke(ke({},e),{edge:r})),this.hoveredEdge=r),this},t.prototype.getEdgeAtPoint=function(e,r){var i,o,a=this,s=this,l=s.edgeDataCache,u=s.nodeDataCache;if(!(0,rs.isPixelColored)(this.webGLContexts.edges,e*this.pixelRatio,r*this.pixelRatio))return null;var h=this.viewportToGraph({x:e,y:r}),d=h.x,c=h.y,f=0;if(this.graph.someEdge(function(E,F,y,_,b,G){var q=b.x,Q=b.y,ne=G.x,N=G.y;if(l[E].hidden||u[y].hidden||u[_].hidden)return!1;if(q!==ne||Q!==N){var pe=Math.sqrt(Math.pow(ne-q,2)+Math.pow(N-Q,2)),Ce=a.graphToViewport({x:q,y:Q}),ie=Ce.x,P=Ce.y,j=a.graphToViewport({x:ne,y:N}),B=j.x,R=j.y,k=Math.sqrt(Math.pow(B-ie,2)+Math.pow(R-P,2));return f=pe/k,!0}}),!f)return null;var p=this.graph.filterEdges(function(E,F,y,_,b,G){if(l[E].hidden||u[y].hidden||u[_].hidden)return!1;if((0,rs.doEdgeCollideWithPoint)(d,c,b.x,b.y,G.x,G.y,l[E].size*f/a.cameraSizeRatio))return!0});if(p.length===0)return null;var w=p[p.length-1],S=-1/0;try{for(var A=np(p),T=A.next();!T.done;T=A.next()){var L=T.value,C=this.graph.getEdgeAttribute(L,"zIndex");C>=S&&(w=L,S=C)}}catch(E){i={error:E}}finally{try{T&&!T.done&&(o=A.return)&&o.call(A)}finally{if(i)throw i.error}}return w},t.prototype.process=function(e){var r=this;e===void 0&&(e=!1);var i=this.graph,o=this.settings,a=this.getDimensions(),s=[1/0,-1/0],l=[1/0,-1/0];this.quadtree.clear(),this.labelGrid.resizeAndClear(a,o.labelGridCellSize),this.highlightedNodes=new Set,this.nodeExtent=(0,Ve.graphExtent)(i),this.nodesWithForcedLabels=[],this.edgesWithForcedLabels=[];var u=new Qa.default,h=(0,Ve.matrixFromCamera)(u.getState(),this.getDimensions(),this.getGraphDimensions(),this.getSetting("stagePadding")||0);this.normalizationFunction=(0,Ve.createNormalizationFunction)(this.customBBox||this.nodeExtent);for(var d={},c=i.nodes(),f=0,p=c.length;f<p;f++){var w=c[f],S=Object.assign({},i.getNodeAttributes(w));o.nodeReducer&&(S=o.nodeReducer(w,S));var A=sp(this.settings,w,S);d[A.type]=(d[A.type]||0)+1,this.nodeDataCache[w]=A,this.normalizationFunction.applyTo(A),A.forceLabel&&this.nodesWithForcedLabels.push(w),this.settings.zIndex&&(A.zIndex<s[0]&&(s[0]=A.zIndex),A.zIndex>s[1]&&(s[1]=A.zIndex))}for(var T in this.nodePrograms){if(!this.nodePrograms.hasOwnProperty(T))throw new Error('Sigma: could not find a suitable program for node type "'.concat(T,'"!'));e||this.nodePrograms[T].allocate(d[T]||0),d[T]=0}this.settings.zIndex&&s[0]!==s[1]&&(c=(0,Ve.zIndexOrdering)(s,function(q){return r.nodeDataCache[q].zIndex},c));for(var f=0,p=c.length;f<p;f++){var w=c[f],A=this.nodeDataCache[w];this.quadtree.add(w,A.x,1-A.y,A.size/this.width),typeof A.label=="string"&&!A.hidden&&this.labelGrid.add(w,A.size,this.framedGraphToViewport(A,{matrix:h})),this.nodePrograms[A.type].process(A,A.hidden,d[A.type]++),A.highlighted&&!A.hidden&&this.highlightedNodes.add(w)}this.labelGrid.organize();for(var L={},C=i.edges(),f=0,p=C.length;f<p;f++){var E=C[f],S=Object.assign({},i.getEdgeAttributes(E));o.edgeReducer&&(S=o.edgeReducer(E,S));var A=up(this.settings,E,S);L[A.type]=(L[A.type]||0)+1,this.edgeDataCache[E]=A,A.forceLabel&&!A.hidden&&this.edgesWithForcedLabels.push(E),this.settings.zIndex&&(A.zIndex<l[0]&&(l[0]=A.zIndex),A.zIndex>l[1]&&(l[1]=A.zIndex))}for(var T in this.edgePrograms){if(!this.edgePrograms.hasOwnProperty(T))throw new Error('Sigma: could not find a suitable program for edge type "'.concat(T,'"!'));e||this.edgePrograms[T].allocate(L[T]||0),L[T]=0}this.settings.zIndex&&l[0]!==l[1]&&(C=(0,Ve.zIndexOrdering)(l,function(q){return r.edgeDataCache[q].zIndex},C));for(var f=0,p=C.length;f<p;f++){var E=C[f],A=this.edgeDataCache[E],F=i.extremities(E),y=this.nodeDataCache[F[0]],_=this.nodeDataCache[F[1]],b=A.hidden||y.hidden||_.hidden;this.edgePrograms[A.type].process(y,_,A,b,L[A.type]++)}for(var T in this.edgePrograms){var G=this.edgePrograms[T];!e&&typeof G.computeIndices=="function"&&G.computeIndices()}return this},t.prototype.handleSettingsUpdate=function(){return this.camera.minRatio=this.settings.minCameraRatio,this.camera.maxRatio=this.settings.maxCameraRatio,this.camera.setState(this.camera.validateState(this.camera.getState())),this},t.prototype._refresh=function(){return this.needToProcess?this.process():this.needToSoftProcess&&this.process(!0),this.needToProcess=!1,this.needToSoftProcess=!1,this.render(),this},t.prototype._scheduleRefresh=function(){var e=this;return this.renderFrame||(this.renderFrame=(0,Ve.requestFrame)(function(){e._refresh(),e.renderFrame=null})),this},t.prototype.renderLabels=function(){if(!this.settings.renderLabels)return this;var e=this.camera.getState(),r;if(e.ratio>=1)r=new Set(this.graph.nodes());else{var i=this.viewRectangle();r=new Set(this.quadtree.rectangle(i.x1,1-i.y1,i.x2,1-i.y2,i.height))}var o=this.labelGrid.getLabelsToDisplay(e.ratio,this.settings.labelDensity).concat(this.nodesWithForcedLabels);this.displayedLabels=new Set;for(var a=this.canvasContexts.labels,s=0,l=o.length;s<l;s++){var u=o[s],h=this.nodeDataCache[u];if(!this.displayedLabels.has(u)&&!h.hidden){var d=this.framedGraphToViewport(h),c=d.x,f=d.y,p=this.scaleSize(h.size);!h.forceLabel&&p<this.settings.labelRenderedSizeThreshold||!r.has(u)||(this.displayedLabels.add(u),this.settings.labelRenderer(a,ke(ke({key:u},h),{size:p,x:c,y:f}),this.settings))}}return this},t.prototype.renderEdgeLabels=function(){if(!this.settings.renderEdgeLabels)return this;var e=this.canvasContexts.edgeLabels;e.clearRect(0,0,this.width,this.height);for(var r=(0,ts.edgeLabelsToDisplayFromNodes)({graph:this.graph,hoveredNode:this.hoveredNode,displayedNodeLabels:this.displayedLabels,highlightedNodes:this.highlightedNodes}).concat(this.edgesWithForcedLabels),i=new Set,o=0,a=r.length;o<a;o++){var s=r[o],l=this.graph.extremities(s),u=this.nodeDataCache[l[0]],h=this.nodeDataCache[l[1]],d=this.edgeDataCache[s];i.has(s)||d.hidden||u.hidden||h.hidden||(this.settings.edgeLabelRenderer(e,ke(ke({key:s},d),{size:this.scaleSize(d.size)}),ke(ke(ke({key:l[0]},u),this.framedGraphToViewport(u)),{size:this.scaleSize(u.size)}),ke(ke(ke({key:l[1]},h),this.framedGraphToViewport(h)),{size:this.scaleSize(h.size)}),this.settings),i.add(s))}return this},t.prototype.renderHighlightedNodes=function(){var e=this,r=this.canvasContexts.hovers;r.clearRect(0,0,this.width,this.height);var i=function(u){var h=e.nodeDataCache[u],d=e.framedGraphToViewport(h),c=d.x,f=d.y,p=e.scaleSize(h.size);e.settings.hoverRenderer(r,ke(ke({key:u},h),{size:p,x:c,y:f}),e.settings)},o=[];this.hoveredNode&&!this.nodeDataCache[this.hoveredNode].hidden&&o.push(this.hoveredNode),this.highlightedNodes.forEach(function(u){u!==e.hoveredNode&&o.push(u)}),o.forEach(function(u){return i(u)});var a={};o.forEach(function(u){var h=e.nodeDataCache[u].type;a[h]=(a[h]||0)+1});for(var s in this.hoverNodePrograms)this.hoverNodePrograms[s].allocate(a[s]||0),a[s]=0;o.forEach(function(u){var h=e.nodeDataCache[u];e.hoverNodePrograms[h.type].process(h,h.hidden,a[h.type]++)}),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT);for(var s in this.hoverNodePrograms){var l=this.hoverNodePrograms[s];l.bind(),l.bufferData(),l.render({matrix:this.matrix,width:this.width,height:this.height,ratio:this.camera.ratio,correctionRatio:this.correctionRatio/this.camera.ratio,scalingRatio:this.pixelRatio})}},t.prototype.scheduleHighlightedNodesRender=function(){var e=this;this.renderHighlightedNodesFrame||this.renderFrame||(this.renderHighlightedNodesFrame=(0,Ve.requestFrame)(function(){e.renderHighlightedNodesFrame=null,e.renderHighlightedNodes(),e.renderEdgeLabels()}))},t.prototype.render=function(){var e=this;this.emit("beforeRender");var r=function(){return e.emit("afterRender"),e};if(this.renderFrame&&((0,Ve.cancelFrame)(this.renderFrame),this.renderFrame=null,this.needToProcess=!1,this.needToSoftProcess=!1),this.resize(),this.clear(),this.updateCachedValues(),!this.graph.order)return r();var i=this.mouseCaptor,o=this.camera.isAnimated()||i.isMoving||i.draggedEvents||i.currentWheelDirection,a=this.camera.getState(),s=this.getDimensions(),l=this.getGraphDimensions(),u=this.getSetting("stagePadding")||0;this.matrix=(0,Ve.matrixFromCamera)(a,s,l,u),this.invMatrix=(0,Ve.matrixFromCamera)(a,s,l,u,!0),this.correctionRatio=(0,Ve.getMatrixImpact)(this.matrix,a,s);for(var h in this.nodePrograms){var d=this.nodePrograms[h];d.bind(),d.bufferData(),d.render({matrix:this.matrix,width:this.width,height:this.height,ratio:a.ratio,correctionRatio:this.correctionRatio/a.ratio,scalingRatio:this.pixelRatio})}if(!this.settings.hideEdgesOnMove||!o)for(var h in this.edgePrograms){var d=this.edgePrograms[h];d.bind(),d.bufferData(),d.render({matrix:this.matrix,width:this.width,height:this.height,ratio:a.ratio,correctionRatio:this.correctionRatio/a.ratio,scalingRatio:this.pixelRatio})}return this.settings.hideLabelsOnMove&&o||(this.renderLabels(),this.renderEdgeLabels(),this.renderHighlightedNodes()),r()},t.prototype.updateCachedValues=function(){var e=this.camera.getState().ratio;this.cameraSizeRatio=Math.sqrt(e)},t.prototype.getCamera=function(){return this.camera},t.prototype.getContainer=function(){return this.container},t.prototype.getGraph=function(){return this.graph},t.prototype.getMouseCaptor=function(){return this.mouseCaptor},t.prototype.getTouchCaptor=function(){return this.touchCaptor},t.prototype.getDimensions=function(){return{width:this.width,height:this.height}},t.prototype.getGraphDimensions=function(){var e=this.customBBox||this.nodeExtent;return{width:e.x[1]-e.x[0]||1,height:e.y[1]-e.y[0]||1}},t.prototype.getNodeDisplayData=function(e){var r=this.nodeDataCache[e];return r?Object.assign({},r):void 0},t.prototype.getEdgeDisplayData=function(e){var r=this.edgeDataCache[e];return r?Object.assign({},r):void 0},t.prototype.getSettings=function(){return ke({},this.settings)},t.prototype.getSetting=function(e){return this.settings[e]},t.prototype.setSetting=function(e,r){return this.settings[e]=r,(0,Fi.validateSettings)(this.settings),this.handleSettingsUpdate(),this.needToProcess=!0,this._scheduleRefresh(),this},t.prototype.updateSetting=function(e,r){return this.settings[e]=r(this.settings[e]),(0,Fi.validateSettings)(this.settings),this.handleSettingsUpdate(),this.needToProcess=!0,this._scheduleRefresh(),this},t.prototype.resize=function(){var e=this.width,r=this.height;if(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.pixelRatio=(0,Ve.getPixelRatio)(),this.width===0)if(this.settings.allowInvalidContainer)this.width=1;else throw new Error("Sigma: Container has no width. You can set the allowInvalidContainer setting to true to stop seing this error.");if(this.height===0)if(this.settings.allowInvalidContainer)this.height=1;else throw new Error("Sigma: Container has no height. You can set the allowInvalidContainer setting to true to stop seing this error.");if(e===this.width&&r===this.height)return this;this.emit("resize");for(var i in this.elements){var o=this.elements[i];o.style.width=this.width+"px",o.style.height=this.height+"px"}for(var i in this.canvasContexts)this.elements[i].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[i].setAttribute("height",this.height*this.pixelRatio+"px"),this.pixelRatio!==1&&this.canvasContexts[i].scale(this.pixelRatio,this.pixelRatio);for(var i in this.webGLContexts)this.elements[i].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[i].setAttribute("height",this.height*this.pixelRatio+"px"),this.webGLContexts[i].viewport(0,0,this.width*this.pixelRatio,this.height*this.pixelRatio);return this},t.prototype.clear=function(){return this.webGLContexts.nodes.clear(this.webGLContexts.nodes.COLOR_BUFFER_BIT),this.webGLContexts.edges.clear(this.webGLContexts.edges.COLOR_BUFFER_BIT),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT),this.canvasContexts.labels.clearRect(0,0,this.width,this.height),this.canvasContexts.hovers.clearRect(0,0,this.width,this.height),this.canvasContexts.edgeLabels.clearRect(0,0,this.width,this.height),this},t.prototype.refresh=function(){return this.needToProcess=!0,this._refresh(),this},t.prototype.scheduleRefresh=function(){return this.needToProcess=!0,this._scheduleRefresh(),this},t.prototype.getViewportZoomedState=function(e,r){var i=this.camera.getState(),o=i.ratio,a=i.angle,s=i.x,l=i.y,u=r/o,h={x:this.width/2,y:this.height/2},d=this.viewportToFramedGraph(e),c=this.viewportToFramedGraph(h);return{angle:a,x:(d.x-c.x)*(1-u)+s,y:(d.y-c.y)*(1-u)+l,ratio:r}},t.prototype.viewRectangle=function(){var e=0*this.width/8,r=0*this.height/8,i=this.viewportToFramedGraph({x:0-e,y:0-r}),o=this.viewportToFramedGraph({x:this.width+e,y:0-r}),a=this.viewportToFramedGraph({x:0,y:this.height+r});return{x1:i.x,y1:i.y,x2:o.x,y2:o.y,height:o.y-a.y}},t.prototype.framedGraphToViewport=function(e,r){r===void 0&&(r={});var i=!!r.cameraState||!!r.viewportDimensions||!!r.graphDimensions,o=r.matrix?r.matrix:i?(0,Ve.matrixFromCamera)(r.cameraState||this.camera.getState(),r.viewportDimensions||this.getDimensions(),r.graphDimensions||this.getGraphDimensions(),r.padding||this.getSetting("stagePadding")||0):this.matrix,a=(0,Ri.multiplyVec2)(o,e);return{x:(1+a.x)*this.width/2,y:(1-a.y)*this.height/2}},t.prototype.viewportToFramedGraph=function(e,r){r===void 0&&(r={});var i=!!r.cameraState||!!r.viewportDimensions||!r.graphDimensions,o=r.matrix?r.matrix:i?(0,Ve.matrixFromCamera)(r.cameraState||this.camera.getState(),r.viewportDimensions||this.getDimensions(),r.graphDimensions||this.getGraphDimensions(),r.padding||this.getSetting("stagePadding")||0,!0):this.invMatrix,a=(0,Ri.multiplyVec2)(o,{x:e.x/this.width*2-1,y:1-e.y/this.height*2});return isNaN(a.x)&&(a.x=0),isNaN(a.y)&&(a.y=0),a},t.prototype.viewportToGraph=function(e,r){return r===void 0&&(r={}),this.normalizationFunction.inverse(this.viewportToFramedGraph(e,r))},t.prototype.graphToViewport=function(e,r){return r===void 0&&(r={}),this.framedGraphToViewport(this.normalizationFunction(e),r)},t.prototype.getBBox=function(){return(0,Ve.graphExtent)(this.graph)},t.prototype.getCustomBBox=function(){return this.customBBox},t.prototype.setCustomBBox=function(e){return this.customBBox=e,this._scheduleRefresh(),this},t.prototype.kill=function(){var e=this.graph;this.emit("kill"),this.removeAllListeners(),this.camera.removeListener("updated",this.activeListeners.camera),window.removeEventListener("resize",this.activeListeners.handleResize),this.mouseCaptor.kill(),this.touchCaptor.kill(),e.removeListener("nodeAdded",this.activeListeners.dropNodeGraphUpdate),e.removeListener("nodeDropped",this.activeListeners.graphUpdate),e.removeListener("nodeAttributesUpdated",this.activeListeners.softGraphUpdate),e.removeListener("eachNodeAttributesUpdated",this.activeListeners.graphUpdate),e.removeListener("edgeAdded",this.activeListeners.graphUpdate),e.removeListener("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),e.removeListener("edgeAttributesUpdated",this.activeListeners.softGraphUpdate),e.removeListener("eachEdgeAttributesUpdated",this.activeListeners.graphUpdate),e.removeListener("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),e.removeListener("cleared",this.activeListeners.clearGraphUpdate),this.quadtree=new es.default,this.nodeDataCache={},this.edgeDataCache={},this.nodesWithForcedLabels=[],this.edgesWithForcedLabels=[],this.highlightedNodes.clear(),this.renderFrame&&((0,Ve.cancelFrame)(this.renderFrame),this.renderFrame=null),this.renderHighlightedNodesFrame&&((0,Ve.cancelFrame)(this.renderHighlightedNodesFrame),this.renderHighlightedNodesFrame=null);for(var r=this.container;r.firstChild;)r.removeChild(r.firstChild)},t.prototype.scaleSize=function(e){return e/this.cameraSizeRatio},t.prototype.getCanvases=function(){return ke({},this.elements)},t}(op.TypedEventEmitter);Yo.default=lp;var no=W&&W.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Qt,"__esModule",{value:!0});Qt.Sigma=Qt.MouseCaptor=Qt.QuadTree=Qt.Camera=void 0;var Ru=no(Yo);Qt.Sigma=Ru.default;var cp=no(Ji);Qt.Camera=cp.default;var hp=no(Rt);Qt.QuadTree=hp.default;var dp=no(eo);Qt.MouseCaptor=dp.default;var fp=Qt.default=Ru.default,pp=function(){var t,e,r={};(function(){var o=0,a=1,s=2,l=3,u=4,h=5,d=6,c=7,f=8,p=9,w=0,S=1,A=2,T=0,L=1,C=2,E=3,F=4,y=5,_=6,b=7,G=8,q=3,Q=10,ne=3,N=9,pe=10;r.exports=function(ie,P,j){var B,R,k,oe,de,ye,Le,ve,V,gt,$e=P.length,ze=j.length,we=ie.adjustSizes,Ae=ie.barnesHutTheta*ie.barnesHutTheta,xe,me,re,se,Oe,$,U,O=[];for(k=0;k<$e;k+=Q)P[k+u]=P[k+s],P[k+h]=P[k+l],P[k+s]=0,P[k+l]=0;if(ie.outboundAttractionDistribution){for(xe=0,k=0;k<$e;k+=Q)xe+=P[k+d];xe/=$e/Q}if(ie.barnesHutOptimize){var Ee=1/0,Te=-1/0,ht=1/0,$t=-1/0,tt,jt,Yt;for(k=0;k<$e;k+=Q)Ee=Math.min(Ee,P[k+o]),Te=Math.max(Te,P[k+o]),ht=Math.min(ht,P[k+a]),$t=Math.max($t,P[k+a]);var Ot=Te-Ee,rr=$t-ht;for(Ot>rr?(ht-=(Ot-rr)/2,$t=ht+Ot):(Ee-=(rr-Ot)/2,Te=Ee+rr),O[0+T]=-1,O[0+L]=(Ee+Te)/2,O[0+C]=(ht+$t)/2,O[0+E]=Math.max(Te-Ee,$t-ht),O[0+F]=-1,O[0+y]=-1,O[0+_]=0,O[0+b]=0,O[0+G]=0,B=1,k=0;k<$e;k+=Q)for(R=0,Yt=q;;)if(O[R+y]>=0){P[k+o]<O[R+L]?P[k+a]<O[R+C]?tt=O[R+y]:tt=O[R+y]+N:P[k+a]<O[R+C]?tt=O[R+y]+N*2:tt=O[R+y]+N*3,O[R+b]=(O[R+b]*O[R+_]+P[k+o]*P[k+d])/(O[R+_]+P[k+d]),O[R+G]=(O[R+G]*O[R+_]+P[k+a]*P[k+d])/(O[R+_]+P[k+d]),O[R+_]+=P[k+d],R=tt;continue}else if(O[R+T]<0){O[R+T]=k;break}else{if(O[R+y]=B*N,ve=O[R+E]/2,V=O[R+y],O[V+T]=-1,O[V+L]=O[R+L]-ve,O[V+C]=O[R+C]-ve,O[V+E]=ve,O[V+F]=V+N,O[V+y]=-1,O[V+_]=0,O[V+b]=0,O[V+G]=0,V+=N,O[V+T]=-1,O[V+L]=O[R+L]-ve,O[V+C]=O[R+C]+ve,O[V+E]=ve,O[V+F]=V+N,O[V+y]=-1,O[V+_]=0,O[V+b]=0,O[V+G]=0,V+=N,O[V+T]=-1,O[V+L]=O[R+L]+ve,O[V+C]=O[R+C]-ve,O[V+E]=ve,O[V+F]=V+N,O[V+y]=-1,O[V+_]=0,O[V+b]=0,O[V+G]=0,V+=N,O[V+T]=-1,O[V+L]=O[R+L]+ve,O[V+C]=O[R+C]+ve,O[V+E]=ve,O[V+F]=O[R+F],O[V+y]=-1,O[V+_]=0,O[V+b]=0,O[V+G]=0,B+=4,P[O[R+T]+o]<O[R+L]?P[O[R+T]+a]<O[R+C]?tt=O[R+y]:tt=O[R+y]+N:P[O[R+T]+a]<O[R+C]?tt=O[R+y]+N*2:tt=O[R+y]+N*3,O[R+_]=P[O[R+T]+d],O[R+b]=P[O[R+T]+o],O[R+G]=P[O[R+T]+a],O[tt+T]=O[R+T],O[R+T]=-1,P[k+o]<O[R+L]?P[k+a]<O[R+C]?jt=O[R+y]:jt=O[R+y]+N:P[k+a]<O[R+C]?jt=O[R+y]+N*2:jt=O[R+y]+N*3,tt===jt)if(Yt--){R=tt;continue}else{Yt=q;break}O[jt+T]=k;break}}if(ie.barnesHutOptimize)for(me=ie.scalingRatio,k=0;k<$e;k+=Q)for(R=0;;)if(O[R+y]>=0)if($=Math.pow(P[k+o]-O[R+b],2)+Math.pow(P[k+a]-O[R+G],2),gt=O[R+E],4*gt*gt/$<Ae){if(re=P[k+o]-O[R+b],se=P[k+a]-O[R+G],we===!0?$>0?(U=me*P[k+d]*O[R+_]/$,P[k+s]+=re*U,P[k+l]+=se*U):$<0&&(U=-me*P[k+d]*O[R+_]/Math.sqrt($),P[k+s]+=re*U,P[k+l]+=se*U):$>0&&(U=me*P[k+d]*O[R+_]/$,P[k+s]+=re*U,P[k+l]+=se*U),R=O[R+F],R<0)break;continue}else{R=O[R+y];continue}else{if(ye=O[R+T],ye>=0&&ye!==k&&(re=P[k+o]-P[ye+o],se=P[k+a]-P[ye+a],$=re*re+se*se,we===!0?$>0?(U=me*P[k+d]*P[ye+d]/$,P[k+s]+=re*U,P[k+l]+=se*U):$<0&&(U=-me*P[k+d]*P[ye+d]/Math.sqrt($),P[k+s]+=re*U,P[k+l]+=se*U):$>0&&(U=me*P[k+d]*P[ye+d]/$,P[k+s]+=re*U,P[k+l]+=se*U)),R=O[R+F],R<0)break;continue}else for(me=ie.scalingRatio,oe=0;oe<$e;oe+=Q)for(de=0;de<oe;de+=Q)re=P[oe+o]-P[de+o],se=P[oe+a]-P[de+a],we===!0?($=Math.sqrt(re*re+se*se)-P[oe+f]-P[de+f],$>0?(U=me*P[oe+d]*P[de+d]/$/$,P[oe+s]+=re*U,P[oe+l]+=se*U,P[de+s]-=re*U,P[de+l]-=se*U):$<0&&(U=100*me*P[oe+d]*P[de+d],P[oe+s]+=re*U,P[oe+l]+=se*U,P[de+s]-=re*U,P[de+l]-=se*U)):($=Math.sqrt(re*re+se*se),$>0&&(U=me*P[oe+d]*P[de+d]/$/$,P[oe+s]+=re*U,P[oe+l]+=se*U,P[de+s]-=re*U,P[de+l]-=se*U));for(V=ie.gravity/ie.scalingRatio,me=ie.scalingRatio,k=0;k<$e;k+=Q)U=0,re=P[k+o],se=P[k+a],$=Math.sqrt(Math.pow(re,2)+Math.pow(se,2)),ie.strongGravityMode?$>0&&(U=me*P[k+d]*V):$>0&&(U=me*P[k+d]*V/$),P[k+s]-=re*U,P[k+l]-=se*U;for(me=1*(ie.outboundAttractionDistribution?xe:1),Le=0;Le<ze;Le+=ne)oe=j[Le+w],de=j[Le+S],ve=j[Le+A],Oe=Math.pow(ve,ie.edgeWeightInfluence),re=P[oe+o]-P[de+o],se=P[oe+a]-P[de+a],we===!0?($=Math.sqrt(re*re+se*se)-P[oe+f]-P[de+f],ie.linLogMode?ie.outboundAttractionDistribution?$>0&&(U=-me*Oe*Math.log(1+$)/$/P[oe+d]):$>0&&(U=-me*Oe*Math.log(1+$)/$):ie.outboundAttractionDistribution?$>0&&(U=-me*Oe/P[oe+d]):$>0&&(U=-me*Oe)):($=Math.sqrt(Math.pow(re,2)+Math.pow(se,2)),ie.linLogMode?ie.outboundAttractionDistribution?$>0&&(U=-me*Oe*Math.log(1+$)/$/P[oe+d]):$>0&&(U=-me*Oe*Math.log(1+$)/$):ie.outboundAttractionDistribution?($=1,U=-me*Oe/P[oe+d]):($=1,U=-me*Oe)),$>0&&(P[oe+s]+=re*U,P[oe+l]+=se*U,P[de+s]-=re*U,P[de+l]-=se*U);var nr,ir,vr,Dt,Pt,or;if(we===!0)for(k=0;k<$e;k+=Q)P[k+p]!==1&&(nr=Math.sqrt(Math.pow(P[k+s],2)+Math.pow(P[k+l],2)),nr>pe&&(P[k+s]=P[k+s]*pe/nr,P[k+l]=P[k+l]*pe/nr),ir=P[k+d]*Math.sqrt((P[k+u]-P[k+s])*(P[k+u]-P[k+s])+(P[k+h]-P[k+l])*(P[k+h]-P[k+l])),vr=Math.sqrt((P[k+u]+P[k+s])*(P[k+u]+P[k+s])+(P[k+h]+P[k+l])*(P[k+h]+P[k+l]))/2,Dt=.1*Math.log(1+vr)/(1+Math.sqrt(ir)),Pt=P[k+o]+P[k+s]*(Dt/ie.slowDown),P[k+o]=Pt,or=P[k+a]+P[k+l]*(Dt/ie.slowDown),P[k+a]=or);else for(k=0;k<$e;k+=Q)P[k+p]!==1&&(ir=P[k+d]*Math.sqrt((P[k+u]-P[k+s])*(P[k+u]-P[k+s])+(P[k+h]-P[k+l])*(P[k+h]-P[k+l])),vr=Math.sqrt((P[k+u]+P[k+s])*(P[k+u]+P[k+s])+(P[k+h]+P[k+l])*(P[k+h]+P[k+l]))/2,Dt=P[k+c]*Math.log(1+vr)/(1+Math.sqrt(ir)),P[k+c]=Math.min(1,Math.sqrt(Dt*(Math.pow(P[k+s],2)+Math.pow(P[k+l],2))/(1+Math.sqrt(ir)))),Pt=P[k+o]+P[k+s]*(Dt/ie.slowDown),P[k+o]=Pt,or=P[k+a]+P[k+l]*(Dt/ie.slowDown),P[k+a]=or);return{}}})();var i=r.exports;self.addEventListener("message",function(o){var a=o.data;t=new Float32Array(a.nodes),a.edges&&(e=new Float32Array(a.edges)),i(a.settings,t,e),self.postMessage({nodes:t.buffer},[t.buffer])})},gp=pp,yp=Pr,mp=qr.createEdgeWeightGetter,_n=mr,vp=lu;function kr(n,t){if(t=t||{},!yp(n))throw new Error("graphology-layout-forceatlas2/worker: the given graph is not a valid graphology instance.");var e=mp("getEdgeWeight"in t?t.getEdgeWeight:"weight").fromEntry,r=_n.assign({},vp,t.settings),i=_n.validateSettings(r);if(i)throw new Error("graphology-layout-forceatlas2/worker: "+i.message);this.worker=null,this.graph=n,this.settings=r,this.getEdgeWeight=e,this.matrices=null,this.running=!1,this.killed=!1,this.outputReducer=typeof t.outputReducer=="function"?t.outputReducer:null,this.handleMessage=this.handleMessage.bind(this);var o=void 0,a=this;this.handleGraphUpdate=function(){a.worker&&a.worker.terminate(),o&&clearTimeout(o),o=setTimeout(function(){o=void 0,a.spawnWorker()},0)},n.on("nodeAdded",this.handleGraphUpdate),n.on("edgeAdded",this.handleGraphUpdate),n.on("nodeDropped",this.handleGraphUpdate),n.on("edgeDropped",this.handleGraphUpdate),this.spawnWorker()}kr.prototype.isRunning=function(){return this.running};kr.prototype.spawnWorker=function(){this.worker&&this.worker.terminate(),this.worker=_n.createWorker(gp),this.worker.addEventListener("message",this.handleMessage),this.running&&(this.running=!1,this.start())};kr.prototype.handleMessage=function(n){if(!!this.running){var t=new Float32Array(n.data.nodes);_n.assignLayoutChanges(this.graph,t,this.outputReducer),this.outputReducer&&_n.readGraphPositions(this.graph,t),this.matrices.nodes=t,this.askForIterations()}};kr.prototype.askForIterations=function(n){var t=this.matrices,e={settings:this.settings,nodes:t.nodes.buffer},r=[t.nodes.buffer];return n&&(e.edges=t.edges.buffer,r.push(t.edges.buffer)),this.worker.postMessage(e,r),this};kr.prototype.start=function(){if(this.killed)throw new Error("graphology-layout-forceatlas2/worker.start: layout was killed.");return this.running?this:(this.matrices=_n.graphToByteArrays(this.graph,this.getEdgeWeight),this.running=!0,this.askForIterations(!0),this)};kr.prototype.stop=function(){return this.running=!1,this};kr.prototype.kill=function(){if(this.killed)return this;this.running=!1,this.killed=!0,this.matrices=null,this.worker.terminate(),this.graph.removeListener("nodeAdded",this.handleGraphUpdate),this.graph.removeListener("edgeAdded",this.handleGraphUpdate),this.graph.removeListener("nodeDropped",this.handleGraphUpdate),this.graph.removeListener("edgeDropped",this.handleGraphUpdate)};var bp=kr;const{createNodeValueGetter:ns,createEdgeValueGetter:_p}=qr;var wp=function(t,e,r){const{nodeXAttribute:i,nodeYAttribute:o}=r,{attraction:a,repulsion:s,gravity:l,inertia:u,maxMove:h}=r.settings;let{shouldSkipNode:d,shouldSkipEdge:c,isNodeFixed:f}=r;f=ns(f),d=ns(d,!1),c=_p(c,!1);const p=t.filterNodes((A,T)=>!d.fromEntry(A,T)),w=p.length;for(let A=0;A<w;A++){const T=p[A],L=t.getNodeAttributes(T),C=e[T];C?e[T]={dx:C.dx*u,dy:C.dy*u,x:L[i]||0,y:L[o]||0}:e[T]={dx:0,dy:0,x:L[i]||0,y:L[o]||0}}if(s)for(let A=0;A<w;A++){const T=p[A],L=e[T];for(let C=A+1;C<w;C++){const E=p[C],F=e[E],y=F.x-L.x,_=F.y-L.y,b=Math.sqrt(y*y+_*_)||1,G=s/b*y,q=s/b*_;L.dx-=G,L.dy-=q,F.dx+=G,F.dy+=q}}if(a&&t.forEachEdge((A,T,L,C,E,F,y)=>{if(L===C||d.fromEntry(L,E)||d.fromEntry(C,F)||c.fromEntry(A,T,L,C,E,F,y))return;const _=e[L],b=e[C],G=b.x-_.x,q=b.y-_.y,Q=Math.sqrt(G*G+q*q)||1,ne=a*Q*G,N=a*Q*q;_.dx+=ne,_.dy+=N,b.dx-=ne,b.dy-=N}),l)for(let A=0;A<w;A++){const T=p[A],L=e[T],{x:C,y:E}=L,F=Math.sqrt(C*C+E*E)||1;e[T].dx-=C*l*F,e[T].dy-=E*l*F}const S=!1;for(let A=0;A<w;A++){const T=p[A],L=e[T],C=Math.sqrt(L.dx*L.dx+L.dy*L.dy);C>h&&(L.dx*=h/C,L.dy*=h/C),f.fromGraph(t,T)?L.fixed=!0:(L.x+=L.dx,L.y+=L.dy,L.fixed=!1)}return{converged:S}},sa={};sa.assignLayoutChanges=function(n,t,e){const{nodeXAttribute:r,nodeYAttribute:i}=e;n.updateEachNodeAttributes((o,a)=>{const s=t[o];return!s||s.fixed||(a[r]=s.x,a[i]=s.y),a},{attributes:["x","y"]})};sa.collectLayoutChanges=function(n){const t={};for(const e in n){const r=n[e];t[e]={x:r.x,y:r.y}}return t};var Ep={nodeXAttribute:"x",nodeYAttribute:"y",isNodeFixed:"fixed",shouldSkipNode:null,shouldSkipEdge:null,settings:{attraction:5e-4,repulsion:.1,gravity:1e-4,inertia:.6,maxMove:200}};const Ap=Pr,Sp=Bs,Cp=wp,is=sa,Lp=Ep;function Gu(n,t,e){if(!Ap(t))throw new Error("graphology-layout-force: the given graph is not a valid graphology instance.");typeof e=="number"?e={maxIterations:e}:e=e||{};const r=e.maxIterations;if(e=Sp(e,Lp),typeof r!="number"||r<=0)throw new Error("graphology-layout-force: you should provide a positive number of maximum iterations.");const i={};let o=null,a;for(a=0;a<r&&(o=Cp(t,i,e),!o.converged);a++);if(n){is.assignLayoutChanges(t,i,e);return}return is.collectLayoutChanges(i)}const Tp=Gu.bind(null,!1);Tp.assign=Gu.bind(null,!0);const xp=4;function Op(n,t){var e;return(e=n==null?void 0:n.filter(r=>t.includes(r)))!=null?e:[]}function Iu(n,t=xp){return Math.round(n*Math.pow(10,t))/Math.pow(10,t)}function Dp(n){return n.length===0?0:n.reduce((t,e)=>t+e)}function Pp(n,t){const e={},r=n.neighbors(t);return n.forEachNode(i=>{const o=n.neighbors(i),a=Op(r,o);let s=1/0;if(a.length){const l=a.map(u=>n.outNeighbors(u).length);s=Iu(Dp(l.map(u=>1/Math.log(u))))}e[i]={measure:s,extra:a}}),Object.fromEntries(Object.entries(e).filter(([i,o])=>o.measure!==0&&Number.isFinite(o.measure)))}const kp=async(n,t)=>{const e=l=>`[
    :find ?b ?page 
    :where 
      [?b :block/path-refs ?link]
      [?link :block/name "${l}"]
      [?b :block/path-refs ?otherlinks]
      [?otherlinks :block/name ?page]
    ]`,r=n.getNodeAttributes(t),i=await Promise.all([r.label,...r.rawAliases].map(l=>logseq.DB.datascriptQuery(e(l))));console.log(i);const o={};for(const l of i.flat()){const u=Xn(n,l[1]);!u||(o[u]?o[u]+=1:o[u]=1)}const a=Math.max(...Object.values(o)),s={};for(const l of Object.keys(o))s[l]={measure:Iu(10*o[l]/a),extra:["1"]};return s};function hn(n,t,e){const r=Xn(n,t),i=Xn(n,e);if(!r||!i)return{nodes:void 0,edges:void 0};const o=Ao.bidirectional(n,r,i)||Ao.bidirectional(n,i,r);if(o){const a=hh(n,o);return{nodes:o,edges:a}}else return{nodes:void 0,edges:void 0}}function To(n,t,e){const r=Xn(n,t),i=Xn(n,e);if(!r&&!i)return{nodes:void 0,edges:void 0};const o=ou(n),a=Ao.bidirectional(o,r,i);if(a){const s=[];for(let l=0;l<a.length-1;l++){const u=n.directedEdges(a[l],a[l+1]).concat(n.directedEdges(a[l],a[l+1]));u.length&&s.push(u[0])}return{nodes:a,edges:s}}else return{nodes:void 0,edges:void 0}}function Fp(n,t){return n==null?void 0:n.includes(t)}if(Hi.vitest){const{it:n,expect:t,describe:e}=Hi.vitest;e("shortestPathDirected",()=>{n("returns directed paths",()=>{const r=new _e;r.addNode("A",{label:"A"}),r.addNode("B",{label:"B"}),r.addNode("C",{label:"C"}),r.addEdge("A","B"),r.addEdge("B","C");const{nodes:i,edges:o}=hn(r,"A","C");t(i).toMatchObject(["A","B","C"]),t(o).toMatchObject([r.edge("A","B"),r.edge("B","C")])}),n("returns directed paths even if backwards",()=>{const r=new _e;r.addNode("A",{label:"A"}),r.addNode("B",{label:"B"}),r.addNode("C",{label:"C"}),r.addEdge("A","B"),r.addEdge("B","C");const{nodes:i,edges:o}=hn(r,"C","A");t(i).toMatchObject(["A","B","C"]),t(o).toMatchObject([r.edge("A","B"),r.edge("B","C")])}),n("will not return undirected paths",()=>{const r=new _e;r.addNode("A",{label:"A"}),r.addNode("B",{label:"B"}),r.addNode("C",{label:"C"}),r.addEdge("A","B"),r.addEdge("C","B");const{nodes:i,edges:o}=hn(r,"C","A");t(i).toBeUndefined(),t(o).toBeUndefined()}),n("will not return disconnected paths",()=>{const r=new _e;r.addNode("A",{label:"A"}),r.addNode("B",{label:"B"}),r.addNode("C",{label:"C"}),r.addEdge("A","B");const{nodes:i,edges:o}=hn(r,"A","C");t(i).toBeUndefined(),t(o).toBeUndefined()})}),e("shortestPathUndirected",()=>{n("will return undirected paths",()=>{const r=new _e;r.addNode("A",{label:"A"}),r.addNode("B",{label:"B"}),r.addNode("C",{label:"C"}),r.addEdge("A","B"),r.addEdge("C","B");const{nodes:i,edges:o}=To(r,"A","C");t(i).toMatchObject(["A","B","C"]),t(o).toMatchObject([r.edge("A","B"),r.edge("C","B")])}),n("will not return disconnected paths",()=>{const r=new _e;r.addNode("A",{label:"A"}),r.addNode("B",{label:"B"}),r.addNode("C",{label:"C"}),r.addEdge("A","B");const{nodes:i,edges:o}=To(r,"A","C");t(i).toBeUndefined(),t(o).toBeUndefined()}),n("returns paths that involve aliases",()=>{const r=new _e;r.addNode("A",{label:"A",aliases:["B"]}),r.addNode("C",{label:"C"}),r.addEdge("C","A");const{nodes:i,edges:o}=hn(r,"B","C");t(i).toMatchObject(["C","A"]),t(o).toMatchObject([r.edge("C","A")])})})}var $u={},ju={exports:{}};(()=>{var n={d:(r,i)=>{for(var o in i)n.o(i,o)&&!n.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:i[o]})},o:(r,i)=>Object.prototype.hasOwnProperty.call(r,i),r:r=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})}},t={};n.r(t),n.d(t,{default:()=>e});const e=`attribute vec2 a_position;
attribute float a_size;
attribute vec4 a_color;
attribute vec4 a_texture;

uniform float u_ratio;
uniform float u_scale;
uniform mat3 u_matrix;

varying vec4 v_color;
varying float v_border;
varying vec4 v_texture;

const float bias = 255.0 / 254.0;

void main() {
  gl_Position = vec4(
    (u_matrix * vec3(a_position, 1)).xy,
    0,
    1
  );

  // Multiply the point size twice:
  //  - x SCALING_RATIO to correct the canvas scaling
  //  - x 2 to correct the formulae
  gl_PointSize = a_size * u_ratio * u_scale * 2.0;

  v_border = (1.0 / u_ratio) * (0.5 / a_size);

  // Extract the color:
  v_color = a_color;
  v_color.a *= bias;

  // Pass the texture coordinates:
  v_texture = a_texture;
}
`;ju.exports=t})();var Uu={exports:{}};(()=>{var n={d:(r,i)=>{for(var o in i)n.o(i,o)&&!n.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:i[o]})},o:(r,i)=>Object.prototype.hasOwnProperty.call(r,i),r:r=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})}},t={};n.r(t),n.d(t,{default:()=>e});const e=`precision mediump float;

varying vec4 v_color;
varying float v_border;
varying vec4 v_texture;

uniform sampler2D u_atlas;

const float radius = 0.5;
const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  vec4 color;

  if (v_texture.w > 0.0) {
    vec4 texel = texture2D(u_atlas, v_texture.xy + gl_PointCoord * v_texture.zw, -1.0);
    color = vec4(mix(v_color, texel, texel.a).rgb, max(texel.a, v_color.a));
  } else {
    color = v_color;
  }

  vec2 m = gl_PointCoord - vec2(0.5, 0.5);
  float dist = length(m);

  if (dist < radius - v_border) {
    gl_FragColor = color;
  } else if (dist < radius) {
    gl_FragColor = mix(transparent, color, (radius - dist) / v_border);
  } else {
    gl_FragColor = transparent;
  }
}
`;Uu.exports=t})();var zu=W&&W.__extends||function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Rp=W&&W.__read||function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var r=e.call(n),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},Gp=W&&W.__spreadArray||function(n,t,e){if(e||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return n.concat(o||Array.prototype.slice.call(t))},Mu=W&&W.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty($u,"__esModule",{value:!0});var Ip=ge,Nu=Mu(ju.exports),Bu=Mu(Uu.exports),Wu=Hr,xo=1,zi=8,$p=100;(function(n){zu(t,n);function t(e,r){return n.call(this,e,Nu.default,Bu.default,xo,zi)||this}return t.prototype.bind=function(){},t.prototype.process=function(e,r,i){},t.prototype.render=function(e){},t.prototype.rebindTexture=function(){},t})(Wu.AbstractNodeProgram);function jp(){var n=[],t={},e,r=!1,i=void 0;function o(s){if(!t[s]){var l=new Image;l.addEventListener("load",function(){t[s]={status:"pending",image:l},typeof i!="number"&&(i=requestAnimationFrame(function(){return a()}))}),l.addEventListener("error",function(){t[s]={status:"error"}}),t[s]={status:"loading"},l.setAttribute("crossOrigin",""),l.src=s}}function a(){i=void 0;var s=[];for(var l in t){var u=t[l];u.status==="pending"&&s.push({id:l,image:u.image,size:Math.min(u.image.width,u.image.height)||1})}var h=document.createElement("canvas"),d=h.getContext("2d");h.width=s.reduce(function(f,p){var w=p.size;return f+w},r?e.width:0),h.height=Math.max.apply(Math,Gp([r?e.height:0],Rp(s.map(function(f){var p=f.size;return p})),!1));var c=0;r&&(d.putImageData(e,0,0),c=e.width),s.forEach(function(f){var p=f.id,w=f.image,S=f.size,A=Math.min($p,S),T=0,L=0;(w.width||0)>(w.height||0)?T=(w.width-w.height)/2:L=(w.height-w.width)/2,d.drawImage(w,T,L,S,S,c,0,A,A),t[p]={status:"ready",x:c,y:0,width:A,height:A},c+=A}),e=d.getImageData(0,0,h.width,h.height),r=!0,n.forEach(function(f){return f()})}return function(s){zu(l,s);function l(u,h){var d=s.call(this,u,Nu.default,Bu.default,xo,zi)||this;n.push(function(){d&&d.rebindTexture&&d.rebindTexture(),h&&h.refresh&&h.refresh()}),e=new ImageData(1,1),d.textureLocation=u.getAttribLocation(d.program,"a_texture");var c=u.getUniformLocation(d.program,"u_atlas");if(c===null)throw new Error("NodeProgramImage: error while getting atlasLocation");return d.atlasLocation=c,d.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,d.texture),u.texImage2D(u.TEXTURE_2D,0,u.RGBA,1,1,0,u.RGBA,u.UNSIGNED_BYTE,new Uint8Array([0,0,0,0])),d.bind(),d}return l.prototype.bind=function(){s.prototype.bind.call(this);var u=this.gl;u.enableVertexAttribArray(this.textureLocation),u.vertexAttribPointer(this.textureLocation,4,u.FLOAT,!1,this.attributes*Float32Array.BYTES_PER_ELEMENT,16)},l.prototype.process=function(u,h,d){var c=this.array,f=d*xo*zi,p=u.image,w=p&&t[p];if(typeof p=="string"&&!w&&o(p),h){c[f++]=0,c[f++]=0,c[f++]=0,c[f++]=0,c[f++]=0,c[f++]=0,c[f++]=0,c[f++]=0;return}if(c[f++]=u.x,c[f++]=u.y,c[f++]=u.size,c[f++]=(0,Ip.floatColor)(u.color),w&&w.status==="ready"){var S=e.width,A=e.height;c[f++]=w.x/S,c[f++]=w.y/A,c[f++]=w.width/S,c[f++]=w.height/A}else c[f++]=0,c[f++]=0,c[f++]=0,c[f++]=0},l.prototype.render=function(u){if(!this.hasNothingToRender()){this.latestRenderParams=u;var h=this.gl,d=this.program;h.useProgram(d),h.uniform1f(this.ratioLocation,1/Math.sqrt(u.ratio)),h.uniform1f(this.scaleLocation,u.scalingRatio),h.uniformMatrix3fv(this.matrixLocation,!1,u.matrix),h.uniform1i(this.atlasLocation,0),h.drawArrays(h.POINTS,0,this.array.length/zi)}},l.prototype.rebindTexture=function(){var u=this.gl;u.bindTexture(u.TEXTURE_2D,this.texture),u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,e),u.generateMipmap(u.TEXTURE_2D),this.latestRenderParams&&(this.bind(),this.bufferData(),this.render(this.latestRenderParams))},l}(Wu.AbstractNodeProgram)}var Up=$u.default=jp;function zp(n){let t,e,r;const i=n[10].default,o=Xu(i,n,n[9],null);return{c(){t=ue("div"),e=Se(),o&&o.c(),ae(t,"class","sigma svelte-u8wjrv")},m(a,s){Qe(a,t,s),n[11](t),Qe(a,e,s),o&&o.m(a,s),r=!0},p(a,[s]){o&&o.p&&(!r||s&512)&&Qu(o,i,a,a[9],r?Ju(i,a[9],s,null):el(a[9]),null)},i(a){r||(pr(o,a),r=!0)},o(a){Dr(o,a),r=!1},d(a){a&&Ze(t),n[11](null),a&&Ze(e),o&&o.d(a)}}}const Gi="#f87171",bo="#fb923c",Mp="#a3a3a3";function Np(n,t,e){let r,i,o;Br(n,Ne,y=>e(6,r=y)),Br(n,uu,y=>e(7,i=y)),Br(n,su,y=>e(8,o=y));let{$$slots:a={},$$scope:s}=t,l,u,h,{size:d}=t;const c=il();ol("sigma",{getGraph:()=>u==null?void 0:u.getGraph()}),Po(async()=>{const y=new _e;e(2,u=new fp(y,l,{allowInvalidContainer:!0,nodeReducer:w,edgeReducer:E,defaultNodeColor:Mp,nodeProgramClasses:{circle:gf,image:Up()}})),u.on("clickNode",f),r.cameraState&&u.getCamera().setState(r.cameraState)}),ps(()=>{if(!u)return;let y=Ih.inferSettings(d);h==null||h.kill();const _=u.getGraph();e(3,h=new bp(_,{settings:$n(ur({},y),{gravity:r.nodesGravity*y.gravity,strongGravityMode:!0,scalingRatio:r.scalingRatio*y.scalingRatio,barnesHutTheta:.2,edgeWeightInfluence:r.edgeWeightInfluence*-1,slowDown:100})})),h.start(),u.refresh()}),ko(async()=>{h&&(h.kill(),e(3,h=void 0)),u&&(Mr(Ne,r.cameraState=u.getCamera().getState(),r),u.kill(),e(2,u=void 0))});const f=async({node:y})=>{c("nodeclick",y)},p=(y,_)=>y>_?_:y,w=(y,_)=>{var ne,N,pe,Ce;const b=u==null?void 0:u.getGraph(),G=ur({},_);r.size==="in"?G.size=p(Math.max(2,b.neighbors(y).length/2),16):r.size==="out"&&(G.size=p(b.inDegree(y),16));const q=(ne=G.label)==null?void 0:ne.toUpperCase(),Q=(N=r.search)==null?void 0:N.toUpperCase();if(!r.filter&&Q&&q&&(q.includes(Q)||((pe=_.aliases)==null?void 0:pe.find(ie=>ie.includes(Q))))&&(G.color=bo,G.size=((Ce=G.size)!=null?Ce:_.size)+2,G.highlighted=!0),r.mode===Je.ShortestPath){const ie=r.pathA&&(L==null?void 0:L.get(r.pathA.toUpperCase())),P=r.pathB&&(L==null?void 0:L.get(r.pathB.toUpperCase()));(S==null?void 0:S.includes(y))||y===ie||y===P?(G.color=Gi,G.zIndex=2,G.highlighted=!0):G.zIndex=-1}if(r.mode===Je.AdamicAdar&&T){const ie=r.pathA&&(L==null?void 0:L.get(r.pathA.toUpperCase()));ie&&y===ie?(G.size=10,G.zIndex=2,G.color=bo,G.highlighted=!0):T[y]&&(G.color=Gi,G.size=p(r.bubbleSize*T[y].measure,32),G.label=`${T[y].measure} ${_.label}`)}if(r.mode===Je.CoCitation&&C){const ie=r.pathA&&(L==null?void 0:L.get(r.pathA.toUpperCase()));ie&&y===ie?(G.size=10,G.zIndex=2,G.color=bo,G.highlighted=!0):C[y]&&(G.color=Gi,G.size=r.bubbleSize*C[y].measure,G.label=`${C[y].measure} ${_.label}`)}return G};let S,A,T,L,C;const E=(y,_)=>{const b=ur({},_);return u&&r.mode===Je.ShortestPath&&Fp(A,y)&&(b.color=Gi,b.size=5),b};function F(y){_o[y?"unshift":"push"](()=>{l=y,e(0,l)})}return n.$$set=y=>{"size"in y&&e(1,d=y.size),"$$scope"in y&&e(9,s=y.$$scope)},n.$$.update=()=>{if(n.$$.dirty&68&&u&&(console.log(r.labelThreshold),u.setSetting("labelRenderedSizeThreshold",r.labelThreshold)),n.$$.dirty&264&&(o?h&&h.start():h&&h.stop()),n.$$.dirty&196&&u&&(r.pathA||r.pathB||r.search)&&e(5,L=vh(i)),n.$$.dirty&68)if(u&&r.mode===Je.ShortestPath&&r.pathA&&r.pathB){const y=u.getGraph(),_=r.directed?hn(y,r.pathA,r.pathB):To(y,r.pathB,r.pathA);S=_.nodes,A=_.edges}else S=void 0,A=void 0;if(n.$$.dirty&116)if(u&&r.mode===Je.AdamicAdar&&r.pathA){const y=u.getGraph(),_=r.pathA&&(L==null?void 0:L.get(r.pathA.toUpperCase()));_?(e(4,T=Pp(y,_)),console.log(T)):e(4,T=void 0)}else e(4,T=void 0);if(n.$$.dirty&100)if(u&&r.mode===Je.CoCitation&&r.pathA){const y=L==null?void 0:L.get(r.pathA.toUpperCase());y?(async()=>C=await kp(u.getGraph(),y))():C=void 0}else C=void 0},[l,d,u,h,T,L,r,i,o,s,a,F]}class Bp extends ei{constructor(t){super(),Qn(this,t,Np,zp,wn,{size:1})}}function os(n){const t=n[5](n[1],n[0].filter,n[0].search,n[0].filterLength);n[9]=t}function as(n,t,e){const r=n.slice();return r[10]=t[e],r}function ss(n,t,e){const r=n.slice();return r[13]=t[e],r}function us(n,t){let e,r,i;return r=new wh({props:{id:t[13],attributes:t[9].getNodeAttributes(t[13])}}),{key:n,first:null,c(){e=Do(),Mi(r.$$.fragment),this.first=e},m(o,a){Qe(o,e,a),Kn(r,o,a),i=!0},p(o,a){t=o;const s={};a&3&&(s.id=t[13]),a&3&&(s.attributes=t[9].getNodeAttributes(t[13])),r.$set(s)},i(o){i||(pr(r.$$.fragment,o),i=!0)},o(o){Dr(r.$$.fragment,o),i=!1},d(o){o&&Ze(e),Zn(r,o)}}}function ls(n,t){let e,r,i;return r=new Ah({props:{source:t[9].source(t[10]),target:t[9].target(t[10]),attributes:t[9].getEdgeAttributes(t[10])}}),{key:n,first:null,c(){e=Do(),Mi(r.$$.fragment),this.first=e},m(o,a){Qe(o,e,a),Kn(r,o,a),i=!0},p(o,a){t=o;const s={};a&3&&(s.source=t[9].source(t[10])),a&3&&(s.target=t[9].target(t[10])),a&3&&(s.attributes=t[9].getEdgeAttributes(t[10])),r.$set(s)},i(o){i||(pr(r.$$.fragment,o),i=!0)},o(o){Dr(r.$$.fragment,o),i=!1},d(o){o&&Ze(e),Zn(r,o)}}}function Wp(n){os(n);let t=[],e=new Map,r,i=[],o=new Map,a,s,l=n[9].nodes();const u=c=>c[13];for(let c=0;c<l.length;c+=1){let f=ss(n,l,c),p=u(f);e.set(p,t[c]=us(p,f))}let h=n[9].edges();const d=c=>c[10];for(let c=0;c<h.length;c+=1){let f=as(n,h,c),p=d(f);o.set(p,i[c]=ls(p,f))}return{c(){for(let c=0;c<t.length;c+=1)t[c].c();r=Se();for(let c=0;c<i.length;c+=1)i[c].c();a=Do()},m(c,f){for(let p=0;p<t.length;p+=1)t[p].m(c,f);Qe(c,r,f);for(let p=0;p<i.length;p+=1)i[p].m(c,f);Qe(c,a,f),s=!0},p(c,f){os(c),f&35&&(l=c[9].nodes(),ga(),t=va(t,f,u,1,c,l,e,r.parentNode,ma,us,r,ss),ya()),f&35&&(h=c[9].edges(),ga(),i=va(i,f,d,1,c,h,o,a.parentNode,ma,ls,a,as),ya())},i(c){if(!s){for(let f=0;f<l.length;f+=1)pr(t[f]);for(let f=0;f<h.length;f+=1)pr(i[f]);s=!0}},o(c){for(let f=0;f<t.length;f+=1)Dr(t[f]);for(let f=0;f<i.length;f+=1)Dr(i[f]);s=!1},d(c){for(let f=0;f<t.length;f+=1)t[f].d(c);c&&Ze(r);for(let f=0;f<i.length;f+=1)i[f].d(c);c&&Ze(a)}}}function Hp(n){let t,e,r,i,o,a,s,l,u,h;return o=new Bp({props:{size:n[1].size,$$slots:{default:[Wp]},$$scope:{ctx:n}}}),o.$on("nodeclick",n[4]),s=new Uh({}),{c(){t=ue("main"),e=ue("div"),r=ue("button"),r.innerHTML='<div class="i-mdi-close text-slate-600"></div>',i=Se(),Mi(o.$$.fragment),a=Se(),Mi(s.$$.fragment),ae(r,"class","h-8 w-8 p-1 opacity-50 flex justify-center items-center bg-white border-0 hover:opacity-100 hover:bg-slate-100 rounded"),ae(e,"class","flex flex-row justify-end pr-2"),ae(t,"class","svelte-snan90")},m(d,c){Qe(d,t,c),K(t,e),K(e,r),K(t,i),Kn(o,t,null),K(t,a),Kn(s,t,null),l=!0,u||(h=[Be(window,"keydown",n[2]),Be(window,"keyup",n[3]),Be(r,"click",qp)],u=!0)},p(d,[c]){const f={};c&2&&(f.size=d[1].size),c&65539&&(f.$$scope={dirty:c,ctx:d}),o.$set(f)},i(d){l||(pr(o.$$.fragment,d),pr(s.$$.fragment,d),l=!0)},o(d){Dr(o.$$.fragment,d),Dr(s.$$.fragment,d),l=!1},d(d){d&&Ze(t),Zn(o),Zn(s),u=!1,It(h)}}}function qp(){logseq.hideMainUI()}function Vp(n,t,e){let r,i,o;Br(n,Ne,c=>e(0,r=c)),Br(n,su,c=>e(8,i=c)),Br(n,uu,c=>e(1,o=c)),Po(async()=>{logseq.on("ui:visible:changed",async({visible:c})=>{qn.visible(c),c&&qn.reload()}),logseq.DB.onChanged(()=>{i&&qn.reload()})});let a=!1;const s=c=>{console.log("down",c),c.key=="Escape"?logseq.hideMainUI():c.key==="Meta"&&(a=!0)},l=c=>{console.log("up",c),c.key==="Meta"&&(a=!1)},u=async c=>{if(console.log("nodeclicked",c,a),r.mode===Je.Navigate||a){const f=await logseq.Editor.getPage(+c.detail);f&&(a=!1,logseq.App.pushState("page",{name:f.name}),logseq.hideMainUI())}else if(r.mode===Je.AdamicAdar||r.mode===Je.CoCitation){const f=await logseq.Editor.getPage(+c.detail);f&&r.pathA!==f.name?Mr(Ne,r.pathA=f.name,r):Mr(Ne,r.pathA=void 0,r)}else if(r.mode===Je.ShortestPath&&!r.pathA){const f=await logseq.Editor.getPage(+c.detail);f&&Mr(Ne,r.pathA=f.name,r)}else if(r.mode===Je.ShortestPath&&r.pathA){const f=await logseq.Editor.getPage(+c.detail);f&&Mr(Ne,r.pathB=f.name,r)}};let h;function d(c,f,p,w){if(h)for(const A of h.nodeEntries())c.hasNode(A.node)&&(c.updateNodeAttribute(A.node,"x",()=>A.attributes.x),c.updateNodeAttribute(A.node,"y",()=>A.attributes.y));if(!f||!p)return h=c,c;const S=bh(c,p);for(const A of c.nodes())S(A,w)&&c.dropNode(A);return h=c,c}return[r,o,s,l,u,d]}class Yp extends ei{constructor(t){super(),Qn(this,t,Vp,Hp,wn,{})}}const Kp=[{key:"journal",type:"boolean",title:"Show journal pages on graph",description:"Do you want to show journal pages on your graph?",default:!1}];function Zp(){return{async openGraph(){logseq.showMainUI({autoFocus:!0})}}}async function Xp(){new Yp({target:document.getElementById("app")});const n={position:"fixed",zIndex:12,height:"calc(100vh - 8px)",top:"8px"};logseq.setMainUIInlineStyle(n),logseq.App.registerUIItem("toolbar",{key:"logseq-graph-analysis",template:`
      <a class="button" data-on-click="openGraph" title="Open graph analysis">
        <svg style="width:24px;height:24px" viewBox="0 0 24 24">
          <path fill="currentColor" d="M21 8C19.5 8 18.7 9.4 19.1 10.5L15.5 14.1C15.2 14 14.8 14 14.5 14.1L11.9 11.5C12.3 10.4 11.5 9 10 9C8.6 9 7.7 10.4 8.1 11.5L3.5 16C2.4 15.7 1 16.5 1 18C1 19.1 1.9 20 3 20C4.4 20 5.3 18.6 4.9 17.5L9.4 12.9C9.7 13 10.1 13 10.4 12.9L13 15.5C12.7 16.5 13.5 18 15 18C16.5 18 17.3 16.6 16.9 15.5L20.5 11.9C21.6 12.2 23 11.4 23 10C23 8.9 22.1 8 21 8M15 9L15.9 6.9L18 6L15.9 5.1L15 3L14.1 5.1L12 6L14.1 6.9L15 9M3.5 11L4 9L6 8.5L4 8L3.5 6L3 8L1 8.5L3 9L3.5 11Z" />
        </svg> 
     </a>`})}logseq.useSettingsSchema(Kp);logseq.ready(Zp(),Xp).catch(()=>console.error);
